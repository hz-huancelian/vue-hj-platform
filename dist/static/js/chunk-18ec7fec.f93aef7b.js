(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18ec7fec"],{"15d4":function(e,t,a){"use strict";a.d(t,"e",(function(){return l})),a.d(t,"l",(function(){return s})),a.d(t,"n",(function(){return n})),a.d(t,"p",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"o",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"k",(function(){return p})),a.d(t,"m",(function(){return m})),a.d(t,"r",(function(){return d})),a.d(t,"s",(function(){return f})),a.d(t,"b",(function(){return h})),a.d(t,"q",(function(){return b})),a.d(t,"c",(function(){return v})),a.d(t,"g",(function(){return g})),a.d(t,"i",(function(){return y})),a.d(t,"j",(function(){return k})),a.d(t,"d",(function(){return _}));var r=a("b775");function l(e){return Object(r["a"])({url:"/checkTask/findByCondition",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/checkTask/findHistoryByCondition",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/checkTask/getCheckFactorInfos",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/checkTask/getOfferFactorsByTaskId/".concat(e),method:"get"})}function i(e){return Object(r["a"])({url:"/checkTask/assignmentsFactor",method:"post",data:e})}function c(){return Object(r["a"])({url:"/checkTask/getCheckUsers",method:"get"})}function u(e){return Object(r["a"])({url:"/checkFactor/findAuditCheckFactorByCondition",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/checkFactor/findHistoryByCondition",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/checkFactor/findSubFactorByCheckStandId/".concat(e),method:"get"})}function d(e){return Object(r["a"])({url:"/checkFactor/saveCheckFactorData",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/checkFactor/submitCheckFactor",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/checkFactor/auditCheckFactor",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/checkFactor/sampDrawApply",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/checkFactor/batchAuditCheckFactor",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/checkTask/findCheckTaskByCondition",method:"get",params:e})}function y(e){return Object(r["a"])({url:"/checkTask/findCheckTaskDetailByCondition0",method:"get",params:e})}function k(e){return Object(r["a"])({url:"/checkTask/findCheckTaskDetailByCondition1",method:"get",params:e})}function _(e){return Object(r["a"])({url:"/checkFactor/batchSampDrawApply",method:"post",data:e})}},"2d85":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"待录入因子列表",name:"2"}},[a("laborList",{attrs:{"check-task-id":e.checkTaskId}})],1),a("el-tab-pane",{attrs:{label:"已录入因子列表",name:"3"}},[a("hisLaborList",{attrs:{"check-task-id":e.checkTaskId}})],1)],1)],1)},l=[],s=a("fdde"),n=a("487f"),o={components:{laborList:s["default"],hisLaborList:n["default"]},data:function(){return{activeName:"2",checkTaskId:""}},created:function(){this.$route.params.checkTaskId&&(this.checkTaskId=this.$route.params.checkTaskId)},methods:{handleClick:function(){}}},i=o,c=a("2877"),u=Object(c["a"])(i,r,l,!1,null,null,null);t["default"]=u.exports},4127:function(e,t,a){"use strict";var r=a("d233"),l=a("b313"),s={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Date.prototype.toISOString,o={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return n.call(e)},skipNulls:!1,strictNullHandling:!1},i=function e(t,a,l,s,n,i,c,u,p,m,d,f){var h=t;if("function"===typeof c)h=c(a,h);else if(h instanceof Date)h=m(h);else if(null===h){if(s)return i&&!f?i(a,o.encoder):a;h=""}if("string"===typeof h||"number"===typeof h||"boolean"===typeof h||r.isBuffer(h)){if(i){var b=f?a:i(a,o.encoder);return[d(b)+"="+d(i(h,o.encoder))]}return[d(a)+"="+d(String(h))]}var v,g=[];if("undefined"===typeof h)return g;if(Array.isArray(c))v=c;else{var y=Object.keys(h);v=u?y.sort(u):y}for(var k=0;k<v.length;++k){var _=v[k];n&&null===h[_]||(g=Array.isArray(h)?g.concat(e(h[_],l(a,_),l,s,n,i,c,u,p,m,d,f)):g.concat(e(h[_],a+(p?"."+_:"["+_+"]"),l,s,n,i,c,u,p,m,d,f)))}return g};e.exports=function(e,t){var a=e,n=t?r.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!==typeof n.encoder)throw new TypeError("Encoder has to be a function.");var c="undefined"===typeof n.delimiter?o.delimiter:n.delimiter,u="boolean"===typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,p="boolean"===typeof n.skipNulls?n.skipNulls:o.skipNulls,m="boolean"===typeof n.encode?n.encode:o.encode,d="function"===typeof n.encoder?n.encoder:o.encoder,f="function"===typeof n.sort?n.sort:null,h="undefined"!==typeof n.allowDots&&n.allowDots,b="function"===typeof n.serializeDate?n.serializeDate:o.serializeDate,v="boolean"===typeof n.encodeValuesOnly?n.encodeValuesOnly:o.encodeValuesOnly;if("undefined"===typeof n.format)n.format=l["default"];else if(!Object.prototype.hasOwnProperty.call(l.formatters,n.format))throw new TypeError("Unknown format option provided.");var g,y,k=l.formatters[n.format];"function"===typeof n.filter?(y=n.filter,a=y("",a)):Array.isArray(n.filter)&&(y=n.filter,g=y);var _,S=[];if("object"!==typeof a||null===a)return"";_=n.arrayFormat in s?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var F=s[_];g||(g=Object.keys(a)),f&&g.sort(f);for(var x=0;x<g.length;++x){var w=g[x];p&&null===a[w]||(S=S.concat(i(a[w],w,F,u,p,m?d:null,y,f,h,b,k,v)))}var I=S.join(c),N=!0===n.addQueryPrefix?"?":"";return I.length>0?N+I:""}},4328:function(e,t,a){"use strict";var r=a("4127"),l=a("9e6a"),s=a("b313");e.exports={formats:s,parse:l,stringify:r}},"487f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-continer"},[a("el-form",{attrs:{model:e.searchForm,inline:!0}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",[a("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"样品编号"},model:{value:e.searchForm.sampleNo,callback:function(t){e.$set(e.searchForm,"sampleNo",t)},expression:"searchForm.sampleNo"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"因子名称"},model:{value:e.searchForm.factorName,callback:function(t){e.$set(e.searchForm,"factorName",t)},expression:"searchForm.factorName"}})],1),a("el-form-item",[a("el-select",{staticStyle:{width:"165px"},attrs:{clearable:"",filterable:"",placeholder:"检测状态"},model:{value:e.searchForm.checkStatus,callback:function(t){e.$set(e.searchForm,"checkStatus",t)},expression:"searchForm.checkStatus"}},[a("el-option",{attrs:{label:"已录入",value:"3"}}),a("el-option",{attrs:{label:"待审核",value:"4"}}),a("el-option",{attrs:{label:"审核通过",value:"5"}})],1)],1),a("el-form-item",[a("el-button",{staticClass:"iconfont icon-chaxun1",attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v(" 查询")]),a("el-button",{staticClass:"iconfont icon-fanhui",attrs:{type:"primary"},on:{click:e.goBack}},[e._v(" 返回")])],1)],1),a("el-col",{staticClass:"search-right",attrs:{span:4}},[a("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.handleSearch}},[e._v("刷新")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.checkData,stripe:"",border:"","highlight-current-row":"","header-cell-style":{background:"#ECF3FC"}}},[a("template",{slot:"empty"},[a("div",{staticClass:"table_empty"},[a("div",{staticClass:"empty_tips"},[a("span",[e._v("\n            暂无信息\n          ")])])])]),a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{prop:"factorName",label:"检测因子",width:"130px",align:"center"}}),a("el-table-column",{attrs:{prop:"sampleNo",label:"样品编号",width:"160px",align:"center"}}),a("el-table-column",{attrs:{prop:"factorPoint",label:"采样点位",width:"110px",align:"center"}}),a("el-table-column",{attrs:{prop:"dayAndCount",label:"频次(次/天)",width:"120px",align:"center"}}),a("el-table-column",{attrs:{prop:"standardName",label:"检测标准","min-width":"220px",align:"center"}}),a("el-table-column",{attrs:{prop:"checkRes",label:"检测结果","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.checkRes&&r.checkRes.length>0?[e._v("\n          "+e._s(r.masterRes)),""!==r.exponRes&&0!==r.exponRes?[e._v("×10"),a("sup",[e._v(e._s(r.exponRes))])]:e._e(),e._v("\n          "+e._s(r.unitName&&"无量纲"!==r.unitName?" "+r.unitName:"")+"\n        ")]:void 0]}}])}),a("el-table-column",{attrs:{prop:"assignUser",label:"分析员",align:"center"}}),a("el-table-column",{attrs:{prop:"collectTime",label:"采样时间",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.collectTime||a.collectDate?[e._v("\n          "+e._s(a.collectTime&&""!=a.collectTime?(a.collectDate?a.collectDate+" ":"")+a.collectTime:a.collectDate)+"\n        ")]:e._e()]}}])}),a("el-table-column",{attrs:{prop:"storeTime",label:"入库时间",width:"160",align:"center"}}),a("el-table-column",{attrs:{prop:"dataEntryStep",label:"样品归类",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{type:"1"===r.sampleType?"danger":""}},[e._v("\n          "+e._s("1"===r.sampleType?"样品分包":"样品自检")+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"checkStatus",label:"检测状态",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{type:e._f("statusQualityFilter")(r.checkStatus)}},[e._v("\n          "+e._s(e.CHECK_STATUS[r.checkStatus])+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"dataEntryStep",label:"数据操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{type:"1"===r.dataEntryStep?"danger":""}},[e._v("\n          "+e._s("1"===r.dataEntryStep?"采样录入":"检测录入")+"\n        ")])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"240px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(r)}}},[e._v("查看")]),a("div",{staticClass:"erc-divider-vertical"}),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleLocalDetail(r)}}},[e._v("采样记录")]),r.assignUserId!==e.userId||"2"!==r.checkStatus&&"3"!==r.checkStatus&&"6"!==r.checkStatus?e._e():a("div",{staticClass:"erc-divider-vertical"}),r.assignUserId!==e.userId||"2"!==r.checkStatus&&"3"!==r.checkStatus&&"6"!==r.checkStatus?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleSetResult(r)}}},[e._v("结果编辑")]),r.assignUserId===e.userId&&"3"===r.checkStatus?a("div",{staticClass:"erc-divider-vertical"}):e._e(),r.assignUserId===e.userId&&"3"===r.checkStatus?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleApprove(r.checkFactorId)}}},[e._v("提交审核")]):e._e()]}}])})],2),a("div",{staticStyle:{float:"right"}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.searchForm.pageNumber,limit:e.searchForm.pageSize},on:{"update:page":function(t){return e.$set(e.searchForm,"pageNumber",t)},"update:limit":function(t){return e.$set(e.searchForm,"pageSize",t)},pagination:e.handleSearch}})],1),a("el-dialog",{attrs:{title:"样品详情",visible:e.detailVisible,width:"70%",center:"",top:"5vh"},on:{"update:visible":function(t){e.detailVisible=t}}},[a("div",{staticStyle:{width:"700px",margin:"0 auto"}},[a("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"样品编号:"}},[e._v(e._s(e.sampleForm.sampleNo))]),a("el-form-item",{attrs:{label:"检测因子:"}},[e._v(e._s(e.sampleForm.factorName))]),a("el-form-item",{attrs:{label:"检测标准:"}},[e._v(e._s(e.sampleForm.standardName))]),a("el-form-item",{attrs:{label:"因子备注:"}},[e._v(e._s(e.sampleForm.factorRemark))]),a("el-form-item",{attrs:{label:"检测备注:"}},[e._v(e._s(e.sampleForm.remark))]),a("el-form-item",{attrs:{label:"检测结果:"}},[e.sampleForm.factorSubsetVos&&e.sampleForm.factorSubsetVos.length>0?[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sampleForm.factorSubsetVos,border:"","header-cell-style":{background:"#ECF3FC"}}},[a("el-table-column",{attrs:{prop:"factorName",label:"套餐因子",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"检测结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n                  "+e._s(r.factorInfo&&r.factorInfo.v1?r.factorInfo.v1:0)+"\n                  "),r.factorInfo&&""!==r.factorInfo.v2&&0!==r.factorInfo.v2?[e._v("\n                    ×10"),a("sup",[e._v(e._s(r.factorInfo.v2?Number(r.factorInfo.v2):0))])]:e._e(),e._v("\n                  "+e._s(r.unitName&&"无量纲"!==r.unitName?" "+r.unitName:"")+"\n                ")]}}],null,!1,2686722662)})],1)]:e.sampleForm.checkRes&&e.sampleForm.checkRes.length>0?[e._v("\n            "+e._s(e.sampleForm.factorInfo&&e.sampleForm.factorInfo.v1?e.sampleForm.factorInfo.v1:0)+"\n            "),e.sampleForm.factorInfo&&""!==e.sampleForm.factorInfo.v2&&0!==e.sampleForm.factorInfo.v2?[e._v("\n              ×10"),a("sup",[e._v(e._s(e.sampleForm.factorInfo.v2?Number(e.sampleForm.factorInfo.v2):0))])]:e._e(),e._v("\n            "+e._s(e.sampleForm.unitName&&"无量纲"!==e.sampleForm.unitName?" "+e.sampleForm.unitName:"")+"\n          ")]:[e._v("暂无检测结果")]],2)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detailVisible=!1}}},[e._v("关 闭")])],1)]),a("el-dialog",{attrs:{title:e.currentSample+"-详情",visible:e.sampleVisible,width:"85%",center:"",top:"5vh"},on:{"update:visible":function(t){e.sampleVisible=t}}},[a("el-form",{attrs:{model:e.sampleDetailForm,"label-width":"180px","label-position":"right"}},[a("el-card",{staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v("基础信息")])]),a("el-col",{staticStyle:{height:"32px"},attrs:{span:16}},[a("el-form-item",{attrs:{"label-width":"100",label:"检测因子:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.factorName))])])],1),a("el-col",{staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100",label:"点位:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.factorPoint))])])],1)],1),e._l(e.sampleSecInfo,(function(t){return a("el-card",{key:t.groupKey,staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[t.groupName&&""!=t.groupName?a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v(e._s(t.groupName))])]):e._e(),e._l(t.params,(function(t,r){return a("el-col",{key:r,staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.name)+":")]),a("span",{staticClass:"showTile"},[e._v(e._s(t.value?t.value.toString():""))])])],1)}))],2)})),e.sampleDataInfo&&e.sampleDataInfo.length>0?a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v("现场检测因子信息")])]),a("el-table",{attrs:{data:e.sampleDataInfo,stripe:""}},[a("el-table-column",{attrs:{prop:"factorName",label:"检测因子项目"}}),a("el-table-column",{attrs:{label:"因子结果集"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.measuredForm?[e._v("\n                "+e._s("第一值: "+a.measuredForm.firstVal+" 第二值: "+a.measuredForm.secondVal+" 均值: "+a.measuredForm.avgVal)+"\n              ")]:[e._v("\n                "+e._s(a.factorData?a.factorData:"")+"\n              ")]]}}],null,!1,3613769334)}),a("el-table-column",{attrs:{prop:"checkEquipment",label:"检测设备"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(a.checkEquipment&&a.checkEquipment.length>0?a.checkEquipment.replaceAll("^_^"," "):"")+"\n            ")]}}],null,!1,2289891611)}),a("el-table-column",{attrs:{prop:"theoreticalVal",label:"理论值"}}),a("el-table-column",{attrs:{prop:"groundConditions",label:"测定值"}})],1)],1):e._e(),a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v("现场信息")])]),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样地址:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.sampleDataVo.collectLocation))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样日期:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.sampleDataVo.collectDate))])])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{"label-width":"100",label:"现场图片:"}},[e.sampleImageList&&e.sampleImageList.length>0?a("div",{staticClass:"demo-image__lazy"},e._l(e.sampleImageList,(function(t,r){return a("el-image",{key:r,staticStyle:{width:"100px",height:"100px","margin-left":"10px"},attrs:{src:t,"preview-src-list":e.sampleImageList}})})),1):e._e()])],1)],1)],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.sampleVisible=!1}}},[e._v("关 闭")])],1)],1),a("el-dialog",{attrs:{title:"样品结果录入",visible:e.testResultVisible,width:"70%",center:"",top:"5vh"},on:{"update:visible":function(t){e.testResultVisible=t}}},[a("div",{staticStyle:{width:"700px",margin:"0 auto"}},[a("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"样品编号:"}},[e._v(e._s(e.testResultForm.sampleNo))]),a("el-form-item",{attrs:{label:"检测因子:"}},[e._v(e._s(e.testResultForm.factorName))]),a("el-form-item",{attrs:{label:"检测标准:"}},[e._v(e._s(e.testResultForm.standardName))]),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n            备注信息\n            "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"300",trigger:"hover",content:"新建报价单时业务员录入的针对检测因子的备注信息"}},[a("svg-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"reference","icon-class":"help"},slot:"reference"})],1),e._v("\n            :\n          ")],1),e._v("\n          "+e._s(e.testResultForm.factorRemark)+"\n        ")]),a("el-form-item",{attrs:{label:"检测结果:"}},[e._l(e.subFactorData,(function(t,r){return a("el-row",{key:r},[a("el-col",{staticStyle:{"text-align":"right","padding-bottom":"5px"},attrs:{span:4}},[e._v("\n              "+e._s(t.name)+":\n            ")]),a("el-col",{staticStyle:{"margin-left":"10px","padding-bottom":"5px"},attrs:{span:9}},[a("el-input",{attrs:{type:"Number","controls-position":"right",min:0,placeholder:"结果值"},model:{value:t.masterRes,callback:function(a){e.$set(t,"masterRes",a)},expression:"item.masterRes"}},[a("template",{slot:"append"},[e._v("E")])],2)],1),a("el-col",{staticStyle:{"margin-left":"10px","padding-bottom":"5px"},attrs:{span:9}},[a("el-input",{attrs:{type:"Number","controls-position":"right",min:0,placeholder:"幂数"},model:{value:t.subRes,callback:function(a){e.$set(t,"subRes",a)},expression:"item.subRes"}},[t.unitName?a("template",{slot:"append"},[e._v(e._s(t.unitName))]):e._e()],2)],1)],1)})),a("el-row",[a("el-col",{staticStyle:{height:"24px","font-size":"14px"},attrs:{span:24}},[a("span",{staticStyle:{color:"red"}},[e._v("例:3.45E2=3.45×10²  ;  234E0=234 ; 1.62E-3=1.62×10⁻³")])])],1),a("el-row",[a("el-col",{staticStyle:{height:"24px","font-size":"14px"},attrs:{span:24}},[a("span",{staticStyle:{color:"red"}},[e._v("无子因子的：输入0代表未检出")])])],1),a("el-row",[a("el-col",{staticStyle:{height:"24px","font-size":"14px"},attrs:{span:24}},[a("span",{staticStyle:{color:"red"}},[e._v("有子因子的：输入0代表未检出，不填代表未检查此项")])])],1)],2),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n            备注\n            "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"300",trigger:"hover",content:"分析员录入结果时录入的备注信息，可流转到实验室负责人和报告部门"}},[a("svg-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"reference","icon-class":"help"},slot:"reference"})],1),e._v("\n            :\n          ")],1),a("el-input",{attrs:{type:"textarea",maxlength:"50","show-word-limit":"",placeholder:"备注信息",rows:3},model:{value:e.testResultForm.remark,callback:function(t){e.$set(e.testResultForm,"remark",t)},expression:"testResultForm.remark"}})],1),a("el-form-item",{attrs:{label:"检测设备:"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"设备分类"},on:{change:e.handleChangeEqu},model:{value:e.equipmentType,callback:function(t){e.equipmentType=t},expression:"equipmentType"}},e._l(e.level,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"170px"},attrs:{clearable:"",placeholder:"请选择设备型号"},on:{change:e.handleChangeEquType},model:{value:e.equipmentClass,callback:function(t){e.equipmentClass=t},expression:"equipmentClass"}},e._l(e.levelTwo,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"170px"},attrs:{clearable:"",placeholder:"请选择设备编号"},model:{value:e.equipmentId,callback:function(t){e.equipmentId=t},expression:"equipmentId"}},e._l(e.levelThree,(function(e){return a("el-option",{key:e.id,attrs:{label:e.equipmentNumber,value:e.id}})})),1)],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.testResultVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmChecks}},[e._v("保存")])],1)])],1)},l=[],s=(a("7f7f"),a("7514"),a("ac6a"),a("db72")),n=a("2f62"),o=a("15d4"),i=a("d43b"),c=a("f564"),u=a("333d"),p={0:"待领样",1:"领样申请",2:"待检测",3:"已录入",4:"待审核",5:"审核通过",6:"审核失败"},m={components:{Pagination:u["a"]},filters:{statusQualityFilter:function(e){return"0"===e||"1"===e||"2"===e||"4"===e?"info":"3"===e?"":"5"===e?"success":"danger"}},props:{checkTaskId:{type:String,default:""}},data:function(){return{CHECK_STATUS:p,checkData:[],searchForm:{smapItemId:"",factorName:"",checkStatus:"",pageNumber:1,pageSize:10},total:0,detailVisible:!1,sampleForm:{factorInfo:{},subFactors:{}},sampleVisible:!1,sampleDetails:[],sampleDetailForm:{factorName:"",factorPoint:"",secdClassName:"",factorDataVos:[],sampleDataVo:{collectDate:"",collectLocation:"",imageList:[],sampleData:[],specialNote:""},sampleJobVo:{projectName:"",jobRemark:""}},testResultVisible:!1,testResultForm:{checkFactorId:"",checkRes:"",checkSubRes:"",remark:""},subFactorData:[],currentSample:"",sampleImageList:[],sampleImage:"",sampleDataInfo:[],sampleSecInfo:[],equipmentType:"",equipmentClass:"",equipmentId:"",level:[],levelTwo:[],levelThree:[]}},computed:Object(s["a"])({},Object(n["b"])(["userId"])),created:function(){this.checkTaskId&&this.checkTaskId.length>0&&(this.searchForm.checkTaskId=this.checkTaskId),this.getEquipment(),this.handleSearch()},methods:{handleSearch:function(){var e=this;this.checkTaskId&&this.checkTaskId.length>0&&o["j"](this.searchForm).then((function(t){200===t.code&&(e.checkData=t.result.records.map((function(t){if(t.checkRes&&""!==t.checkRes){var a=JSON.parse(t.checkRes);e.$set(t,"masterRes",a.v1),e.$set(t,"exponRes",a.v2)}else e.$set(t,"masterRes",0),e.$set(t,"exponRes",0);return t}))||[],e.total=t.result.total)}))},handleDetail:function(e){var t=this;if(this.sampleForm=Object(s["a"])({},e),e.factorSubsetVos&&e.factorSubsetVos.length>0&&this.sampleForm.factorSubsetVos.forEach((function(e){var a=JSON.parse(e.checkSubRes);t.$set(e,"factorInfo",a)})),e.checkRes&&e.checkRes.length>0){var a=JSON.parse(e.checkRes);this.$set(this.sampleForm,"factorInfo",a)}this.detailVisible=!0},getEquipment:function(){var e=this;this.level=[],this.levelTwo=[],this.levelThree=[],Object(c["e"])().then((function(t){if(t.result){var a=t.result?t.result:[];""!==a&&(e.level=a)}}))},handleLocalDetail:function(e){var t=this;this.currentSample=e.sampleNo,this.sampleImageList=[],this.sampleImage="";var a=this.$store.getters.sysBaseUrl+"/cyImg/";i["g"](e.sampItemId).then((function(e){200===e.code&&e.result&&(t.sampleDetailForm=e.result||{},t.$nextTick((function(){t.sampleImageList=e.result.sampleDataVo.imageList.map((function(e){return a+e})),t.sampleSecInfo=e.result.sampleDataVo.sampleData||[],t.sampleDataInfo=e.result.factorDataVos.filter((function(e){return"1"===e.dataEntryStep}))||[]})),t.sampleVisible=!0)}))},goBack:function(){this.$router.back()},handleSetResult:function(e){if(this.testResultForm=Object(s["a"])({},e),this.subFactorData=[],e.factorSubsetVos&&e.factorSubsetVos.length>0)this.subFactorData=e.factorSubsetVos.map((function(e){var t=JSON.parse(e.checkSubRes);return{id:e.id,name:e.factorName,masterRes:t?t.v1:"",subRes:t?t.v2:"",unitName:e.unitName}}));else{var t=JSON.parse(e.checkRes);this.subFactorData=[{name:e.factorName,masterRes:t?t.v1:"",subRes:t?t.v2:"",unitName:e.unitName}]}var a=JSON.parse(e.checkEquipment);a&&(this.equipmentType=a.equipmentName,this.equipmentClass=a.equipmentModel,this.equipmentId=a.id,this.handleChangeEqu(a.equipmentName),this.handleChangeEquType(a.equipmentModel)),this.testResultVisible=!0},handleApprove:function(e){var t=this;this.$confirm("确认提交审核?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o["s"]({checkFactorId:e}).then((function(e){200===e.code?(t.$notify({title:"成功",message:e.message,type:"success"}),t.handleSearch()):t.$notify({title:"失败",message:e.message,type:"error"})}))}))},handleChangeEqu:function(e){this.levelTwo=[],this.levelThree=[];var t=this.level.find((function(t){return t.name===e}));t&&(this.levelTwo=t.children||[])},handleChangeEquType:function(e){this.levelThree=[];var t=this.levelTwo.find((function(t){return t.name===e}));t&&(this.levelThree=t.children||[])},confirmChecks:function(){var e=this;this.$confirm("确认提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t,a=e.levelThree.find((function(t){return t.id===e.equipmentId}));if("0"===e.testResultForm.isFactor){var r={name:e.subFactorData[0].name,v1:e.subFactorData[0].masterRes,v2:e.subFactorData[0].subRes};t={checkFactorId:e.testResultForm.checkFactorId,checkRes:JSON.stringify(r),remark:e.testResultForm.remark,checkEquipment:JSON.stringify(a)}}else{var l=e.subFactorData.map((function(e){var t={name:e.name,v1:e.masterRes,v2:e.subRes};return{id:e.id,unitName:e.unitName,checkSubRes:JSON.stringify(t)}}));t={checkFactorId:e.testResultForm.checkFactorId,checkRes:"",factorSubsetVos:l,remark:e.testResultForm.remark,checkEquipment:JSON.stringify(a)}}o["r"](t).then((function(t){200===t.code?(e.$notify({title:"成功",message:t.message,type:"success"}),e.testResultVisible=!1,e.handleSearch()):e.$notify({title:"失败",message:t.message,type:"error"})}))}))}}},d=m,f=(a("ed0f"),a("2877")),h=Object(f["a"])(d,r,l,!1,null,"375d0bc1",null);t["default"]=h.exports},6506:function(e,t,a){"use strict";a("d5fb")},7514:function(e,t,a){"use strict";var r=a("5ca1"),l=a("0a49")(5),s="find",n=!0;s in[]&&Array(1)[s]((function(){n=!1})),r(r.P+r.F*n,"Array",{find:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},"84c2":function(e,t,a){},"9e6a":function(e,t,a){"use strict";var r=a("d233"),l=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(e,t){for(var a={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,n=t.parameterLimit===1/0?void 0:t.parameterLimit,o=r.split(t.delimiter,n),i=0;i<o.length;++i){var c,u,p=o[i],m=p.indexOf("]="),d=-1===m?p.indexOf("="):m+1;-1===d?(c=t.decoder(p,s.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(p.slice(0,d),s.decoder),u=t.decoder(p.slice(d+1),s.decoder)),l.call(a,c)?a[c]=[].concat(a[c]).concat(u):a[c]=u}return a},o=function(e,t,a){for(var r=t,l=e.length-1;l>=0;--l){var s,n=e[l];if("[]"===n)s=[],s=s.concat(r);else{s=a.plainObjects?Object.create(null):{};var o="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,i=parseInt(o,10);!isNaN(i)&&n!==o&&String(i)===o&&i>=0&&a.parseArrays&&i<=a.arrayLimit?(s=[],s[i]=r):s[o]=r}r=s}return r},i=function(e,t,a){if(e){var r=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,i=s.exec(r),c=i?r.slice(0,i.index):r,u=[];if(c){if(!a.plainObjects&&l.call(Object.prototype,c)&&!a.allowPrototypes)return;u.push(c)}var p=0;while(null!==(i=n.exec(r))&&p<a.depth){if(p+=1,!a.plainObjects&&l.call(Object.prototype,i[1].slice(1,-1))&&!a.allowPrototypes)return;u.push(i[1])}return i&&u.push("["+r.slice(i.index)+"]"),o(u,t,a)}};e.exports=function(e,t){var a=t?r.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!==typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"===typeof a.delimiter||r.isRegExp(a.delimiter)?a.delimiter:s.delimiter,a.depth="number"===typeof a.depth?a.depth:s.depth,a.arrayLimit="number"===typeof a.arrayLimit?a.arrayLimit:s.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"===typeof a.decoder?a.decoder:s.decoder,a.allowDots="boolean"===typeof a.allowDots?a.allowDots:s.allowDots,a.plainObjects="boolean"===typeof a.plainObjects?a.plainObjects:s.plainObjects,a.allowPrototypes="boolean"===typeof a.allowPrototypes?a.allowPrototypes:s.allowPrototypes,a.parameterLimit="number"===typeof a.parameterLimit?a.parameterLimit:s.parameterLimit,a.strictNullHandling="boolean"===typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,""===e||null===e||"undefined"===typeof e)return a.plainObjects?Object.create(null):{};for(var l="string"===typeof e?n(e,a):e,o=a.plainObjects?Object.create(null):{},c=Object.keys(l),u=0;u<c.length;++u){var p=c[u],m=i(p,l[p],a);o=r.merge(o,m,a)}return r.compact(o)}},b313:function(e,t,a){"use strict";var r=String.prototype.replace,l=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,l,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(e,t,a){"use strict";var r=Object.prototype.hasOwnProperty,l=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e){var t;while(e.length){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var r=[],l=0;l<t.length;++l)"undefined"!==typeof t[l]&&r.push(t[l]);a.obj[a.prop]=r}}return t},n=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(a[r]=e[r]);return a},o=function e(t,a,l){if(!a)return t;if("object"!==typeof a){if(Array.isArray(t))t.push(a);else{if("object"!==typeof t)return[t,a];(l.plainObjects||l.allowPrototypes||!r.call(Object.prototype,a))&&(t[a]=!0)}return t}if("object"!==typeof t)return[t].concat(a);var s=t;return Array.isArray(t)&&!Array.isArray(a)&&(s=n(t,l)),Array.isArray(t)&&Array.isArray(a)?(a.forEach((function(a,s){r.call(t,s)?t[s]&&"object"===typeof t[s]?t[s]=e(t[s],a,l):t.push(a):t[s]=a})),t):Object.keys(a).reduce((function(t,s){var n=a[s];return r.call(t,s)?t[s]=e(t[s],n,l):t[s]=n,t}),s)},i=function(e,t){return Object.keys(t).reduce((function(e,a){return e[a]=t[a],e}),e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),a="",r=0;r<t.length;++r){var s=t.charCodeAt(r);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?a+=t.charAt(r):s<128?a+=l[s]:s<2048?a+=l[192|s>>6]+l[128|63&s]:s<55296||s>=57344?a+=l[224|s>>12]+l[128|s>>6&63]+l[128|63&s]:(r+=1,s=65536+((1023&s)<<10|1023&t.charCodeAt(r)),a+=l[240|s>>18]+l[128|s>>12&63]+l[128|s>>6&63]+l[128|63&s])}return a},p=function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],r=0;r<t.length;++r)for(var l=t[r],n=l.obj[l.prop],o=Object.keys(n),i=0;i<o.length;++i){var c=o[i],u=n[c];"object"===typeof u&&null!==u&&-1===a.indexOf(u)&&(t.push({obj:n,prop:c}),a.push(u))}return s(t)},m=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},d=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:n,assign:i,compact:p,decode:c,encode:u,isBuffer:d,isRegExp:m,merge:o}},d43b:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"i",(function(){return s})),a.d(t,"g",(function(){return n})),a.d(t,"h",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return m}));var r=a("b775");function l(e){return Object(r["a"])({url:"/sample/findByCondition",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/sample/getSamplesBySampTaskId",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/sample/getSampleDataBySampItemId/".concat(e),method:"get"})}function o(e){return Object(r["a"])({url:"/sample/getSampleDetailBySampItemId/".concat(e),method:"get"})}function i(e){return Object(r["a"])({url:"/sample/getSampStoreApplyList",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/sample/getSampDrawApplyList",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/sample/doStoreSample",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/sample/doDrawSample",method:"post",data:e})}function m(e){return Object(r["a"])({url:"/sample/batchDoStoreSample",method:"post",data:e})}},d5fb:function(e,t,a){},ed0f:function(e,t,a){"use strict";a("84c2")},f564:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"g",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return u}));var r=a("b775");function l(e){return Object(r["a"])({url:"/equipment/findByCondition",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/equipment/add",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/equipment/updateById",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/equipment/removeById/".concat(e),method:"delete"})}function i(){return Object(r["a"])({url:"/equipment/findEquipmentFirstType",method:"get"})}function c(e){return Object(r["a"])({url:"/equipment/findEquipmentSecondType/".concat(e),method:"get"})}function u(){return Object(r["a"])({url:"/equipment/laboratoryEquipmentTree",method:"get"})}},fdde:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-continer"},[a("el-form",{attrs:{model:e.searchForm,inline:!0}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",[a("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"样品编号"},model:{value:e.searchForm.sampleNo,callback:function(t){e.$set(e.searchForm,"sampleNo",t)},expression:"searchForm.sampleNo"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"因子名称"},model:{value:e.searchForm.factorName,callback:function(t){e.$set(e.searchForm,"factorName",t)},expression:"searchForm.factorName"}})],1),a("el-form-item",[a("el-select",{staticStyle:{width:"165px"},attrs:{clearable:"",filterable:"",placeholder:"检测状态"},model:{value:e.searchForm.checkStatus,callback:function(t){e.$set(e.searchForm,"checkStatus",t)},expression:"searchForm.checkStatus"}},e._l(Object.keys(e.CHECK_STATUS),(function(t){return a("el-option",{key:t,attrs:{label:e.CHECK_STATUS[t],value:t}})})),1)],1),a("el-form-item",[a("el-button",{staticClass:"iconfont icon-chaxun1",attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v(" 查询")]),a("el-button",{staticClass:"iconfont icon-fanhui",attrs:{type:"primary"},on:{click:e.goBack}},[e._v(" 返回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.batchApply}},[e._v("一键申请领样")])],1)],1),a("el-col",{staticClass:"search-right",attrs:{span:4}},[a("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.handleSearch}},[e._v("刷新")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.checkData,stripe:"",border:"","highlight-current-row":"","header-cell-style":{background:"#ECF3FC"}}},[a("template",{slot:"empty"},[a("div",{staticClass:"table_empty"},[a("div",{staticClass:"empty_tips"},[a("span",[e._v("\n            暂无信息\n          ")])])])]),a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{prop:"factorName",label:"检测因子",width:"130px",align:"center"}}),a("el-table-column",{attrs:{prop:"sampleNo",label:"样品编号",width:"160px",align:"center"}}),a("el-table-column",{attrs:{prop:"factorPoint",label:"采样点位",width:"110px",align:"center"}}),a("el-table-column",{attrs:{prop:"dayAndCount",label:"频次(次/天)",width:"120px",align:"center"}}),a("el-table-column",{attrs:{prop:"standardName",label:"检测标准","min-width":"220px",align:"center"}}),a("el-table-column",{attrs:{prop:"checkRes",label:"检测结果","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.checkRes&&r.checkRes.length>0?[e._v("\n          "+e._s(r.masterRes)+"\n          "),""!==r.exponRes&&0!==r.exponRes?[e._v("×10"),a("sup",[e._v(e._s(r.exponRes))])]:e._e(),e._v("\n          "+e._s(r.unitName&&"无量纲"!==r.unitName?" "+r.unitName:"")+"\n        ")]:void 0]}}])}),a("el-table-column",{attrs:{prop:"assignUser",label:"分析员",align:"center"}}),a("el-table-column",{attrs:{prop:"collectTime",label:"采样时间",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.collectTime||a.collectDate?[e._v("\n          "+e._s(a.collectTime&&""!=a.collectTime?(a.collectDate?a.collectDate+" ":"")+a.collectTime:a.collectDate)+"\n        ")]:e._e()]}}])}),a("el-table-column",{attrs:{prop:"storeTime",label:"入库时间",width:"160",align:"center"}}),a("el-table-column",{attrs:{prop:"dataEntryStep",label:"样品归类",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{type:"1"===r.sampleType?"danger":""}},[e._v("\n          "+e._s("1"===r.sampleType?"样品分包":"样品自检")+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"checkStatus",label:"检测状态",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-tag",{attrs:{type:e._f("statusQualityFilter")(r.checkStatus)}},[e._v("\n          "+e._s(e.CHECK_STATUS[r.checkStatus])+"\n        ")])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.checkStatus>2?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(r)}}},[e._v("查看")]):e._e(),r.checkStatus>2?a("div",{staticClass:"erc-divider-vertical"}):e._e(),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleLocalDetail(r)}}},[e._v("采样记录")]),r.assignUserId===e.userId&&"0"===r.checkStatus?a("div",{staticClass:"erc-divider-vertical"}):e._e(),r.assignUserId===e.userId&&"0"===r.checkStatus&&"噪声"!==r.secdClassName?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleApply(r)}}},[e._v("申请领样")]):e._e(),r.assignUserId!==e.userId||"2"!==r.checkStatus&&"6"!==r.checkStatus?e._e():a("div",{staticClass:"erc-divider-vertical"}),r.assignUserId!==e.userId||"2"!==r.checkStatus&&"3"!==r.checkStatus&&"6"!==r.checkStatus?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleSetResult(r)}}},[e._v("结果录入")]),r.assignUserId===e.userId&&"3"===r.checkStatus?a("div",{staticClass:"erc-divider-vertical"}):e._e(),r.assignUserId===e.userId&&"3"===r.checkStatus?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleApprove(r.checkFactorId)}}},[e._v("提交审核")]):e._e()]}}])})],2),a("div",{staticStyle:{float:"right"}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.searchForm.pageNumber,limit:e.searchForm.pageSize},on:{"update:page":function(t){return e.$set(e.searchForm,"pageNumber",t)},"update:limit":function(t){return e.$set(e.searchForm,"pageSize",t)},pagination:e.handleSearch}})],1),a("el-dialog",{attrs:{title:"检测详情",visible:e.detailVisible,width:"70%",center:"",top:"5vh"},on:{"update:visible":function(t){e.detailVisible=t}}},[a("div",{staticStyle:{width:"700px",margin:"0 auto"}},[a("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"样品编号:"}},[e._v(e._s(e.sampleForm.sampleNo))]),a("el-form-item",{attrs:{label:"检测因子:"}},[e._v(e._s(e.sampleForm.factorName))]),a("el-form-item",{attrs:{label:"检测标准:"}},[e._v(e._s(e.sampleForm.standardName))]),a("el-form-item",{attrs:{label:"因子备注:"}},[e._v(e._s(e.sampleForm.factorRemark))]),a("el-form-item",{attrs:{label:"检测备注:"}},[e._v(e._s(e.sampleForm.remark))]),a("el-form-item",{attrs:{label:"检测结果:"}},[e.sampleForm.factorSubsetVos&&e.sampleForm.factorSubsetVos.length>0?[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sampleForm.factorSubsetVos,border:"","header-cell-style":{background:"#ECF3FC"}}},[a("el-table-column",{attrs:{prop:"factorName",label:"套餐因子",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"检测结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n                  "+e._s(r.factorInfo&&r.factorInfo.v1?r.factorInfo.v1:0)+"\n                  "),r.factorInfo&&""!==r.factorInfo.v2&&0!==r.factorInfo.v2?[e._v("\n                    ×10"),a("sup",[e._v(e._s(r.factorInfo.v2?Number(r.factorInfo.v2):0))])]:e._e(),e._v("\n                  "+e._s(r.unitName&&"无量纲"!==r.unitName&&null!=e.sampleForm.unitName?" "+r.unitName:"")+"\n                ")]}}],null,!1,74595198)})],1)]:e.sampleForm.checkRes&&e.sampleForm.checkRes.length>0?[e._v("\n            "+e._s(e.sampleForm.factorInfo&&e.sampleForm.factorInfo.v1?e.sampleForm.factorInfo.v1:0)+"\n            "),e.sampleForm.factorInfo&&""!==e.sampleForm.factorInfo.v2&&0!==e.sampleForm.factorInfo.v2?[e._v("\n              ×10"),a("sup",[e._v(e._s(e.sampleForm.factorInfo.v2?Number(e.sampleForm.factorInfo.v2):0))])]:e._e(),e._v("\n            "+e._s(e.sampleForm.unitName&&"无量纲"!==e.sampleForm.unitName&&null!=e.sampleForm.unitName?" "+e.sampleForm.unitName:"")+"\n          ")]:[e._v("暂无检测结果")]],2)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detailVisible=!1}}},[e._v("关 闭")])],1)]),a("el-dialog",{attrs:{title:"样品结果录入",visible:e.testResultVisible,width:"70%",center:"",top:"5vh"},on:{"update:visible":function(t){e.testResultVisible=t}}},[a("div",{staticStyle:{width:"700px",margin:"0 auto"}},[a("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"样品编号:"}},[e._v(e._s(e.testResultForm.sampleNo))]),a("el-form-item",{attrs:{label:"检测因子:"}},[e._v(e._s(e.testResultForm.factorName))]),a("el-form-item",{attrs:{label:"检测标准:"}},[e._v(e._s(e.testResultForm.standardName))]),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n            备注信息\n            "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"300",trigger:"hover",content:"新建报价单时业务员录入的针对检测因子的备注信息"}},[a("svg-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"reference","icon-class":"help"},slot:"reference"})],1),e._v("\n            :\n          ")],1),e._v("\n          "+e._s(e.testResultForm.factorRemark)+"\n        ")]),a("el-form-item",{attrs:{label:"检测结果:"}},[e._l(e.subFactorData,(function(t,r){return a("el-row",{key:r},[a("el-col",{staticStyle:{"text-align":"right","padding-bottom":"5px"},attrs:{span:4}},[e._v("\n              "+e._s(t.name)+":\n            ")]),a("el-col",{staticStyle:{"margin-left":"10px","padding-bottom":"5px"},attrs:{span:9}},[a("el-input",{attrs:{type:"Number","controls-position":"right",min:0,placeholder:"结果值"},model:{value:t.masterRes,callback:function(a){e.$set(t,"masterRes",a)},expression:"item.masterRes"}},[a("template",{slot:"append"},[e._v("E")])],2)],1),a("el-col",{staticStyle:{"margin-left":"10px","padding-bottom":"5px"},attrs:{span:9}},[a("el-input",{attrs:{type:"Number","controls-position":"right",min:0,placeholder:"幂数"},model:{value:t.subRes,callback:function(a){e.$set(t,"subRes",a)},expression:"item.subRes"}},[t.unitName?a("template",{slot:"append"},[e._v(e._s(t.unitName))]):e._e()],2)],1)],1)})),a("el-row",[a("el-col",{staticStyle:{height:"24px","font-size":"14px"},attrs:{span:24}},[a("span",{staticStyle:{color:"red"}},[e._v("例:3.45E2=3.45×10²  ;  234E0=234 ; 1.62E-3=1.62×10⁻³")])])],1),a("el-row",[a("el-col",{staticStyle:{height:"24px","font-size":"14px"},attrs:{span:24}},[a("span",{staticStyle:{color:"red"}},[e._v("无子因子的：输入0代表未检出")])])],1),a("el-row",[a("el-col",{staticStyle:{height:"24px","font-size":"14px"},attrs:{span:24}},[a("span",{staticStyle:{color:"red"}},[e._v("有子因子的：输入0代表未检出，不填代表未检查此项")])])],1)],2),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n            备注\n            "),a("el-popover",{attrs:{placement:"top-start",title:"",width:"300",trigger:"hover",content:"分析员录入结果时录入的备注信息，可流转到实验室负责人和报告部门"}},[a("svg-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"reference","icon-class":"help"},slot:"reference"})],1),e._v("\n            :\n          ")],1),a("el-input",{attrs:{type:"textarea",maxlength:"50","show-word-limit":"",placeholder:"备注信息",rows:3},model:{value:e.testResultForm.remark,callback:function(t){e.$set(e.testResultForm,"remark",t)},expression:"testResultForm.remark"}})],1),a("el-form-item",{attrs:{label:"检测设备:"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"设备分类"},on:{change:e.handleChangeEqu},model:{value:e.equipmentType,callback:function(t){e.equipmentType=t},expression:"equipmentType"}},e._l(e.level,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"170px"},attrs:{clearable:"",placeholder:"请选择设备型号"},on:{change:e.handleChangeEquType},model:{value:e.equipmentClass,callback:function(t){e.equipmentClass=t},expression:"equipmentClass"}},e._l(e.levelTwo,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"170px"},attrs:{clearable:"",placeholder:"请选择设备编号"},model:{value:e.equipmentId,callback:function(t){e.equipmentId=t},expression:"equipmentId"}},e._l(e.levelThree,(function(e){return a("el-option",{key:e.id,attrs:{label:e.equipmentNumber,value:e.id}})})),1)],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.testResultVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmChecks}},[e._v("保存")])],1)]),a("el-dialog",{attrs:{title:e.currentSample+"-详情",visible:e.sampleVisible,width:"85%",center:"",top:"5vh"},on:{"update:visible":function(t){e.sampleVisible=t}}},[a("el-form",{attrs:{model:e.sampleDetailForm,"label-width":"180px","label-position":"right"}},[a("el-card",{staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v("基础信息")])]),a("el-col",{staticStyle:{height:"32px"},attrs:{span:16}},[a("el-form-item",{attrs:{"label-width":"100",label:"检测因子:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.factorName))])])],1),a("el-col",{staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100",label:"点位:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.factorPoint))])])],1)],1),e._l(e.sampleSecInfo,(function(t){return a("el-card",{key:t.groupKey,staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[t.groupName&&""!=t.groupName?a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v(e._s(t.groupName))])]):e._e(),e._l(t.params,(function(t,r){return a("el-col",{key:r,staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.name)+":")]),a("span",{staticClass:"showTile"},[e._v(e._s(t.value?t.value.toString():""))])])],1)}))],2)})),e.sampleDataInfo&&e.sampleDataInfo.length>0?a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v("现场检测因子信息")])]),a("el-table",{attrs:{data:e.sampleDataInfo,stripe:""}},[a("el-table-column",{attrs:{prop:"factorName",label:"检测因子项目"}}),a("el-table-column",{attrs:{label:"因子结果集"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.measuredForm?[e._v("\n                "+e._s("第一值: "+a.measuredForm.firstVal+" 第二值: "+a.measuredForm.secondVal+" 均值: "+a.measuredForm.avgVal)+"\n              ")]:[e._v("\n                "+e._s(a.factorData?a.factorData:"")+"\n              ")]]}}],null,!1,3613769334)}),a("el-table-column",{attrs:{prop:"checkEquipment",label:"检测设备"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n              "+e._s(a.checkEquipment&&a.checkEquipment.length>0?a.checkEquipment.replaceAll("^_^"," "):"")+"\n            ")]}}],null,!1,2289891611)}),a("el-table-column",{attrs:{prop:"theoreticalVal",label:"理论值"}}),a("el-table-column",{attrs:{prop:"groundConditions",label:"测定值"}})],1)],1):e._e(),a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[e._v("现场信息")])]),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样地址:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.sampleDataVo.collectLocation))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样日期:"}},[a("span",{staticClass:"showTile"},[e._v(e._s(e.sampleDetailForm.sampleDataVo.collectDate))])])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{"label-width":"100",label:"现场图片:"}},[e.sampleImageList&&e.sampleImageList.length>0?a("div",{staticClass:"demo-image__lazy"},e._l(e.sampleImageList,(function(t,r){return a("el-image",{key:r,staticStyle:{width:"100px",height:"100px","margin-left":"10px"},attrs:{src:t,"preview-src-list":e.sampleImageList}})})),1):e._e()])],1)],1)],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.sampleVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},l=[],s=(a("7f7f"),a("7514"),a("6b54"),a("ac6a"),a("db72")),n=a("2f62"),o=a("d43b"),i=a("15d4"),c=a("f564"),u=a("333d"),p=a("4328"),m=a.n(p),d={0:"待领样",1:"领样已申请",2:"待检测",6:"审核失败"},f={components:{Pagination:u["a"]},filters:{statusQualityFilter:function(e){return"0"===e?"info":"2"===e||"1"===e||"4"===e?"":"3"===e||"5"===e?"success":"danger"}},props:{checkTaskId:{type:String,default:""}},data:function(){return{props:{multiple:!0},CHECK_STATUS:d,checkData:[],searchForm:{checkTaskId:"",sampleNo:"",factorName:"",checkStatus:"",pageNumber:1,pageSize:10},total:0,detailVisible:!1,sampleForm:{factorInfo:{},subFactors:{}},subSampleData:[],testResultVisible:!1,testResultForm:{checkFactorId:"",checkRes:"",checkSubRes:"",remark:""},subFactorData:[],sampleVisible:!1,sampleDetails:[],sampleDetailForm:{factorName:"",factorPoint:"",secdClassName:"",factorDataVos:[],sampleDataVo:{collectDate:"",collectLocation:"",imageList:[],sampleData:[],specialNote:""},sampleJobVo:{projectName:"",jobRemark:""}},currentSample:"",sampleImageList:[],sampleImage:"",multipleSelection:[],level:[],levelTwo:[],levelThree:[],equipmentType:"",equipmentClass:"",equipmentId:"",sampleDataInfo:[],sampleSecInfo:[]}},computed:Object(s["a"])({},Object(n["b"])(["userId"])),created:function(){this.checkTaskId&&this.checkTaskId.length>0&&(this.searchForm.checkTaskId=this.checkTaskId),this.getEquipment(),this.handleSearch()},methods:{handleSearch:function(){var e=this;this.checkTaskId&&this.checkTaskId.length>0&&i["i"](this.searchForm).then((function(t){200===t.code&&(e.checkData=t.result.records.map((function(t){if(t.checkRes&&""!==t.checkRes){var a=JSON.parse(t.checkRes);e.$set(t,"masterRes",a.v1?a.v1:""),e.$set(t,"exponRes",a.v2?a.v2:"")}else e.$set(t,"masterRes",""),e.$set(t,"exponRes","");return t}))||[],e.total=t.result.total)}))},handleDetail:function(e){var t=this;if(this.sampleForm=Object(s["a"])({},e),e.factorSubsetVos&&e.factorSubsetVos.length>0&&this.sampleForm.factorSubsetVos.forEach((function(e){var a=JSON.parse(e.checkSubRes);t.$set(e,"factorInfo",a)})),e.checkRes&&e.checkRes.length>0){var a=JSON.parse(e.checkRes);this.$set(this.sampleForm,"factorInfo",a)}this.detailVisible=!0},handleLocalDetail:function(e){var t=this;this.currentSample=e.sampleNo,this.sampleImageList=[],this.sampleDataInfo=[],this.sampleSecInfo=[],this.sampleImage="";var a=this.$store.getters.sysBaseUrl+"/cyImg/";o["g"](e.sampItemId).then((function(e){200===e.code&&e.result&&(t.sampleDetailForm=e.result||{},t.$nextTick((function(){t.sampleImageList=e.result.sampleDataVo.imageList.map((function(e){return a+e})),t.sampleSecInfo=e.result.sampleDataVo.sampleData||[];var r=e.result.factorDataVos.filter((function(e){return"1"===e.dataEntryStep}))||[];t.sampleDataInfo=r.map((function(e){return e.measuredFormVal&&e.measuredFormVal.length>0&&t.$set(e,"measuredForm",JSON.parse(e.measuredFormVal)),e}))})),t.sampleVisible=!0)}))},handleSelectionChange:function(e){this.multipleSelection=e},batchApply:function(){var e=this,t=this.checkData.filter((function(e){return"0"===e.checkStatus}));t&&0!==t.length?this.$confirm("确定批量申请领样?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.map((function(e){return e.checkFactorId}));i["d"](m.a.stringify({checkFactorId:a.toString()})).then((function(t){200===t.code?(e.$notify({title:"成功",message:t.message,type:"success"}),e.handleSearch()):e.$notify({title:"失败",message:t.message,type:"error"})}))})):this.$message.error("当前样品不需要领样操作!")},handleApply:function(e){var t=this;this.$confirm("确定申请领样?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["q"](m.a.stringify({checkFactorId:e.checkFactorId})).then((function(e){200===e.code?(t.$notify({title:"成功",message:e.message,type:"success"}),t.handleSearch()):t.$notify({title:"失败",message:e.message,type:"error"})}))})).catch((function(){}))},handleSetResult:function(e){this.testResultForm=Object(s["a"])({},e),this.subFactorData=[],e.factorSubsetVos&&e.factorSubsetVos.length>0?this.subFactorData=e.factorSubsetVos.map((function(e){return{id:e.id,name:e.factorName,masterRes:"",subRes:"",unitName:e.unitName}})):this.subFactorData=[{name:e.factorName,masterRes:"",subRes:"",unitName:e.unitName}],this.testResultVisible=!0},handleApprove:function(e){var t=this;this.$confirm("确认提交审核?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["s"]({checkFactorId:e}).then((function(e){200===e.code?(t.$notify({title:"成功",message:e.message,type:"success"}),t.handleSearch()):t.$notify({title:"失败",message:e.message,type:"error"})}))}))},confirmChecks:function(){var e=this;this.$confirm("确认提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t,a=e.levelThree.find((function(t){return t.id===e.equipmentId}));if("0"===e.testResultForm.isFactor){var r={name:e.subFactorData[0].name,v1:e.subFactorData[0].masterRes,v2:e.subFactorData[0].subRes};t={checkFactorId:e.testResultForm.checkFactorId,checkRes:JSON.stringify(r),remark:e.testResultForm.remark,checkEquipment:JSON.stringify(a)}}else{var l=e.subFactorData.map((function(e){var t={name:e.name,v1:e.masterRes,v2:e.subRes};return{id:e.id,unitName:e.unitName,checkSubRes:JSON.stringify(t)}}));t={checkFactorId:e.testResultForm.checkFactorId,checkRes:"",factorSubsetVos:l,remark:e.testResultForm.remark,checkEquipment:JSON.stringify(a)}}i["r"](t).then((function(t){200===t.code?(e.$notify({title:"成功",message:t.message,type:"success"}),e.testResultVisible=!1,e.handleSearch()):e.$notify({title:"失败",message:t.message,type:"error"})}))}))},goBack:function(){this.$router.back()},getEquipment:function(){var e=this;this.level=[],this.levelTwo=[],this.levelThree=[],Object(c["e"])().then((function(t){if(t.result){var a=t.result?t.result:[];""!==a&&(e.level=a)}}))},handleChangeEqu:function(e){this.levelTwo=[],this.levelThree=[];var t=this.level.find((function(t){return t.name===e}));t&&(this.levelTwo=t.children||[])},handleChangeEquType:function(e){this.levelThree=[];var t=this.levelTwo.find((function(t){return t.name===e}));t&&(this.levelThree=t.children||[])}}},h=f,b=(a("6506"),a("2877")),v=Object(b["a"])(h,r,l,!1,null,"18b43c20",null);t["default"]=v.exports}}]);