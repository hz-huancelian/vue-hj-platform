(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a585c67"],{"068f":function(t,e,a){"use strict";a("a933")},"06d8":function(t,e,a){},"44fb":function(t,e,a){"use strict";a("06d8")},"47bc":function(t,e,a){"use strict";a.d(e,"k",(function(){return r})),a.d(e,"p",(function(){return n})),a.d(e,"x",(function(){return o})),a.d(e,"r",(function(){return s})),a.d(e,"n",(function(){return i})),a.d(e,"g",(function(){return c})),a.d(e,"b",(function(){return p})),a.d(e,"h",(function(){return m})),a.d(e,"c",(function(){return u})),a.d(e,"u",(function(){return d})),a.d(e,"j",(function(){return h})),a.d(e,"m",(function(){return f})),a.d(e,"v",(function(){return b})),a.d(e,"i",(function(){return g})),a.d(e,"l",(function(){return v})),a.d(e,"s",(function(){return y})),a.d(e,"t",(function(){return S})),a.d(e,"q",(function(){return I})),a.d(e,"o",(function(){return k})),a.d(e,"D",(function(){return x})),a.d(e,"B",(function(){return w})),a.d(e,"w",(function(){return _})),a.d(e,"z",(function(){return F})),a.d(e,"G",(function(){return D})),a.d(e,"f",(function(){return T})),a.d(e,"e",(function(){return C})),a.d(e,"a",(function(){return V})),a.d(e,"A",(function(){return j})),a.d(e,"F",(function(){return A})),a.d(e,"y",(function(){return O}));var l=a("b775");function r(t){return Object(l["a"])({url:"/sampTask/findByCondition",method:"get",params:t})}function n(t){return Object(l["a"])({url:"/sampTask/findHistoryByCondition",method:"get",params:t})}function o(t){return Object(l["a"])({url:"/sampTask/getOfferFactorsByTaskId/".concat(t),method:"get"})}function s(t){return Object(l["a"])({url:"/sampItem/findByCondition",method:"get",params:t})}function i(t){return Object(l["a"])({url:"/sampItem/findHistoryByCondition",method:"get",params:t})}function c(t){return Object(l["a"])({url:"/sampItem/doAuditSampItemForLeader",method:"post",data:t})}function p(t){return Object(l["a"])({url:"/sampItem/batchDoAuditSampItemForLeader",method:"post",data:t})}function m(t){return Object(l["a"])({url:"/sampItem/doAuditSampItemForManager",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/sampItem/batchDoAuditSampItemForManager",method:"post",data:t})}function d(t){return Object(l["a"])({url:"/sampItem/findSampTaskForManagerByCondition",method:"get",params:t})}function h(t){return Object(l["a"])({url:"/sampItem/findAuditSampItemForManageByCondition",method:"get",params:t})}function f(t){return Object(l["a"])({url:"/sampItem/findHisAuditSampItemForManageByCondition",method:"get",params:t})}function b(t){return Object(l["a"])({url:"/sampItem/findSampleTaskForLeaderByCondition",method:"get",params:t})}function g(t){return Object(l["a"])({url:"/sampItem/findAuditSampItemForLeaderByCondition",method:"get",params:t})}function v(t){return Object(l["a"])({url:"/sampItem/findHisAuditSampItemForLeaderByCondition",method:"get",params:t})}function y(t){return Object(l["a"])({url:"/sampTask/findSampTaskByCondition",method:"get",params:t})}function S(t){return Object(l["a"])({url:"/sampTask/findSampTaskDetailByCondition",method:"get",params:t})}function I(t){return Object(l["a"])({url:"/sampTask/findByCondition",method:"get",params:t})}function k(t){return Object(l["a"])({url:"/sampTask/findHistoryByCondition",method:"get",params:t})}function x(t){return Object(l["a"])({url:"/sampTask/getZjJobFactorsByJobId",method:"get",params:t})}function w(t){return Object(l["a"])({url:"/sampTask/getWbJobFactorsByJobId",method:"get",params:t})}function _(t){return Object(l["a"])({url:"/sampTask/getJobFactorsByJobId/".concat(t),method:"get"})}function F(t){return Object(l["a"])({url:"/sampTask/getSampleListByCondition",method:"get",params:t})}function D(t){return Object(l["a"])({url:"/sampTask/saveSampleList",headers:{"Content-Type":"application/json"},method:"post",data:t})}function T(t){return Object(l["a"])({url:"/sampTask/deleteSampleListById/".concat(t),method:"delete"})}function C(t){return Object(l["a"])({url:"/sampTask/confirmSampleList",method:"post",data:t})}function V(t){return Object(l["a"])({url:"/sampTask/assignFactorPoint",method:"post",data:t})}function j(t){return Object(l["a"])({url:"/sampTask/getSampleTaskPointBySampTaskId/".concat(t),method:"get"})}function A(t){return Object(l["a"])({url:"/sampTask/saveCombinedRemark",method:"post",data:t})}function O(t){return Object(l["a"])({url:"/sampTask/getSampleItemBySampTaskId",method:"get",params:t})}},"4a53":function(t,e,a){"use strict";a("cc83")},5620:function(t,e,a){},"68de":function(t,e,a){"use strict";a("8d95")},"69e5":function(t,e,a){},"8d95":function(t,e,a){},a1b9:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"待审核样品",name:"1"}},[a("approve-list",{attrs:{"samp-task-id":t.sampTaskId}})],1),a("el-tab-pane",{attrs:{label:"已审核样品",name:"2"}},[a("approve-his-list",{attrs:{"samp-task-id":t.sampTaskId}})],1)],1)],1)},r=[],n=a("cb3b"),o=a("df9b"),s={components:{ApproveList:n["default"],ApproveHisList:o["default"]},data:function(){return{activeName:"1",sampTaskId:""}},created:function(){this.$route.params.sampTaskId&&(this.sampTaskId=this.$route.params.sampTaskId)},methods:{handleClick:function(){}}},i=s,c=a("2877"),p=Object(c["a"])(i,l,r,!1,null,null,null);e["default"]=p.exports},a73e:function(t,e,a){"use strict";a("5620")},a933:function(t,e,a){},ba013:function(t,e,a){"use strict";a("69e5")},cb3b:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{model:t.searchForm,inline:!0}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"样品编号:"}},[a("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"样品编号"},model:{value:t.searchForm.sampItemId,callback:function(e){t.$set(t.searchForm,"sampItemId",e)},expression:"searchForm.sampItemId"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v(" 查询")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleBatchApprove}},[t._v("批量审核")]),a("el-button",{attrs:{type:""},on:{click:t.goBack}},[t._v("返回")])],1)],1),a("el-col",{staticClass:"search-right",attrs:{span:4}},[a("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:t.handleSearch}},[t._v("刷新")])],1)],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.sampleData,"highlight-current-row":"","header-cell-style":{background:"#ECF3FC"}},on:{"selection-change":t.handleSelectionChange}},[a("template",{slot:"empty"},[a("div",{staticClass:"table_empty"},[a("div",{staticClass:"empty_tips"},[a("span",[t._v("\n              暂无审核信息\n            ")])])])]),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{type:"index",width:"55",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"sampleNo",label:"样品编号","min-width":"140px",align:"center"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",align:"center","min-width":"140px"}}),a("el-table-column",{attrs:{prop:"inspectionName",label:"受检单位",align:"center"}}),a("el-table-column",{attrs:{prop:"collectUser",label:"采样人",width:"190px",align:"center"}}),a("el-table-column",{attrs:{prop:"reviewUser",label:"复核人",width:"190px",align:"center"}}),a("el-table-column",{attrs:{prop:"factorPoint",label:"采样点位",align:"center"}}),a("el-table-column",{attrs:{prop:"secdClassName",label:"检测类别",width:"120px",align:"center"}}),a("el-table-column",{attrs:{prop:"finishTime",label:"采样登记时间",width:"190px",align:"center"}}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v(" 查看")]),a("div",{staticClass:"erc-divider-vertical"}),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleApprove(e.row)}}},[t._v("审核")])]}}])})],2)],1),a("div",{staticStyle:{float:"right"}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.searchForm.pageNumber,limit:t.searchForm.pageSize},on:{"update:page":function(e){return t.$set(t.searchForm,"pageNumber",e)},"update:limit":function(e){return t.$set(t.searchForm,"pageSize",e)},pagination:t.handleSearch}})],1),a("el-dialog",{attrs:{title:t.currentSample+"-详情",visible:t.sampleVisible,width:"85%",center:"",top:"5vh"},on:{"update:visible":function(e){t.sampleVisible=e}}},[a("el-form",{attrs:{model:t.sampleDetailForm,"label-width":"180px","label-position":"right"}},[a("el-card",{staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v("基础信息")])]),a("el-col",{staticStyle:{height:"32px"},attrs:{span:16}},[a("el-form-item",{attrs:{"label-width":"100",label:"检测因子:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.factorName))])])],1),a("el-col",{staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100",label:"点位:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.factorPoint))])])],1)],1),t._l(t.sampleSecInfo,(function(e){return a("el-card",{key:e.groupKey,staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[e.groupName&&""!=e.groupName?a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v(t._s(e.groupName))])]):t._e(),t._l(e.params,(function(e,l){return a("el-col",{key:l,staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.name)+":")]),a("span",{staticClass:"showTile"},[t._v(t._s(e.value?e.value.toString():""))])])],1)}))],2)})),t.sampleDataInfo&&t.sampleDataInfo.length>0?a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v("现场检测因子信息")])]),a("el-table",{attrs:{data:t.sampleDataInfo,stripe:""}},[a("el-table-column",{attrs:{prop:"factorName",label:"检测因子项目"}}),a("el-table-column",{attrs:{label:"因子结果集"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.measuredForm?[t._v("\n                "+t._s("第一值: "+a.measuredForm.firstVal+" 第二值: "+a.measuredForm.secondVal+" 均值: "+a.measuredForm.avgVal)+"\n              ")]:[t._v("\n                "+t._s(a.factorData?a.factorData:"")+"\n              ")]]}}],null,!1,3613769334)}),a("el-table-column",{attrs:{prop:"checkEquipment",label:"检测设备"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n              "+t._s(a.checkEquipment&&a.checkEquipment.length>0?a.checkEquipment.replaceAll("^_^"," "):"")+"\n            ")]}}],null,!1,2289891611)}),a("el-table-column",{attrs:{prop:"theoreticalVal",label:"理论值"}}),a("el-table-column",{attrs:{prop:"groundConditions",label:"测定值"}})],1)],1):t._e(),a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v("现场信息")])]),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样地址:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.sampleDataVo.collectLocation))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样日期:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.sampleDataVo.collectDate))])])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{"label-width":"100",label:"现场图片:"}},[t.sampleImageList&&t.sampleImageList.length>0?a("div",{staticClass:"demo-image__lazy"},t._l(t.sampleImageList,(function(e,l){return a("el-image",{key:l,staticStyle:{width:"100px",height:"100px","margin-left":"10px"},attrs:{src:e,"preview-src-list":t.sampleImageList}})})),1):t._e()])],1)],1)],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.sampleVisible=!1}}},[t._v("关 闭")])],1)],1),a("el-dialog",{attrs:{title:t.showTitle,visible:t.approveVisible,center:""},on:{"update:visible":function(e){t.approveVisible=e}}},[a("div",{staticStyle:{width:"400px",margin:"0 auto"}},[a("el-form",{attrs:{model:t.approveForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核结果:"}},[a("el-radio-group",{model:{value:t.approveForm.auditFlag,callback:function(e){t.$set(t.approveForm,"auditFlag",e)},expression:"approveForm.auditFlag"}},[a("el-radio",{attrs:{label:"1"}},[t._v("通过")]),a("el-radio",{attrs:{label:"2"}},[t._v("驳回")])],1)],1),"2"===t.approveForm.auditFlag?a("el-form-item",{attrs:{label:"审核意见:"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxlength:"50","show-word-limit":"",placeholder:"审核意见"},model:{value:t.approveForm.auditReason,callback:function(e){t.$set(t.approveForm,"auditReason",e)},expression:"approveForm.auditReason"}})],1):t._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.approveVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmDialog}},[t._v("确认")])],1)]),a("el-dialog",{attrs:{title:t.showTitle,visible:t.batchApproveVisible,center:""},on:{"update:visible":function(e){t.batchApproveVisible=e}}},[a("div",{staticStyle:{width:"400px",margin:"0 auto"}},[a("el-form",{attrs:{model:t.batchApprove,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核结果:"}},[a("el-radio-group",{model:{value:t.batchApprove.auditFlag,callback:function(e){t.$set(t.batchApprove,"auditFlag",e)},expression:"batchApprove.auditFlag"}},[a("el-radio",{attrs:{label:"1"}},[t._v("通过")]),a("el-radio",{attrs:{label:"2"}},[t._v("驳回")])],1)],1),"2"===t.batchApprove.auditFlag?a("el-form-item",{attrs:{label:"审核意见:"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxlength:"50","show-word-limit":"",placeholder:"审核意见"},model:{value:t.batchApprove.auditReason,callback:function(e){t.$set(t.batchApprove,"auditReason",e)},expression:"batchApprove.auditReason"}})],1):t._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.batchApproveVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.batchConfirmDialog}},[t._v("确认")])],1)])],1)},r=[],n=(a("6b54"),a("47bc")),o=a("d43b"),s=a("333d"),i={0:"草稿",1:"待审核",2:"审核驳回",3:"审核通过"},c={name:"SampleApprove",components:{Pagination:s["a"]},filters:{statusQualityFilter:function(t){var e={0:"info",1:"",2:"danger",3:"success"};return e[t]}},props:{sampTaskId:{type:String,default:""}},data:function(){return{ACCOUNT_STATUS:i,sampleData:[],searchForm:{jobId:"",sampItemId:"",pageNumber:1,pageSize:10},total:0,approveVisible:!1,sampleVisible:!1,sampleDetailForm:{factorName:"",factorPoint:"",secdClassName:"",factorDataVos:[],sampleDataVo:{collectDate:"",collectLocation:"",imageList:[],sampleData:[],specialNote:""},sampleJobVo:{projectName:"",jobRemark:""}},currentSample:"",approveForm:{sampItemId:"",auditFlag:"1",auditReason:""},sampleImage:"",sampleImageList:[],showTitle:"",sampleDetails:[],multipleSelection:[],batchApproveVisible:!1,batchApprove:{sampItemId:"",auditFlag:"1",auditReason:""},sampleDataInfo:[],sampleSecInfo:[]}},created:function(){this.searchForm.sampTaskId=this.sampTaskId,this.handleSearch()},methods:{handleSearch:function(){var t=this;n["j"](this.searchForm).then((function(e){200===e.code&&(t.sampleData=e.result.records,t.total=e.result.total)}))},handleDetail:function(t){var e=this;this.currentSample=t.sampleNo,this.sampleImageList=[],this.sampleDataInfo=[],this.sampleSecInfo=[],this.sampleImage="";var a=this.$store.getters.sysBaseUrl+"/cyImg/";o["g"](t.sampItemId).then((function(t){200===t.code&&t.result&&(e.sampleDetailForm=t.result||{},e.$nextTick((function(){e.sampleImageList=t.result.sampleDataVo.imageList.map((function(t){return a+t})),e.sampleSecInfo=t.result.sampleDataVo.sampleData||[];var l=t.result.factorDataVos.filter((function(t){return"1"===t.dataEntryStep}))||[];e.sampleDataInfo=l.map((function(t){return t.measuredFormVal&&t.measuredFormVal.length>0&&e.$set(t,"measuredForm",JSON.parse(t.measuredFormVal)),t}))})),e.sampleVisible=!0)}))},handleApprove:function(t){this.approveForm.sampItemId=t.sampItemId,this.approveForm.auditFlag="1",this.approveForm.auditReason="",this.showTitle="样品审核",this.approveVisible=!0},handleBatchApprove:function(){if(this.multipleSelection&&this.multipleSelection.length>0){var t=this.multipleSelection.map((function(t){return t.sampItemId}));this.batchApprove.sampItemId=t.toString(),this.batchApprove.auditFlag="1",this.batchApprove.auditReason="",this.showTitle="样品审核",this.batchApproveVisible=!0}else this.$message.warning("至少选择一个任务进行审核")},handleSelectionChange:function(t){this.multipleSelection=t},batchConfirmDialog:function(){var t=this;this.$confirm("确定提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["c"](t.batchApprove).then((function(e){200===e.code?(t.$notify({title:"成功",message:e.message,type:"success"}),t.batchApproveVisible=!1,t.handleSearch()):t.$notify({title:"失败",message:e.message,type:"error"})}))})).catch((function(){}))},confirmDialog:function(){var t=this;this.$confirm("确定提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["h"](t.approveForm).then((function(e){200===e.code?(t.$notify({title:"成功",message:e.message,type:"success"}),t.approveVisible=!1,t.handleSearch()):t.$notify({title:"失败",message:e.message,type:"error"})}))})).catch((function(){}))},goBack:function(){this.$router.back()}}},p=c,m=(a("a73e"),a("4a53"),a("068f"),a("2877")),u=Object(m["a"])(p,l,r,!1,null,"3b4ae6cf",null);e["default"]=u.exports},cc83:function(t,e,a){},d43b:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"i",(function(){return n})),a.d(e,"g",(function(){return o})),a.d(e,"h",(function(){return s})),a.d(e,"f",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return p})),a.d(e,"b",(function(){return m})),a.d(e,"a",(function(){return u}));var l=a("b775");function r(t){return Object(l["a"])({url:"/sample/findByCondition",method:"get",params:t})}function n(t){return Object(l["a"])({url:"/sample/getSamplesBySampTaskId",method:"get",params:t})}function o(t){return Object(l["a"])({url:"/sample/getSampleDataBySampItemId/".concat(t),method:"get"})}function s(t){return Object(l["a"])({url:"/sample/getSampleDetailBySampItemId/".concat(t),method:"get"})}function i(t){return Object(l["a"])({url:"/sample/getSampStoreApplyList",method:"get",params:t})}function c(t){return Object(l["a"])({url:"/sample/getSampDrawApplyList",method:"get",params:t})}function p(t){return Object(l["a"])({url:"/sample/doStoreSample",method:"post",data:t})}function m(t){return Object(l["a"])({url:"/sample/doDrawSample",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/sample/batchDoStoreSample",method:"post",data:t})}},df9b:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{model:t.searchForm,inline:!0}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"样品编号:"}},[a("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"样品编号"},model:{value:t.searchForm.sampItemId,callback:function(e){t.$set(t.searchForm,"sampItemId",e)},expression:"searchForm.sampItemId"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v(" 查询")]),a("el-button",{attrs:{type:""},on:{click:t.goBack}},[t._v("返回")])],1)],1),a("el-col",{staticClass:"search-right",attrs:{span:4}},[a("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:t.handleSearch}},[t._v("刷新")])],1)],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.sampleData,"highlight-current-row":"","header-cell-style":{background:"#ECF3FC"}},on:{"selection-change":t.handleSelectionChange}},[a("template",{slot:"empty"},[a("div",{staticClass:"table_empty"},[a("div",{staticClass:"empty_tips"},[a("span",[t._v("\n              暂无审核信息\n            ")])])])]),a("el-table-column",{attrs:{type:"index",width:"55",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"sampleNo",label:"样品编号","min-width":"140px",align:"center"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",align:"center","min-width":"140px"}}),a("el-table-column",{attrs:{prop:"inspectionName",label:"受检单位",align:"center"}}),a("el-table-column",{attrs:{prop:"collectUser",label:"采样人",width:"190px",align:"center"}}),a("el-table-column",{attrs:{prop:"reviewUser",label:"复核人",width:"190px",align:"center"}}),a("el-table-column",{attrs:{prop:"factorPoint",label:"采样点位",align:"center"}}),a("el-table-column",{attrs:{prop:"secdClassName",label:"检测类别",width:"120px",align:"center"}}),a("el-table-column",{attrs:{prop:"finishTime",label:"采样登记时间",width:"190px",align:"center"}}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v(" 查看")])]}}])})],2)],1),a("div",{staticStyle:{float:"right"}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.searchForm.pageNumber,limit:t.searchForm.pageSize},on:{"update:page":function(e){return t.$set(t.searchForm,"pageNumber",e)},"update:limit":function(e){return t.$set(t.searchForm,"pageSize",e)},pagination:t.handleSearch}})],1),a("el-dialog",{attrs:{title:t.currentSample+"-详情",visible:t.sampleVisible,width:"85%",center:"",top:"5vh"},on:{"update:visible":function(e){t.sampleVisible=e}}},[a("el-form",{attrs:{model:t.sampleDetailForm,"label-width":"180px","label-position":"right"}},[a("el-card",{staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v("基础信息")])]),a("el-col",{staticStyle:{height:"32px"},attrs:{span:16}},[a("el-form-item",{attrs:{"label-width":"100",label:"检测因子:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.factorName))])])],1),a("el-col",{staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100",label:"点位:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.factorPoint))])])],1)],1),t._l(t.sampleSecInfo,(function(e){return a("el-card",{key:e.groupKey,staticStyle:{"margin-top":"5px","padding-bottom":"20px"}},[e.groupName&&""!=e.groupName?a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v(t._s(e.groupName))])]):t._e(),t._l(e.params,(function(e,l){return a("el-col",{key:l,staticStyle:{height:"32px"},attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"100"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.name)+":")]),a("span",{staticClass:"showTile"},[t._v(t._s(e.value?e.value.toString():""))])])],1)}))],2)})),t.sampleDataInfo&&t.sampleDataInfo.length>0?a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v("现场检测因子信息")])]),a("el-table",{attrs:{data:t.sampleDataInfo,stripe:""}},[a("el-table-column",{attrs:{prop:"factorName",label:"检测因子项目"}}),a("el-table-column",{attrs:{label:"因子结果集"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.measuredForm?[t._v("\n                "+t._s("第一值: "+a.measuredForm.firstVal+" 第二值: "+a.measuredForm.secondVal+" 均值: "+a.measuredForm.avgVal)+"\n              ")]:[t._v("\n                "+t._s(a.factorData?a.factorData:"")+"\n              ")]]}}],null,!1,3613769334)}),a("el-table-column",{attrs:{prop:"checkEquipment",label:"检测设备"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n              "+t._s(a.checkEquipment&&a.checkEquipment.length>0?a.checkEquipment.replaceAll("^_^"," "):"")+"\n            ")]}}],null,!1,2289891611)}),a("el-table-column",{attrs:{prop:"theoreticalVal",label:"理论值"}}),a("el-table-column",{attrs:{prop:"groundConditions",label:"测定值"}})],1)],1):t._e(),a("el-card",{staticStyle:{"margin-top":"5px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{width:"3px",margin:"auto 3px",height:"20px","background-color":"steelblue"}}),a("span",[t._v("现场信息")])]),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样地址:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.sampleDataVo.collectLocation))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"100",label:"采样日期:"}},[a("span",{staticClass:"showTile"},[t._v(t._s(t.sampleDetailForm.sampleDataVo.collectDate))])])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{"label-width":"100",label:"现场图片:"}},[t.sampleImageList&&t.sampleImageList.length>0?a("div",{staticClass:"demo-image__lazy"},t._l(t.sampleImageList,(function(e,l){return a("el-image",{key:l,staticStyle:{width:"100px",height:"100px","margin-left":"10px"},attrs:{src:e,"preview-src-list":t.sampleImageList}})})),1):t._e()])],1)],1)],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.sampleVisible=!1}}},[t._v("关 闭")])],1)],1)],1)},r=[],n=(a("6b54"),a("47bc")),o=a("d43b"),s=a("333d"),i={0:"草稿",1:"待审核",2:"审核驳回",3:"审核通过"},c={name:"SampleHisApprove",components:{Pagination:s["a"]},filters:{statusQualityFilter:function(t){var e={0:"info",1:"",2:"danger",3:"success"};return e[t]}},props:{sampTaskId:{type:String,default:""}},data:function(){return{ACCOUNT_STATUS:i,sampleData:[],searchForm:{jobId:"",sampItemId:"",pageNumber:1,pageSize:10},total:0,approveVisible:!1,sampleVisible:!1,sampleDetailForm:{factorName:"",factorPoint:"",secdClassName:"",factorDataVos:[],sampleDataVo:{collectDate:"",collectLocation:"",imageList:[],sampleData:[],specialNote:""},sampleJobVo:{projectName:"",jobRemark:""}},currentSample:"",approveForm:{sampItemId:"",auditFlag:"1",auditReason:""},sampleImage:"",sampleImageList:[],showTitle:"",sampleDetails:[],multipleSelection:[],batchApproveVisible:!1,batchApprove:{sampItemId:"",auditFlag:"1",auditReason:""},sampleDataInfo:[],sampleSecInfo:[]}},created:function(){this.searchForm.sampTaskId=this.sampTaskId,this.handleSearch()},methods:{handleSearch:function(){var t=this;n["m"](this.searchForm).then((function(e){200===e.code&&(t.sampleData=e.result.records,t.total=e.result.total)}))},handleDetail:function(t){var e=this;this.currentSample=t.sampleNo,this.sampleImageList=[],this.sampleDataInfo=[],this.sampleSecInfo=[],this.sampleImage="";var a=this.$store.getters.sysBaseUrl+"/cyImg/";o["g"](t.sampItemId).then((function(t){200===t.code&&t.result&&(e.sampleDetailForm=t.result||{},e.$nextTick((function(){e.sampleImageList=t.result.sampleDataVo.imageList.map((function(t){return a+t})),e.sampleSecInfo=t.result.sampleDataVo.sampleData||[];var l=t.result.factorDataVos.filter((function(t){return"1"===t.dataEntryStep}))||[];e.sampleDataInfo=l.map((function(t){return t.measuredFormVal&&t.measuredFormVal.length>0&&e.$set(t,"measuredForm",JSON.parse(t.measuredFormVal)),t}))})),e.sampleVisible=!0)}))},handleBatchApprove:function(){if(this.multipleSelection&&this.multipleSelection.length>0){var t=this.multipleSelection.map((function(t){return t.sampItemId}));this.batchApprove.sampItemId=t.toString(),this.batchApprove.auditFlag="1",this.batchApprove.auditReason="",this.showTitle="样品审核",this.batchApproveVisible=!0}else this.$message.warning("至少选择一个任务进行审核")},handleSelectionChange:function(t){this.multipleSelection=t},batchConfirmDialog:function(){var t=this;this.$confirm("确定提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["c"](t.batchApprove).then((function(e){200===e.code?(t.$notify({title:"成功",message:e.message,type:"success"}),t.batchApproveVisible=!1,t.handleSearch()):t.$notify({title:"失败",message:e.message,type:"error"})}))})).catch((function(){}))},confirmDialog:function(){var t=this;this.$confirm("确定提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n["h"](t.approveForm).then((function(e){200===e.code?(t.$notify({title:"成功",message:e.message,type:"success"}),t.approveVisible=!1,t.handleSearch()):t.$notify({title:"失败",message:e.message,type:"error"})}))})).catch((function(){}))},goBack:function(){this.$router.back()}}},p=c,m=(a("44fb"),a("ba013"),a("68de"),a("2877")),u=Object(m["a"])(p,l,r,!1,null,"531a0d34",null);e["default"]=u.exports}}]);