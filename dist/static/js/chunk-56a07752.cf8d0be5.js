(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56a07752"],{"0e6b":function(t,e,a){},"3d98":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{model:t.searchForm,inline:!0}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"任务单号:"}},[a("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"任务单号"},model:{value:t.searchForm.jobId,callback:function(e){t.$set(t.searchForm,"jobId",e)},expression:"searchForm.jobId"}})],1),a("el-form-item",[a("el-button",{staticClass:"iconfont icon-chaxun1",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v(" 查询")]),a("el-button",{staticClass:"iconfont icon-fanhui",attrs:{type:""},on:{click:t.goBack}},[t._v(" 返回")])],1)],1),a("el-col",{staticClass:"search-right",attrs:{span:4}},[a("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:t.handleSearch}},[t._v("刷新")])],1)],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.taskData,"highlight-current-row":"","header-cell-style":{background:"#ECF3FC"}}},[a("template",{slot:"empty"},[a("div",{staticClass:"table_empty"},[a("div",{staticClass:"empty_tips"},[a("span",[t._v("\n              暂无任务信息\n            ")])])])]),a("el-table-column",{attrs:{prop:"jobId",label:"任务单号",width:"140px",align:"center"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",width:"180px","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"consignorName",label:"委托单位",width:"140px","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"inspectionName",label:"受检单位",width:"140px","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{label:"要求完成时间",width:"190px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(a.startDate)+" ~ "+t._s(a.endDate)+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"进度",align:"center",width:"140px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{on:{mousedown:function(e){return t.showInfos(n)}}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":14,percentage:n.process}})],1)]}}])}),a("el-table-column",{attrs:{prop:"taskStatus",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-tag",{attrs:{type:"1"===n.taskStatus?"success":"primary"}},[t._v(t._s("1"===n.taskStatus?"已完成":"未完成"))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",width:"155px",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleDetail(n)}}},[t._v("详情")])]}}])})],2)],1),a("div",{staticStyle:{float:"right"}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.searchForm.pageNumber,limit:t.searchForm.pageSize},on:{"update:page":function(e){return t.$set(t.searchForm,"pageNumber",e)},"update:limit":function(e){return t.$set(t.searchForm,"pageSize",e)},pagination:t.handleSearch}})],1),a("el-dialog",{attrs:{title:"任务进度表",visible:t.taskInfosVisible},on:{"update:visible":function(e){t.taskInfosVisible=e}}},[a("div",{staticClass:"block"},[a("el-timeline",t._l(t.activitieModel,(function(e,n){return a("el-timeline-item",{key:n,attrs:{type:e.type,color:e.color,size:e.size,timestamp:e.timestamp}},[t._v("\n          "+t._s(e.content)+"\n        ")])})),1)],1)]),a("el-dialog",{attrs:{title:"因子调度详情",visible:t.factorVisible,width:"80%"},on:{"update:visible":function(e){t.factorVisible=e}}},[a("el-table",{attrs:{data:t.factorData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),a("el-table-column",{attrs:{prop:"secdClassName",label:"检测类别","min-width":"110px",align:"center"}}),a("el-table-column",{attrs:{prop:"factorName",label:"检测因子","min-width":"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n          "+t._s(n.factorName)),a("span",{staticStyle:{color:"red"}},[t._v(t._s(n.meanName&&n.meanName.length>0?"("+n.meanName+")":""))])]}}])}),a("el-table-column",{attrs:{prop:"factorPoint",label:"检测位置",align:"center"}}),a("el-table-column",{attrs:{prop:"frequency",label:"频次(次/天)",align:"center"}}),a("el-table-column",{attrs:{prop:"dayCount",label:"天数",align:"center"}}),a("el-table-column",{attrs:{label:"次数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(Number(a.dayCount*a.frequency))+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"是否合样",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s("1"===a.hyFlag?"Y":"N")+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"是否分包",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n          "+t._s("1"===a.fbFlag?"Y":"N")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"factorRemark",label:"备注","min-width":"110",align:"center"}})],1)],1)],1)},r=[],s=(a("c5f6"),a("b199")),o=a("333d"),c={components:{Pagination:o["a"]},data:function(){return{taskData:[],searchForm:{taskId:"",jobId:"",pageNumber:1,pageSize:10},total:0,activitieModel:[],taskInfosVisible:!1,factorData:[],factorVisible:!1}},created:function(){this.$route.params.taskId&&(this.searchForm.taskId=this.$route.params.taskId,this.handleSearch())},methods:{handleSearch:function(){var t=this;s["i"](this.searchForm).then((function(e){200===e.code&&(t.taskData=e.result.records.map((function(e){return""!==e.reportStatus&&"6"===e.reportStatus?t.$set(e,"taskStatus","1"):t.$set(e,"taskStatus","0"),t.doProcessList(e),e}))||[],t.total=e.result.total)}))},doProcessList:function(t){var e=[{name:"任务单",content:"任务单",timestamp:"",size:"normal",type:"success"},{name:"采样",content:"采样",timestamp:"",size:"normal",type:"info"},{name:"检测",content:"检测",timestamp:"",size:"normal",type:"info"},{name:"报告生成",content:"报告生成",timestamp:"",size:"normal",type:"info"},{attr:"报告审核",content:"报告审核",timestamp:"",size:"normal",type:"info"},{attr:"报告签发",content:"报告签发",timestamp:"",size:"normal",type:"info"}],a=1;"1"===t.isSampled&&(e[1].type="success",a++),"1"===t.isChecked&&(e[2].type="success",a++),t.reportStatus>=1&&7!==t.reportStatus&&(e[3].type="success",a++),t.reportStatus>=4&&7!==t.reportStatus&&(e[4].type="success",a++),t.reportStatus>=5&&7!==t.reportStatus&&(e[5].type="success",a++),a>=1&&a<3&&(e[1].type="warning",e[2].type="warning"),a>=3&&(e[1].type="success",e[2].type="success",e[3].type="warning",4===a?(e[3].type="success",e[4].type="warning"):5===a?(e[3].type="success",e[4].type="success",e[5].type="warning"):6===a&&(e[3].type="success",e[4].type="success",e[5].type="success")),this.$set(t,"infoList",e),this.$set(t,"process",parseInt(Number(a/6*100).toFixed(0)))},showInfos:function(t){this.activitieModel=[],this.activitieModel=t.infoList,this.taskInfosVisible=!0},handleDetail:function(t){var e=this;s["h"](t.jobId).then((function(t){e.factorData=t.result.map((function(t){if("{}"!==t.dynamicParam&&t.dynamicParam.indexOf("meanName")>-1){var a=JSON.parse(t.dynamicParam);e.$set(t,"meanName",a.meanName)}return t})),e.factorVisible=!0}))},goBack:function(){this.$router.back()}}},i=c,l=(a("4d1b"),a("7572"),a("2877")),u=Object(l["a"])(i,n,r,!1,null,"6d19a693",null);e["default"]=u.exports},"4d1b":function(t,e,a){"use strict";a("0e6b")},7572:function(t,e,a){"use strict";a("c7e0")},b199:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"f",(function(){return s})),a.d(e,"h",(function(){return o})),a.d(e,"k",(function(){return c})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"n",(function(){return d})),a.d(e,"a",(function(){return p})),a.d(e,"i",(function(){return f})),a.d(e,"j",(function(){return m})),a.d(e,"m",(function(){return h})),a.d(e,"b",(function(){return b})),a.d(e,"l",(function(){return y}));var n=a("b775");function r(t){return Object(n["a"])({url:"/scheduleTask/findByCondition",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/scheduleTask/findHistoryByCondition",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/scheduleTask/".concat(t,"/jobFactors"),method:"get"})}function c(t){return Object(n["a"])({url:"/scheduleTask/".concat(t,"/findOfferPlan"),method:"get"})}function i(t){return Object(n["a"])({url:"/scheduleTask/".concat(t,"/findFactors"),method:"get"})}function l(t){return Object(n["a"])({url:"/scheduleTask/findFactorsByOfferPlanIds",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/scheduleTask/findJobByTaskId/".concat(t),method:"get"})}function d(t){return Object(n["a"])({url:"/scheduleTask/saveScheduleJob",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/scheduleTask/confirmScheduleJob",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/scheduleTask/findJobForTask",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/scheduleTask/findJobsByCondition",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/offerDispatch/getOfferFactorByTaskId/".concat(t),method:"get"})}function b(t){return Object(n["a"])({url:"/offerDispatch/doScheduTask",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/offerDispatch/getLastScheduInfoByTaskId/".concat(t),method:"get"})}},c7e0:function(t,e,a){}}]);