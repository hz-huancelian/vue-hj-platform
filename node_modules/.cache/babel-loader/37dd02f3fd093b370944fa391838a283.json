{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\laboratory\\components\\hisLaborList.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\laboratory\\components\\hisLaborList.vue","mtime":1653473990000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.find\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\objectSpread2.js\"));\n\nvar _vuex = require(\"vuex\");\n\nvar checkServer = _interopRequireWildcard(require(\"@/api/check\"));\n\nvar stockServer = _interopRequireWildcard(require(\"@/api/stock\"));\n\nvar _equipment = require(\"@/api/equipment\");\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// Secondary package based on el-pagination\nvar CHECK_STATUS = {\n  '0': '待领样',\n  '1': '领样申请',\n  '2': '待检测',\n  '3': '已录入',\n  '4': '待审核',\n  '5': '审核通过',\n  '6': '审核失败'\n};\nvar _default = {\n  components: {\n    Pagination: _Pagination.default\n  },\n  filters: {\n    statusQualityFilter: function statusQualityFilter(status) {\n      if (status === '0' || status === '1' || status === '2' || status === '4') {\n        return 'info';\n      } else if (status === '3') {\n        return '';\n      } else if (status === '5') {\n        return 'success';\n      } else {\n        return 'danger';\n      }\n    }\n  },\n  props: {\n    checkTaskId: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      CHECK_STATUS: CHECK_STATUS,\n      checkData: [],\n      searchForm: {\n        smapItemId: '',\n        factorName: '',\n        checkStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      detailVisible: false,\n      sampleForm: {\n        factorInfo: {},\n        subFactors: {}\n      },\n      sampleVisible: false,\n      sampleDetails: [],\n      sampleDetailForm: {\n        factorName: '',\n        factorPoint: '',\n        secdClassName: '',\n        factorDataVos: [],\n        sampleDataVo: {\n          collectDate: '',\n          collectLocation: '',\n          imageList: [],\n          sampleData: [],\n          specialNote: ''\n        },\n        sampleJobVo: {\n          projectName: '',\n          jobRemark: ''\n        }\n      },\n      testResultVisible: false,\n      testResultForm: {\n        checkFactorId: '',\n        checkRes: '',\n        checkSubRes: '',\n        remark: ''\n      },\n      subFactorData: [],\n      currentSample: '',\n      sampleImageList: [],\n      sampleImage: '',\n      sampleDataInfo: [],\n      sampleSecInfo: [],\n      equipmentType: '',\n      equipmentClass: '',\n      equipmentId: '',\n      level: [],\n      levelTwo: [],\n      levelThree: []\n    };\n  },\n  computed: (0, _objectSpread2.default)({}, (0, _vuex.mapGetters)(['userId'])),\n  created: function created() {\n    if (this.checkTaskId && this.checkTaskId.length > 0) {\n      this.searchForm.checkTaskId = this.checkTaskId;\n    }\n\n    this.getEquipment();\n    this.handleSearch();\n  },\n  methods: {\n    handleSearch: function handleSearch() {\n      var _this = this;\n\n      if (this.checkTaskId && this.checkTaskId.length > 0) {\n        checkServer.findCheckTaskDetailByCondition1(this.searchForm).then(function (res) {\n          if (res.code === 200) {\n            _this.checkData = res.result.records.map(function (i) {\n              if (i.checkRes && i.checkRes !== '') {\n                var ob = JSON.parse(i.checkRes);\n\n                _this.$set(i, 'masterRes', ob.v1);\n\n                _this.$set(i, 'exponRes', ob.v2);\n              } else {\n                _this.$set(i, 'masterRes', 0);\n\n                _this.$set(i, 'exponRes', 0);\n              }\n\n              return i;\n            }) || [];\n            _this.total = res.result.total;\n          }\n        });\n      }\n    },\n    handleDetail: function handleDetail(row) {\n      var _this2 = this;\n\n      this.sampleForm = (0, _objectSpread2.default)({}, row);\n\n      if (row.factorSubsetVos && row.factorSubsetVos.length > 0) {\n        this.sampleForm.factorSubsetVos.forEach(function (i) {\n          var factorInfo = JSON.parse(i.checkSubRes);\n\n          _this2.$set(i, 'factorInfo', factorInfo);\n        });\n      }\n\n      if (row.checkRes && row.checkRes.length > 0) {\n        var factorInfo = JSON.parse(row.checkRes);\n        this.$set(this.sampleForm, 'factorInfo', factorInfo);\n      }\n\n      this.detailVisible = true;\n    },\n    getEquipment: function getEquipment() {\n      var _this3 = this;\n\n      this.level = [];\n      this.levelTwo = [];\n      this.levelThree = [];\n      (0, _equipment.laboratoryEquipmentTree)().then(function (res) {\n        if (res.result) {\n          var treeData = res.result ? res.result : [];\n\n          if (treeData !== '') {\n            _this3.level = treeData;\n          }\n        }\n      });\n    },\n    handleLocalDetail: function handleLocalDetail(row) {\n      var _this4 = this;\n\n      this.currentSample = row.sampleNo;\n      this.sampleImageList = [];\n      this.sampleImage = '';\n      var baseUrl = this.$store.getters.sysBaseUrl + '/cyImg/';\n      stockServer.getSampleDataBySampItemId(row.sampItemId).then(function (res) {\n        if (res.code === 200 && res.result) {\n          _this4.sampleDetailForm = res.result || {};\n\n          _this4.$nextTick(function () {\n            // 提取图片\n            _this4.sampleImageList = res.result.sampleDataVo.imageList.map(function (i) {\n              return baseUrl + i;\n            }); // 二级类别\n\n            _this4.sampleSecInfo = res.result.sampleDataVo.sampleData || []; // 因子\n\n            _this4.sampleDataInfo = res.result.factorDataVos.filter(function (i) {\n              return i.dataEntryStep === '1';\n            }) || [];\n          });\n\n          _this4.sampleVisible = true;\n        }\n      });\n    },\n    goBack: function goBack() {\n      this.$router.back();\n    },\n    handleSetResult: function handleSetResult(row) {\n      debugger;\n      this.testResultForm = (0, _objectSpread2.default)({}, row);\n      this.subFactorData = [];\n\n      if (row.factorSubsetVos && row.factorSubsetVos.length > 0) {\n        this.subFactorData = row.factorSubsetVos.map(function (m) {\n          var subO = JSON.parse(m.checkSubRes);\n          return {\n            id: m.id,\n            name: m.factorName,\n            masterRes: subO ? subO.v1 : '',\n            subRes: subO ? subO.v2 : '',\n            unitName: m.unitName\n          };\n        });\n      } else {\n        var resObj = JSON.parse(row.checkRes);\n        this.subFactorData = [{\n          name: row.factorName,\n          masterRes: resObj ? resObj.v1 : '',\n          subRes: resObj ? resObj.v2 : '',\n          unitName: row.unitName\n        }];\n      }\n\n      var equObj = JSON.parse(row.checkEquipment);\n\n      if (equObj) {\n        this.equipmentType = equObj.equipmentName;\n        this.equipmentClass = equObj.equipmentModel;\n        this.equipmentId = equObj.id;\n        this.handleChangeEqu(equObj.equipmentName);\n        this.handleChangeEquType(equObj.equipmentModel);\n      }\n\n      this.testResultVisible = true;\n    },\n    handleApprove: function handleApprove(id) {\n      var _this5 = this;\n\n      this.$confirm('确认提交审核?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        checkServer.submitCheckFactor({\n          'checkFactorId': id\n        }).then(function (res) {\n          if (res.code === 200) {\n            _this5.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            });\n\n            _this5.handleSearch();\n          } else {\n            _this5.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            });\n          }\n        });\n      });\n    },\n    handleChangeEqu: function handleChangeEqu(val) {\n      this.levelTwo = [];\n      this.levelThree = [];\n      var o = this.level.find(function (i) {\n        return i.name === val;\n      });\n\n      if (o) {\n        this.levelTwo = o.children || [];\n      }\n    },\n    handleChangeEquType: function handleChangeEquType(val) {\n      this.levelThree = [];\n      var o = this.levelTwo.find(function (i) {\n        return i.name === val;\n      });\n\n      if (o) {\n        this.levelThree = o.children || [];\n      }\n\n      debugger;\n    },\n    confirmChecks: function confirmChecks() {\n      var _this6 = this;\n\n      this.$confirm('确认提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var equipmentInfo = _this6.levelThree.find(function (i) {\n          return i.id === _this6.equipmentId;\n        });\n\n        var data;\n\n        if (_this6.testResultForm.isFactor === '0') {\n          // 正常因子\n          var checkResInfo = {\n            name: _this6.subFactorData[0].name,\n            v1: _this6.subFactorData[0].masterRes,\n            v2: _this6.subFactorData[0].subRes\n          };\n          data = {\n            checkFactorId: _this6.testResultForm.checkFactorId,\n            checkRes: JSON.stringify(checkResInfo),\n            remark: _this6.testResultForm.remark,\n            checkEquipment: JSON.stringify(equipmentInfo)\n          };\n        } else {\n          var _checkResInfo = _this6.subFactorData.map(function (i) {\n            var resInfo = {\n              name: i.name,\n              v1: i.masterRes,\n              v2: i.subRes\n            };\n            return {\n              id: i.id,\n              unitName: i.unitName,\n              checkSubRes: JSON.stringify(resInfo)\n            };\n          });\n\n          data = {\n            checkFactorId: _this6.testResultForm.checkFactorId,\n            checkRes: '',\n            factorSubsetVos: _checkResInfo,\n            remark: _this6.testResultForm.remark,\n            checkEquipment: JSON.stringify(equipmentInfo)\n          };\n        }\n\n        checkServer.saveCheckFactorData(data).then(function (res) {\n          if (res.code === 200) {\n            _this6.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            });\n\n            _this6.testResultVisible = false;\n\n            _this6.handleSearch();\n          } else {\n            _this6.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            });\n          }\n        });\n      });\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["hisLaborList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-continer\">\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"20\">\n          <el-form-item>\n            <el-input v-model=\"searchForm.sampleNo\" style=\"width:165px\" placeholder=\"样品编号\" />\n          </el-form-item>\n          <el-form-item>\n            <el-input v-model=\"searchForm.factorName\" style=\"width:165px\" placeholder=\"因子名称\" />\n          </el-form-item>\n          <el-form-item>\n            <el-select\n              v-model=\"searchForm.checkStatus\"\n              clearable\n              filterable\n              style=\"width:165px\"\n              placeholder=\"检测状态\"\n            >\n              <el-option label=\"已录入\" value=\"3\" />\n              <el-option label=\"待审核\" value=\"4\" />\n              <el-option label=\"审核通过\" value=\"5\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n            <el-button type=\"primary\" class=\"iconfont icon-fanhui\" @click=\"goBack\"> 返回</el-button>\n\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"4\" class=\"search-right\">\n          <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-table\n      :data=\"checkData\"\n      stripe\n      border\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n      style=\"width: 100%\"\n    >\n      <template slot=\"empty\">\n        <div class=\"table_empty\">\n          <div class=\"empty_tips\">\n            <span>\n              暂无信息\n            </span>\n          </div>\n        </div>\n      </template>\n      <el-table-column type=\"index\" width=\"50\" align=\"center\" label=\"序号\" />\n      <el-table-column prop=\"factorName\" label=\"检测因子\" width=\"130px\" align=\"center\" />\n      <el-table-column prop=\"sampleNo\" label=\"样品编号\" width=\"160px\" align=\"center\" />\n      <el-table-column prop=\"factorPoint\" label=\"采样点位\" width=\"110px\" align=\"center\" />\n      <el-table-column prop=\"dayAndCount\" label=\"频次(次/天)\" width=\"120px\" align=\"center\" />\n      <el-table-column prop=\"standardName\" label=\"检测标准\" min-width=\"220px\" align=\"center\" />\n      <el-table-column prop=\"checkRes\" label=\"检测结果\" min-width=\"150px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <template v-if=\"row.checkRes && row.checkRes.length >0\">\n            {{ row.masterRes }}<template v-if=\"row.exponRes!==''&&row.exponRes!==0\">×10<sup>{{ row.exponRes }}</sup></template>\n            {{ row.unitName && row.unitName!=='无量纲'?' ' + row.unitName:'' }}\n          </template>\n          <template v-else />\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"assignUser\" label=\"分析员\" align=\"center\" />\n      <el-table-column prop=\"collectTime\" label=\"采样时间\" width=\"160\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <template v-if=\"row.collectTime || row.collectDate\">\n            {{ row.collectTime && row.collectTime!=''?((row.collectDate?(row.collectDate + ' '):'')+row.collectTime):row.collectDate }}\n          </template>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"storeTime\" label=\"入库时间\" width=\"160\" align=\"center\" />\n      <!-- <el-table-column prop=\"endDate\" label=\"任务截止时间\" width=\"120px\" align=\"center\" /> -->\n      <el-table-column prop=\"dataEntryStep\" label=\"样品归类\" width=\"120\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.sampleType ==='1'?'danger':''\">\n            {{ row.sampleType ==='1'?\"样品分包\":\"样品自检\" }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"checkStatus\" label=\"检测状态\" width=\"120px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.checkStatus|statusQualityFilter\">\n            {{ CHECK_STATUS[row.checkStatus] }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"dataEntryStep\" label=\"数据操作\" width=\"120\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.dataEntryStep ==='1'?'danger':''\">\n            {{ row.dataEntryStep ==='1'?\"采样录入\":\"检测录入\" }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" width=\"240px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-button type=\"text\" @click=\"handleDetail(row)\">查看</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-button type=\"text\" @click=\"handleLocalDetail(row)\">采样记录</el-button>\n          <div v-if=\"row.assignUserId === userId && (row.checkStatus==='2' || row.checkStatus==='3' || row.checkStatus==='6')\" class=\"erc-divider-vertical\" />\n          <el-button v-if=\"row.assignUserId === userId && (row.checkStatus==='2' ||row.checkStatus==='3' ||row.checkStatus==='6')\" type=\"text\" @click=\"handleSetResult(row)\">结果编辑</el-button>\n          <div v-if=\"row.assignUserId === userId && row.checkStatus==='3'\" class=\"erc-divider-vertical\" />\n          <el-button v-if=\"row.assignUserId === userId && row.checkStatus==='3' \" type=\"text\" @click=\"handleApprove(row.checkFactorId)\">提交审核</el-button>\n\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n    <el-dialog title=\"样品详情\" :visible.sync=\"detailVisible\" width=\"70%\" center top=\"5vh\">\n      <div style=\"width: 700px;margin:0 auto;\">\n        <el-form label-width=\"100px\" label-position=\"left\">\n          <el-form-item label=\"样品编号:\">{{ sampleForm.sampleNo }}</el-form-item>\n          <el-form-item label=\"检测因子:\">{{ sampleForm.factorName }}</el-form-item>\n          <el-form-item label=\"检测标准:\">{{ sampleForm.standardName }}</el-form-item>\n          <el-form-item label=\"因子备注:\">{{ sampleForm.factorRemark }}</el-form-item>\n          <el-form-item label=\"检测备注:\">{{ sampleForm.remark }}</el-form-item>\n          <el-form-item label=\"检测结果:\">\n            <template v-if=\"sampleForm.factorSubsetVos && sampleForm.factorSubsetVos.length >0\">\n              <el-table\n                :data=\"sampleForm.factorSubsetVos\"\n                border\n                style=\"width:100%;\"\n                :header-cell-style=\"{background:'#ECF3FC'}\"\n              >\n                <el-table-column prop=\"factorName\" label=\"套餐因子\" align=\"center\" />\n                <el-table-column prop=\"name\" label=\"检测结果\" align=\"center\">\n                  <template slot-scope=\"{row}\">\n                    {{ row.factorInfo&&row.factorInfo.v1?row.factorInfo.v1:0 }}\n                    <template v-if=\"row.factorInfo&&row.factorInfo.v2!==''&&row.factorInfo.v2!==0\">\n                      ×10<sup>{{ row.factorInfo.v2?Number(row.factorInfo.v2):0 }}</sup>\n                    </template>\n                    {{ row.unitName && row.unitName!=='无量纲'?' ' + row.unitName:'' }}\n                  </template>\n                </el-table-column>\n              </el-table>\n            </template>\n            <template v-else-if=\"sampleForm.checkRes && sampleForm.checkRes.length > 0\">\n              {{ sampleForm.factorInfo&&sampleForm.factorInfo.v1?sampleForm.factorInfo.v1:0 }}\n              <template v-if=\"sampleForm.factorInfo&&sampleForm.factorInfo.v2!==''&&sampleForm.factorInfo.v2!==0\">\n                ×10<sup>{{ sampleForm.factorInfo.v2?Number(sampleForm.factorInfo.v2):0 }}</sup>\n              </template>\n              {{ sampleForm.unitName && sampleForm.unitName!=='无量纲'?' ' + sampleForm.unitName:'' }}\n            </template>\n            <template v-else>暂无检测结果</template>\n          </el-form-item>\n        </el-form>\n\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"detailVisible = false\">关 闭</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog :title=\"currentSample + '-详情'\" :visible.sync=\"sampleVisible\" width=\"85%\" center top=\"5vh\">\n      <el-form :model=\"sampleDetailForm\" label-width=\"180px\" label-position=\"right\">\n        <el-card style=\"margin-top: 5px;padding-bottom: 20px;\">\n          <div slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>基础信息</span>\n          </div>\n          <el-col :span=\"16\" style=\"height:32px;\">\n            <el-form-item label-width=\"100\" label=\"检测因子:\">\n              <span class=\"showTile\">{{ sampleDetailForm.factorName }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\" style=\"height:32px;\">\n            <el-form-item label-width=\"100\" label=\"点位:\">\n              <span class=\"showTile\">{{ sampleDetailForm.factorPoint }}</span>\n            </el-form-item>\n          </el-col>\n          <!--动态二级类别信息-->\n        </el-card>\n        <el-card v-for=\"item in sampleSecInfo\" :key=\"item.groupKey\" style=\"margin-top: 5px;padding-bottom: 20px;\">\n          <div v-if=\"item.groupName && item.groupName != ''\" slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>{{ item.groupName }}</span>\n          </div>\n          <el-col v-for=\"(sitem,index) in item.params\" :key=\"index\" :span=\"8\" style=\"height:32px;\">\n            <el-form-item label-width=\"100\">\n              <span slot=\"label\">{{ sitem.name }}:</span>\n              <span class=\"showTile\">{{ sitem.value?sitem.value.toString():'' }}</span>\n            </el-form-item>\n          </el-col>\n        </el-card>\n\n        <el-card v-if=\"sampleDataInfo && sampleDataInfo.length > 0\" style=\"margin-top: 5px\">\n          <div slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>现场检测因子信息</span>\n          </div>\n          <el-table :data=\"sampleDataInfo\" stripe>\n            <el-table-column prop=\"factorName\" label=\"检测因子项目\" />\n            <el-table-column label=\"因子结果集\">\n              <template slot-scope=\"{row}\">\n                <template v-if=\"row.measuredForm\">\n                  {{ '第一值: ' +row.measuredForm.firstVal + ' 第二值: ' + row.measuredForm.secondVal + \" 均值: \" + row.measuredForm.avgVal }}\n                </template>\n                <template v-else>\n                  {{ row.factorData?row.factorData:'' }}\n                </template>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"checkEquipment\" label=\"检测设备\">\n              <template slot-scope=\"{row}\">\n                {{ row.checkEquipment&&row.checkEquipment.length>0?row.checkEquipment.replaceAll('^_^',' '):'' }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"theoreticalVal\" label=\"理论值\" />\n            <el-table-column prop=\"groundConditions\" label=\"测定值\" />\n          </el-table>\n        </el-card>\n\n        <el-card style=\"margin-top: 5px\">\n          <div slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>现场信息</span>\n          </div>\n          <el-col :span=\"12\">\n            <el-form-item label-width=\"100\" label=\"采样地址:\">\n              <span class=\"showTile\">{{ sampleDetailForm.sampleDataVo.collectLocation }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label-width=\"100\" label=\"采样日期:\">\n              <span class=\"showTile\">{{ sampleDetailForm.sampleDataVo.collectDate }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label-width=\"100\" label=\"现场图片:\">\n              <div v-if=\"sampleImageList && sampleImageList.length > 0\" class=\"demo-image__lazy\">\n                <el-image v-for=\"(url, index) in sampleImageList\" :key=\"index\" :src=\"url\" :preview-src-list=\"sampleImageList\" style=\"width: 100px; height: 100px;margin-left: 10px;\" />\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-card>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"sampleVisible=false\">关 闭</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"样品结果录入\" :visible.sync=\"testResultVisible\" width=\"70%\" center top=\"5vh\">\n      <div style=\"width: 700px;margin:0 auto;\">\n        <el-form label-width=\"100px\" label-position=\"left\">\n          <el-form-item label=\"样品编号:\">{{ testResultForm.sampleNo }}</el-form-item>\n          <el-form-item label=\"检测因子:\">{{ testResultForm.factorName }}</el-form-item>\n          <el-form-item label=\"检测标准:\">{{ testResultForm.standardName }}</el-form-item>\n          <el-form-item>\n            <span slot=\"label\">\n              备注信息\n              <el-popover\n                placement=\"top-start\"\n                title=\"\"\n                width=\"300\"\n                trigger=\"hover\"\n                content=\"新建报价单时业务员录入的针对检测因子的备注信息\"\n              >\n                <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n              </el-popover>\n              :\n            </span>\n            {{ testResultForm.factorRemark }}\n          </el-form-item>\n          <el-form-item label=\"检测结果:\">\n            <el-row v-for=\"(item, index) in subFactorData\" :key=\"index\">\n              <el-col :span=\"4\" style=\"text-align: right;padding-bottom: 5px;\">\n                {{ item.name }}:\n              </el-col>\n              <el-col :span=\"9\" style=\"margin-left:10px;padding-bottom: 5px;\">\n                <el-input v-model=\"item.masterRes\" type=\"Number\" controls-position=\"right\" :min=\"0\" placeholder=\"结果值\">\n                  <template slot=\"append\">E</template>\n                </el-input>\n              </el-col>\n              <el-col :span=\"9\" style=\"margin-left:10px;padding-bottom: 5px;\">\n                <el-input v-model=\"item.subRes\" type=\"Number\" controls-position=\"right\" :min=\"0\" placeholder=\"幂数\">\n                  <template v-if=\"item.unitName\" slot=\"append\">{{ item.unitName }}</template>\n                </el-input>\n              </el-col>\n            </el-row>\n\n            <el-row>\n              <el-col :span=\"24\" style=\"height:24px;font-size:14px;\">\n                <span style=\"color:red\">例:3.45E2=3.45×10²  ;  234E0=234 ; 1.62E-3=1.62×10⁻³</span>\n              </el-col>\n            </el-row>\n            <el-row>\n              <el-col :span=\"24\" style=\"height:24px;font-size:14px;\">\n                <span style=\"color:red\">无子因子的：输入0代表未检出</span>\n              </el-col>\n            </el-row>\n            <el-row>\n              <el-col :span=\"24\" style=\"height:24px;font-size:14px;\">\n                <span style=\"color:red\">有子因子的：输入0代表未检出，不填代表未检查此项</span>\n              </el-col>\n            </el-row>\n          </el-form-item>\n          <el-form-item>\n            <span slot=\"label\">\n              备注\n              <el-popover\n                placement=\"top-start\"\n                title=\"\"\n                width=\"300\"\n                trigger=\"hover\"\n                content=\"分析员录入结果时录入的备注信息，可流转到实验室负责人和报告部门\"\n              >\n                <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n              </el-popover>\n              :\n            </span>\n            <el-input v-model=\"testResultForm.remark\" type=\"textarea\" maxlength=\"50\" show-word-limit placeholder=\"备注信息\" :rows=\"3\" />\n          </el-form-item>\n          <el-form-item label=\"检测设备:\">\n            <el-row>\n              <el-col :span=\"8\">\n                <el-select v-model=\"equipmentType\" placeholder=\"设备分类\" style=\"width: 170px;\" @change=\"handleChangeEqu\">\n                  <el-option\n                    v-for=\"(item,index) in level\"\n                    :key=\"index\"\n                    :label=\"item.name\"\n                    :value=\"item.name\"\n                  />\n                </el-select>\n              </el-col>\n              <el-col :span=\"8\">\n                <el-select v-model=\"equipmentClass\" clearable placeholder=\"请选择设备型号\" style=\"width: 170px;\" @change=\"handleChangeEquType\">\n                  <el-option\n                    v-for=\"(item,index) in levelTwo\"\n                    :key=\"index\"\n                    :label=\"item.name\"\n                    :value=\"item.name\"\n                  />\n                </el-select>\n              </el-col>\n              <el-col :span=\"8\">\n                <el-select v-model=\"equipmentId\" clearable placeholder=\"请选择设备编号\" style=\"width: 170px;\">\n                  <el-option\n                    v-for=\"item in levelThree\"\n                    :key=\"item.id\"\n                    :label=\"item.equipmentNumber\"\n                    :value=\"item.id\"\n                  />\n                </el-select>\n\n              </el-col>\n            </el-row>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"testResultVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmChecks\">保存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport * as checkServer from '@/api/check'\nimport * as stockServer from '@/api/stock'\nimport { laboratoryEquipmentTree } from '@/api/equipment'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nconst CHECK_STATUS = {\n  '0': '待领样',\n  '1': '领样申请',\n  '2': '待检测',\n  '3': '已录入',\n  '4': '待审核',\n  '5': '审核通过',\n  '6': '审核失败'\n}\nexport default {\n  components: { Pagination },\n  filters: {\n    statusQualityFilter(status) {\n      if (status === '0' || status === '1' || status === '2' || status === '4') {\n        return 'info'\n      } else if (status === '3') {\n        return ''\n      } else if (status === '5') {\n        return 'success'\n      } else {\n        return 'danger'\n      }\n    }\n  },\n  props: {\n    checkTaskId: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      CHECK_STATUS,\n      checkData: [],\n      searchForm: {\n        smapItemId: '',\n        factorName: '',\n        checkStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      detailVisible: false,\n      sampleForm: {\n        factorInfo: {},\n        subFactors: {}\n      },\n\n      sampleVisible: false,\n      sampleDetails: [],\n      sampleDetailForm: {\n        factorName: '',\n        factorPoint: '',\n        secdClassName: '',\n        factorDataVos: [],\n        sampleDataVo: {\n          collectDate: '',\n          collectLocation: '',\n          imageList: [],\n          sampleData: [],\n          specialNote: ''\n        },\n        sampleJobVo: {\n          projectName: '',\n          jobRemark: ''\n        }\n      },\n\n      testResultVisible: false,\n      testResultForm: {\n        checkFactorId: '',\n        checkRes: '',\n        checkSubRes: '',\n        remark: ''\n      },\n      subFactorData: [],\n      currentSample: '',\n      sampleImageList: [],\n      sampleImage: '',\n      sampleDataInfo: [],\n      sampleSecInfo: [],\n      equipmentType: '',\n      equipmentClass: '',\n      equipmentId: '',\n      level: [],\n      levelTwo: [],\n      levelThree: []\n\n    }\n  },\n  computed: {\n    ...mapGetters(['userId'])\n  },\n  created() {\n    if (this.checkTaskId && this.checkTaskId.length > 0) {\n      this.searchForm.checkTaskId = this.checkTaskId\n    }\n    this.getEquipment()\n    this.handleSearch()\n  },\n  methods: {\n    handleSearch() {\n      if (this.checkTaskId && this.checkTaskId.length > 0) {\n        checkServer.findCheckTaskDetailByCondition1(this.searchForm).then(res => {\n          if (res.code === 200) {\n            this.checkData = res.result.records.map(i => {\n              if (i.checkRes && i.checkRes !== '') {\n                const ob = JSON.parse(i.checkRes)\n                this.$set(i, 'masterRes', ob.v1)\n                this.$set(i, 'exponRes', ob.v2)\n              } else {\n                this.$set(i, 'masterRes', 0)\n                this.$set(i, 'exponRes', 0)\n              }\n              return i\n            }) || []\n            this.total = res.result.total\n          }\n        })\n      }\n    },\n    handleDetail(row) {\n      this.sampleForm = { ...row }\n      if (row.factorSubsetVos && row.factorSubsetVos.length > 0) {\n        this.sampleForm.factorSubsetVos.forEach(i => {\n          const factorInfo = JSON.parse(i.checkSubRes)\n          this.$set(i, 'factorInfo', factorInfo)\n        })\n      }\n      if (row.checkRes && row.checkRes.length > 0) {\n        const factorInfo = JSON.parse(row.checkRes)\n        this.$set(this.sampleForm, 'factorInfo', factorInfo)\n      }\n      this.detailVisible = true\n    },\n    getEquipment() {\n      this.level = []\n      this.levelTwo = []\n      this.levelThree = []\n      laboratoryEquipmentTree().then(res => {\n        if (res.result) {\n          const treeData = res.result ? res.result : []\n          if (treeData !== '') {\n            this.level = treeData\n          }\n        }\n      })\n    },\n    handleLocalDetail(row) {\n      this.currentSample = row.sampleNo\n      this.sampleImageList = []\n      this.sampleImage = ''\n      var baseUrl = this.$store.getters.sysBaseUrl + '/cyImg/'\n      stockServer.getSampleDataBySampItemId(row.sampItemId).then(res => {\n        if (res.code === 200 && res.result) {\n          this.sampleDetailForm = res.result || {}\n          this.$nextTick(() => {\n            // 提取图片\n            this.sampleImageList = res.result.sampleDataVo.imageList.map(i => {\n              return baseUrl + i\n            })\n            // 二级类别\n            this.sampleSecInfo = res.result.sampleDataVo.sampleData || []\n\n            // 因子\n            this.sampleDataInfo = res.result.factorDataVos.filter(i => i.dataEntryStep === '1') || []\n          })\n          this.sampleVisible = true\n        }\n      })\n    },\n    goBack() {\n      this.$router.back()\n    },\n    handleSetResult(row) {\n      debugger\n      this.testResultForm = { ...row }\n      this.subFactorData = []\n      if (row.factorSubsetVos && row.factorSubsetVos.length > 0) {\n        this.subFactorData = row.factorSubsetVos.map(m => {\n          const subO = JSON.parse(m.checkSubRes)\n          return {\n            id: m.id,\n            name: m.factorName,\n            masterRes: subO ? subO.v1 : '',\n            subRes: subO ? subO.v2 : '',\n            unitName: m.unitName\n          }\n        })\n      } else {\n        const resObj = JSON.parse(row.checkRes)\n        this.subFactorData = [{\n          name: row.factorName,\n          masterRes: resObj ? resObj.v1 : '',\n          subRes: resObj ? resObj.v2 : '',\n          unitName: row.unitName\n        }]\n      }\n      const equObj = JSON.parse(row.checkEquipment)\n      if (equObj) {\n        this.equipmentType = equObj.equipmentName\n        this.equipmentClass = equObj.equipmentModel\n        this.equipmentId = equObj.id\n        this.handleChangeEqu(equObj.equipmentName)\n        this.handleChangeEquType(equObj.equipmentModel)\n      }\n      this.testResultVisible = true\n    },\n    handleApprove(id) {\n      this.$confirm('确认提交审核?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        checkServer.submitCheckFactor({ 'checkFactorId': id }).then(res => {\n          if (res.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            })\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            })\n          }\n        })\n      })\n    },\n    handleChangeEqu(val) {\n      this.levelTwo = []\n      this.levelThree = []\n      const o = this.level.find(i => i.name === val)\n      if (o) {\n        this.levelTwo = o.children || []\n      }\n    },\n    handleChangeEquType(val) {\n      this.levelThree = []\n      const o = this.levelTwo.find(i => i.name === val)\n      if (o) {\n        this.levelThree = o.children || []\n      }\n      debugger\n    },\n    confirmChecks() {\n      this.$confirm('确认提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const equipmentInfo = this.levelThree.find(i => i.id === this.equipmentId)\n\n        let data\n        if (this.testResultForm.isFactor === '0') { // 正常因子\n          const checkResInfo = {\n            name: this.subFactorData[0].name,\n            v1: this.subFactorData[0].masterRes,\n            v2: this.subFactorData[0].subRes\n          }\n          data = {\n            checkFactorId: this.testResultForm.checkFactorId,\n            checkRes: JSON.stringify(checkResInfo),\n            remark: this.testResultForm.remark,\n            checkEquipment: JSON.stringify(equipmentInfo)\n          }\n        } else {\n          const checkResInfo = this.subFactorData.map(i => {\n            const resInfo = {\n              name: i.name,\n              v1: i.masterRes,\n              v2: i.subRes\n            }\n            return {\n              id: i.id,\n              unitName: i.unitName,\n              checkSubRes: JSON.stringify(resInfo)\n            }\n          })\n          data = {\n            checkFactorId: this.testResultForm.checkFactorId,\n            checkRes: '',\n            factorSubsetVos: checkResInfo,\n            remark: this.testResultForm.remark,\n            checkEquipment: JSON.stringify(equipmentInfo)\n          }\n        }\n        checkServer.saveCheckFactorData(data).then(res => {\n          if (res.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            })\n            this.testResultVisible = false\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            })\n          }\n        })\n      })\n    }\n\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n  .block-flex {\n    position: relative;\n    display: flex;\n    &>div{\n      border: 1px solid #B7B7B7;\n      width: 100px;\n      margin: 0;\n      line-height: 30px;\n      text-align: center;\n    }\n    &>div:first-child {\n      background: #B7B7B7;\n    }\n  }\n  .card-left {\n    width: 100%;\n    min-height: 200px;\n    max-height: 400px;\n  }\n  .card-right {\n    width: 100%;\n    min-height: 200px;\n    max-height: 400px;\n  }\n  .el-card {\n    overflow: auto;\n  }\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n  /deep/ .el-input.is-disabled .el-input__inner {\n    color:unset\n  }\n  .demo-image__lazy {\n    height: 300px;\n    overflow-y: auto;\n  }\n  .demo-image__lazy .el-image {\n    display: block;\n    max-height: 300px;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n   .clearfix {\n    line-height: 40px;\n    display: flex;\n  }\n</style>\n"],"sourceRoot":"src/views/laboratory/components"}]}