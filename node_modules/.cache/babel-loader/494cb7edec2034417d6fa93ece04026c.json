{"remainingRequest":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjects\\vue-hj-platform\\src\\views\\system\\car\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjects\\vue-hj-platform\\src\\views\\system\\car\\index.vue","mtime":1637214064000},{"path":"F:\\webstormProjects\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjects\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjects\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\nvar carServer = _interopRequireWildcard(require(\"@/api/car\"));\n\nvar _validate = require(\"@/utils/validate\");\n\nvar dictServer = _interopRequireWildcard(require(\"@/api/dict\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar USE_STATUS = {\n  '0': '闲置中',\n  '1': '使用中',\n  '2': '维修中'\n};\nvar _default = {\n  components: {\n    Pagination: _Pagination.default\n  },\n  data: function data() {\n    var validatePhone = function validatePhone(rule, value, callback) {\n      if (value && value.length > 0) {\n        if ((0, _validate.validPhone)(value)) {\n          callback();\n        } else {\n          callback(new Error('输入正确的电话号码'));\n        }\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      USE_STATUS: USE_STATUS,\n      searchForm: {\n        carBaseNumber: '',\n        carNumber: '',\n        carStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      carData: [],\n      carDialogStatus: 'create',\n      carDialogVisible: false,\n      titleMap: {\n        edit: '修改车辆',\n        create: '新增车辆'\n      },\n      carForm: {\n        id: '',\n        carBaseNumber: '',\n        carNumber: '',\n        carType: '',\n        location: '',\n        repairTime: '',\n        remark: ''\n      },\n      carDisVisible: false,\n      disForm: {\n        carId: '',\n        carStatus: 0,\n        username: 0,\n        linkmethod: '',\n        location: ''\n      },\n      carRules: {\n        carBaseNumber: [{\n          required: true,\n          message: '请录入车辆编号',\n          trigger: 'blur'\n        }],\n        carNumber: [{\n          required: true,\n          message: '请录入车牌号',\n          trigger: 'blur'\n        }],\n        carType: [{\n          required: true,\n          message: '请录入品牌型号',\n          trigger: 'blur'\n        }],\n        location: [{\n          required: true,\n          message: '请录入当前位置',\n          trigger: 'blur'\n        }]\n      },\n      disRules: {\n        location: [{\n          required: true,\n          message: '请录入当前位置',\n          trigger: 'blur'\n        }],\n        username: [{\n          required: true,\n          message: '请录入使用人员',\n          trigger: 'blur'\n        }],\n        linkmethod: [{\n          required: true,\n          message: '请录联系电话',\n          trigger: 'blur'\n        }, {\n          required: true,\n          validator: validatePhone,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.handleSearch();\n  },\n  methods: {\n    getDicKey: function getDicKey(type, code) {\n      var _this = this;\n\n      dictServer.getDicKey(code).then(function (result) {\n        if (result.code === 200) {\n          _this[type] = result.result;\n        }\n      });\n    },\n    handleSearch: function handleSearch() {\n      var _this2 = this;\n\n      carServer.findByCondition(this.searchForm).then(function (res) {\n        if (res.code === 200) {\n          _this2.carData = res.result.records || [];\n          _this2.total = res.result.total;\n        }\n      });\n    },\n    handleDispatch: function handleDispatch(id) {\n      this.disForm = {\n        carId: id,\n        carStatus: 0,\n        username: '',\n        linkmethod: '',\n        location: ''\n      };\n      this.carDisVisible = true;\n    },\n    handleAdd: function handleAdd() {\n      this.clearForm();\n      this.carDialogStatus = 'create';\n      this.carDialogVisible = true;\n    },\n    handleUpdate: function handleUpdate(row) {\n      this.clearForm();\n      this.carForm.id = row.id;\n      this.carForm.carBaseNumber = row.carBaseNumber;\n      this.carForm.carNumber = row.carNumber;\n      this.carForm.carType = row.carType;\n      this.carForm.location = row.location;\n      this.carForm.repairTime = row.repairTime;\n      this.carForm.remark = row.remark; // 获取二级类别字典\n\n      this.carDialogStatus = 'edit';\n      this.carDialogVisible = true;\n    },\n    clearForm: function clearForm() {\n      this.carForm = {\n        id: '',\n        carBaseNumber: '',\n        carNumber: '',\n        carType: '',\n        location: '',\n        repairTime: '',\n        remark: ''\n      };\n    },\n    confirmDisDialog: function confirmDisDialog() {\n      var _this3 = this;\n\n      this.$refs.disForm.validate(function (valid) {\n        if (valid) {\n          carServer.carScheduling(_this3.disForm).then(function (request) {\n            _this3.$notify({\n              title: '成功',\n              message: request.message,\n              type: 'success'\n            });\n\n            _this3.handleSearch();\n\n            _this3.carDisVisible = false;\n\n            _this3.$refs.disForm.resetFields();\n          }).catch(function () {});\n        } else {\n          return false;\n        }\n      });\n    },\n    confirmDialog: function confirmDialog() {\n      var _this4 = this;\n\n      if (this.carDialogStatus === 'create') {\n        carServer.saveCar(this.carForm).then(function (result) {\n          if (result.code === 200) {\n            _this4.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this4.handleSearch();\n\n            _this4.carDialogVisible = false;\n          } else {\n            _this4.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      } else {\n        carServer.updateCar(this.carForm).then(function (result) {\n          if (result.code === 200) {\n            _this4.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this4.handleSearch();\n\n            _this4.carDialogVisible = false;\n          } else {\n            _this4.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      }\n    },\n    handleDelete: function handleDelete(id) {\n      var _this5 = this;\n\n      this.$confirm('是否确定删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        carServer.delEquipment(id).then(function (result) {\n          if (result.code === 200) {\n            _this5.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this5.handleSearch();\n          } else {\n            _this5.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      }).catch(function () {});\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"21\">\n          <el-form-item label=\"车辆编号:\">\n            <el-input v-model=\"searchForm.carBaseNumber\" style=\"width:165px\" placeholder=\"车辆编号\" />\n          </el-form-item>\n          <el-form-item label=\"车牌号:\">\n            <el-input v-model=\"searchForm.carNumber\" style=\"width:165px\" placeholder=\"车牌号\" />\n          </el-form-item>\n          <el-form-item label=\"车辆状态:\">\n            <el-select v-model=\"searchForm.carStatus\" clearable style=\"width:160px\" filterable placeholder=\"车辆状态\">\n              <el-option\n                v-for=\"item in Object.keys(USE_STATUS)\"\n                :key=\"item\"\n                :label=\"USE_STATUS[item]\"\n                :value=\"item\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"3\" class=\"search-right\">\n          <el-button type=\"text\" icon=\"el-icon-plus\" @click=\"handleAdd\">新增</el-button>\n          <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-table\n      stripe\n      :data=\"carData\"\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n      style=\"width: 100%\"\n    >\n      <template slot=\"empty\">\n        <div class=\"table_empty\">\n          <div class=\"empty_tips\">\n            <span>\n              暂无数据\n            </span>\n          </div>\n        </div>\n      </template>\n      <el-table-column type=\"index\" width=\"55\" label=\"序号\" align=\"center\" />\n      <el-table-column prop=\"carBaseNumber\" label=\"车辆编号\" align=\"center\" />\n      <el-table-column prop=\"carNumber\" label=\"车牌号\" align=\"center\" />\n      <el-table-column prop=\"carType\" label=\"品牌型号\" align=\"center\" />\n      <el-table-column prop=\"location\" label=\"当前位置\" align=\"center\" />\n      <el-table-column prop=\"repairTime\" label=\"维保时间\" align=\"center\" />\n      <el-table-column prop=\"carStatus\" label=\"车辆状态\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          {{ USE_STATUS[row.carStatus] }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"username\" label=\"使用人员\" align=\"center\" />\n\n      <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" />\n\n      <el-table-column fixed=\"right\" align=\"center\" width=\"130px\" label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" @click=\"handleUpdate(scope.row)\"> 编辑</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-button type=\"text\" @click=\"handleDelete(scope.row.id)\"> 删除</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-button type=\"text\" @click=\"handleDispatch(scope.row.id)\"> 调度</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n    <el-dialog :title=\"titleMap[carDialogStatus]\" :visible.sync=\"carDialogVisible\" width=\"600px\" center>\n      <div style=\"padding: 30px;\">\n        <el-form ref=\"carForm\" :model=\"carForm\" :rules=\"carRules\" label-width=\"100px\" style=\"\">\n          <el-row>\n            <el-col :span=\"24\">\n              <el-form-item prop=\"carBaseNumber\" label=\"车辆编号:\">\n                <el-input v-model=\"carForm.carBaseNumber\" placeholder=\"请录入车辆编号\" maxlength=\"25\" style=\"width: 80%;\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item prop=\"carNumber\" label=\"车牌号:\">\n                <el-input v-model=\"carForm.carNumber\" placeholder=\"请录入车牌号\" style=\"width: 80%;\" maxlength=\"25\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item prop=\"carType\" label=\"品牌型号:\">\n                <el-input v-model=\"carForm.carType\" placeholder=\"请录入品牌型号\" style=\"width: 80%;\" maxlength=\"25\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item prop=\"location\" label=\"当前位置:\">\n                <el-input v-model=\"carForm.location\" placeholder=\"当前位置\" style=\"width: 80%;\" maxlength=\"20\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item prop=\"repairTime\" label=\"维保日期:\">\n                <el-date-picker\n                  v-model=\"carForm.repairTime\"\n                  value-format=\"yyyy-MM-dd\"\n                  placeholder=\"维保日期\"\n                  style=\"width:80%\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item prop=\"remark\" label=\"备注:\">\n                <el-input v-model=\"carForm.remark\" type=\"textarea\" :rows=\"3\" placeholder=\"备注\" style=\"width: 80%;\" maxlength=\"50\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </el-form>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"carDialogVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmDialog\">确认</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"车辆调度\" :visible.sync=\"carDisVisible\" width=\"600px\" center>\n      <el-form ref=\"disForm\" :model=\"disForm\" :rules=\"disRules\" label-width=\"100px\" style=\"\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"车辆状态:\">\n              <el-radio-group v-model=\"disForm.carStatus\">\n                <el-radio :label=\"0\">闲置中</el-radio>\n                <el-radio :label=\"1\">使用中</el-radio>\n                <el-radio :label=\"2\">维修中</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item prop=\"location\" label=\"当前位置:\">\n              <el-input v-model=\"disForm.location\" placeholder=\"当前位置\" style=\"width: 80%;\" maxlength=\"20\" />\n            </el-form-item>\n          </el-col>\n          <el-col v-if=\"disForm.carStatus == 1\" :span=\"24\">\n            <el-form-item prop=\"username\" label=\"使用人员:\">\n              <el-input v-model=\"disForm.username\" placeholder=\"请录入使用人员\" style=\"width: 80%;\" maxlength=\"25\" />\n            </el-form-item>\n          </el-col>\n          <el-col v-if=\"disForm.carStatus == 1\" :span=\"24\">\n            <el-form-item prop=\"linkmethod\" label=\"联系电话:\">\n              <el-input v-model=\"disForm.linkmethod\" placeholder=\"请录联系电话\" style=\"width: 80%;\" maxlength=\"25\" />\n            </el-form-item>\n          </el-col>\n\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"carDisVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmDisDialog\">确认</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport Pagination from '@/components/Pagination'\nimport * as carServer from '@/api/car'\nimport { validPhone } from '@/utils/validate'\n\nconst USE_STATUS = {\n  '0': '闲置中',\n  '1': '使用中',\n  '2': '维修中'\n}\nimport * as dictServer from '@/api/dict'\nexport default {\n  components: { Pagination },\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (value && value.length > 0) {\n        if (validPhone(value)) {\n          callback()\n        } else {\n          callback(new Error('输入正确的电话号码'))\n        }\n      } else {\n        callback()\n      }\n    }\n    return {\n      USE_STATUS,\n      searchForm: {\n        carBaseNumber: '',\n        carNumber: '',\n        carStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      carData: [],\n      carDialogStatus: 'create',\n      carDialogVisible: false,\n      titleMap: {\n        edit: '修改车辆',\n        create: '新增车辆'\n      },\n      carForm: {\n        id: '',\n        carBaseNumber: '',\n        carNumber: '',\n        carType: '',\n        location: '',\n        repairTime: '',\n        remark: ''\n      },\n      carDisVisible: false,\n      disForm: {\n        carId: '',\n        carStatus: 0,\n        username: 0,\n        linkmethod: '',\n        location: ''\n      },\n      carRules: {\n        carBaseNumber: [{ required: true, message: '请录入车辆编号', trigger: 'blur' }],\n        carNumber: [{ required: true, message: '请录入车牌号', trigger: 'blur' }],\n        carType: [{ required: true, message: '请录入品牌型号', trigger: 'blur' }],\n        location: [{ required: true, message: '请录入当前位置', trigger: 'blur' }]\n      },\n      disRules: {\n        location: [{ required: true, message: '请录入当前位置', trigger: 'blur' }],\n        username: [{ required: true, message: '请录入使用人员', trigger: 'blur' }],\n        linkmethod: [{ required: true, message: '请录联系电话', trigger: 'blur' }, { required: true, validator: validatePhone, trigger: 'blur' }]\n      }\n    }\n  },\n  created() {\n    this.handleSearch()\n  },\n  methods: {\n    getDicKey(type, code) {\n      dictServer.getDicKey(code).then(result => {\n        if (result.code === 200) {\n          this[type] = result.result\n        }\n      })\n    },\n    handleSearch() {\n      carServer.findByCondition(this.searchForm).then(res => {\n        if (res.code === 200) {\n          this.carData = res.result.records || []\n          this.total = res.result.total\n        }\n      })\n    },\n    handleDispatch(id) {\n      this.disForm = {\n        carId: id,\n        carStatus: 0,\n        username: '',\n        linkmethod: '',\n        location: ''\n      }\n      this.carDisVisible = true\n    },\n    handleAdd() {\n      this.clearForm()\n      this.carDialogStatus = 'create'\n      this.carDialogVisible = true\n    },\n    handleUpdate(row) {\n      this.clearForm()\n      this.carForm.id = row.id\n      this.carForm.carBaseNumber = row.carBaseNumber\n      this.carForm.carNumber = row.carNumber\n      this.carForm.carType = row.carType\n      this.carForm.location = row.location\n      this.carForm.repairTime = row.repairTime\n      this.carForm.remark = row.remark\n      // 获取二级类别字典\n\n      this.carDialogStatus = 'edit'\n      this.carDialogVisible = true\n    },\n    clearForm() {\n      this.carForm = {\n        id: '',\n        carBaseNumber: '',\n        carNumber: '',\n        carType: '',\n        location: '',\n        repairTime: '',\n        remark: ''\n      }\n    },\n    confirmDisDialog() {\n      this.$refs.disForm.validate(valid => {\n        if (valid) {\n          carServer.carScheduling(this.disForm).then(request => {\n            this.$notify({\n              title: '成功',\n              message: request.message,\n              type: 'success'\n            })\n            this.handleSearch()\n            this.carDisVisible = false\n            this.$refs.disForm.resetFields()\n          }).catch(() => {})\n        } else {\n          return false\n        }\n      })\n    },\n    confirmDialog() {\n      if (this.carDialogStatus === 'create') {\n        carServer.saveCar(this.carForm).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.handleSearch()\n            this.carDialogVisible = false\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      } else {\n        carServer.updateCar(this.carForm).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.handleSearch()\n            this.carDialogVisible = false\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      }\n    },\n    handleDelete(id) {\n      this.$confirm('是否确定删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        carServer.delEquipment(id).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n</style>\n"],"sourceRoot":"src/views/system/car"}]}