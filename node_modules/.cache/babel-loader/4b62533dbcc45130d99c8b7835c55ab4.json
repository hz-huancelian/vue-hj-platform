{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\report\\components\\hisSignTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\report\\components\\hisSignTask.vue","mtime":1651676663000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\objectSpread2.js\"));\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\nvar reportServer = _interopRequireWildcard(require(\"@/api/report\"));\n\nvar _vuex = require(\"vuex\");\n\nvar _waves = _interopRequireDefault(require(\"@/directive/waves\"));\n\nvar _permission = _interopRequireDefault(require(\"@/utils/permission\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// waves directive\n// 权限判断函数\nvar _default = {\n  components: {\n    Pagination: _Pagination.default\n  },\n  directives: {\n    waves: _waves.default\n  },\n  filters: {\n    statusQualityFilter: function statusQualityFilter(status) {\n      if (status < 3) {\n        return 'info';\n      } else if (status < 6) {\n        return '';\n      } else if (status === '6') {\n        return 'success';\n      } else {\n        return 'danger';\n      }\n    }\n  },\n  data: function data() {\n    return {\n      searchForm: {\n        jobId: '',\n        projectName: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      reportData: [],\n      issueVisible: false,\n      issueForm: {\n        id: '',\n        auditFlag: '1',\n        remark: ''\n      }\n    };\n  },\n  computed: (0, _objectSpread2.default)({}, (0, _vuex.mapGetters)(['platformPositionId', 'userId'])),\n  created: function created() {\n    this.handleSearch();\n  },\n  methods: {\n    checkPermission: _permission.default,\n    handleSearch: function handleSearch() {\n      var _this = this;\n\n      reportServer.findReportSignByPage(this.searchForm).then(function (res) {\n        if (res.code === 200 && res.result) {\n          _this.reportData = res.result.records || [];\n          _this.total = res.result.total;\n        }\n      });\n    },\n    handleDetail: function handleDetail(row) {\n      var path = row.reportCode + '.pdf';\n      this.$router.push({\n        name: 'sysPdfView',\n        params: {\n          path: path,\n          type: 2\n        }\n      });\n    },\n    handleDownload: function handleDownload(row) {\n      var url = this.$store.getters.sysBaseUrl + '/file/report/' + row.reportFileId;\n      window.open(url);\n    },\n    handleOldDownload: function handleOldDownload(row) {\n      var url = this.$store.getters.sysBaseUrl + '/file/report/' + row.reportCode + '.docx';\n      window.open(url);\n    },\n    handleIssue: function handleIssue(row) {\n      this.issueForm.id = row.id;\n      this.issueForm.auditFlag = '1';\n      this.issueForm.remark = '';\n      this.issueVisible = true;\n    },\n    confirmIssueDialog: function confirmIssueDialog() {\n      var _this2 = this;\n\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        reportServer.reportIssue(_this2.issueForm).then(function (result) {\n          if (result.code === 200) {\n            _this2.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this2.issueVisible = false;\n\n            _this2.handleSearch();\n          } else {\n            _this2.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      }).catch(function () {});\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["hisSignTask.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"19\">\n          <el-form-item label=\"任务单号:\">\n            <el-input v-model=\"searchForm.jobId\" style=\"width:165px\" placeholder=\"任务单号\" />\n          </el-form-item>\n          <el-form-item label=\"项目名称:\">\n            <el-input v-model=\"searchForm.projectName\" style=\"width:165px\" placeholder=\"项目名称\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"5\" class=\"search-right\">\n          <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-table\n      border\n      :data=\"reportData\"\n      stripe\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n    >\n      <el-table-column type=\"index\" width=\"50\" label=\"序号\" align=\"center\" />\n      <el-table-column prop=\"reportCode\" label=\"报告编号\" width=\"140px\" align=\"center\" />\n      <el-table-column prop=\"jobId\" label=\"任务单号\" width=\"140px\" align=\"center\" />\n      <el-table-column prop=\"projectName\" label=\"项目名称\" align=\"center\" />\n      <el-table-column prop=\"consignorName\" label=\"委托单位\" align=\"center\" />\n      <el-table-column prop=\"inspectionName\" label=\"受检单位\" align=\"center\" />\n      <el-table-column prop=\"checkTime\" label=\"审核时间\" width=\"160px\" align=\"center\" />\n      <el-table-column label=\"操作\" align=\"center\" width=\"185px\">\n        <template slot-scope=\"{row}\">\n          <el-button type=\"text\" @click=\"handleDetail(row)\">查看</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-dropdown>\n            <span class=\"el-dropdown-link\">\n              更多<i class=\"el-icon-arrow-down el-icon--right\" />\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-link v-if=\"row.reportStatus>1\" :underline=\"false\" @click=\"handleDownload(row)\">\n                <el-dropdown-item>最新报告下载</el-dropdown-item>\n              </el-link>\n              <el-link v-if=\"row.reportStatus>1\" :underline=\"false\" @click=\"handleOldDownload(row)\">\n                <el-dropdown-item>原始报告下载</el-dropdown-item>\n              </el-link>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n    <el-dialog title=\"报告签发确认\" :visible.sync=\"issueVisible\" center>\n      <div style=\"width: 400px;margin:0 auto\">\n        <el-form :model=\"issueForm\" label-width=\"100px\">\n          <el-form-item label=\"审核结果:\">\n            <el-radio-group v-model=\"issueForm.auditFlag\">\n              <el-radio label=\"1\">通过</el-radio>\n              <el-radio label=\"2\">驳回</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item v-if=\"issueForm.auditFlag === '2'\" label=\"审核意见:\">\n            <el-input v-model=\"issueForm.auditReason\" type=\"textarea\" :rows=\"3\" maxlength=\"50\" show-word-limit placeholder=\"审核意见\" />\n          </el-form-item>\n        </el-form>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"issueVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmIssueDialog\">确认</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport Pagination from '@/components/Pagination'\nimport * as reportServer from '@/api/report'\nimport { mapGetters } from 'vuex'\nimport waves from '@/directive/waves' // waves directive\nimport checkPermission from '@/utils/permission' // 权限判断函数\nexport default {\n  components: { Pagination },\n  directives: { waves },\n  filters: {\n    statusQualityFilter(status) {\n      if (status < 3) {\n        return 'info'\n      } else if (status < 6) {\n        return ''\n      } else if (status === '6') {\n        return 'success'\n      } else {\n        return 'danger'\n      }\n    }\n  },\n  data() {\n    return {\n      searchForm: {\n        jobId: '',\n        projectName: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      reportData: [],\n      issueVisible: false,\n      issueForm: {\n        id: '',\n        auditFlag: '1',\n        remark: ''\n      }\n\n    }\n  },\n  computed: {\n    ...mapGetters(['platformPositionId', 'userId'])\n  },\n  created() {\n    this.handleSearch()\n  },\n  methods: {\n    checkPermission,\n    handleSearch() {\n      reportServer.findReportSignByPage(this.searchForm).then(res => {\n        if (res.code === 200 && res.result) {\n          this.reportData = res.result.records || []\n          this.total = res.result.total\n        }\n      })\n    },\n    handleDetail(row) {\n      const path = row.reportCode + '.pdf'\n      this.$router.push({ name: 'sysPdfView', params: { path: path, type: 2 }})\n    },\n    handleDownload(row) {\n      var url = this.$store.getters.sysBaseUrl + '/file/report/' + row.reportFileId\n      window.open(url)\n    },\n    handleOldDownload(row) {\n      var url = this.$store.getters.sysBaseUrl + '/file/report/' + row.reportCode + '.docx'\n      window.open(url)\n    },\n    handleIssue(row) {\n      this.issueForm.id = row.id\n      this.issueForm.auditFlag = '1'\n      this.issueForm.remark = ''\n      this.issueVisible = true\n    },\n\n    confirmIssueDialog() {\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        reportServer.reportIssue(this.issueForm).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.issueVisible = false\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      }).catch(() => {})\n    }\n\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n   .info-table-new {\n    font-size: 14px;\n    width: 100%;\n    text-align: center;\n    margin-top: 10px;\n    border-top: 1px solid #ececec;\n    border-left: 1px solid #ececec;\n    line-height: 35px;\n    td {\n      border-bottom: 1px solid #ececec;\n      border-right: 1px solid #ececec;\n      width: 25%;\n      height: 35px;\n      // &:nth-child(2n + 1) {\n      //   width: 25%;\n      //   background: #f5f5f5;\n      // }\n    }\n  }\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n  /deep/.hide .el-upload--picture-card {\n    display: none;\n  }\n</style>\n"],"sourceRoot":"src/views/report/components"}]}