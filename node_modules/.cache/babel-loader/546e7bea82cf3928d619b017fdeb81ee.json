{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\equipment\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\equipment\\index.vue","mtime":1652771312000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\nvar eqServer = _interopRequireWildcard(require(\"@/api/equipment\"));\n\nvar dictServer = _interopRequireWildcard(require(\"@/api/dict\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar DEV_STATUS = {\n  '0': '采样',\n  '1': '检测'\n};\nvar USE_STATUS = {\n  '0': '闲置中',\n  '1': '使用中',\n  '2': '维修中'\n};\nvar CHECK_STATUS = {\n  '0': '月',\n  '1': '季度',\n  '2': '半年',\n  '3': '年',\n  '4': '两年',\n  '5': '三年',\n  '6': '无需检定'\n};\nvar _default = {\n  components: {\n    Pagination: _Pagination.default\n  },\n  data: function data() {\n    return {\n      CHECK_STATUS: CHECK_STATUS,\n      DEV_STATUS: DEV_STATUS,\n      USE_STATUS: USE_STATUS,\n      searchForm: {\n        equipmentNumber: '',\n        equipmentName: '',\n        equipmentFirstType: '',\n        equipmentSecondType: '',\n        equipmentStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      devData: [],\n      devDialogStatus: 'create',\n      devDialogVisible: false,\n      titleMap: {\n        edit: '修改设备',\n        create: '新增设备'\n      },\n      devForm: {\n        id: '',\n        equipmentNumber: '',\n        equipmentName: '',\n        equipmentFirstType: '',\n        equipmentSecondType: '',\n        equipmentBrand: '',\n        equipmentModel: '',\n        checkCircle: '',\n        lastTime: '',\n        remark: ''\n      },\n      devRules: {\n        equipmentNumber: [{\n          required: true,\n          message: '请录入设备编号',\n          trigger: 'blur'\n        }],\n        equipmentName: [{\n          required: true,\n          message: '请录入设备名称',\n          trigger: 'blur'\n        }],\n        equipmentFirstType: [{\n          required: true,\n          message: '请选择检测对象',\n          trigger: 'change'\n        }],\n        equipmentSecondType: [{\n          required: true,\n          message: '请选择检测类别',\n          trigger: 'change'\n        }],\n        equipmentBrand: [{\n          required: true,\n          message: '请录入设备品牌',\n          trigger: 'blur'\n        }],\n        equipmentModel: [{\n          required: true,\n          message: '请录入设备型号',\n          trigger: 'blur'\n        }],\n        checkCircle: [{\n          required: true,\n          message: '请选择检定周期',\n          trigger: 'change'\n        }]\n      },\n      classArray: [],\n      secClassArray: [],\n      secOtherArray: [],\n      devTypeArray: [],\n      // 查询一类\n      classId: '',\n      uploadVisible: false,\n      excelFileList: [],\n      fileResult: ''\n    };\n  },\n  created: function created() {\n    // this.getDicKey('devTypeArray', 1004)\n    // this.getDicKey('secOtherArray', 1005)\n    this.getFirstEquipment();\n    this.getClassList();\n    this.handleSearch();\n  },\n  methods: {\n    getDicKey: function getDicKey(type, code) {\n      var _this = this;\n\n      dictServer.getDicKey(code).then(function (result) {\n        if (result.code === 200) {\n          _this[type] = result.result;\n        }\n      });\n    },\n    getFirstEquipment: function getFirstEquipment() {\n      var _this2 = this;\n\n      eqServer.findEquipmentFirstType().then(function (result) {\n        _this2.devTypeArray = result.result || [];\n        _this2.classArray = result.result || [];\n      });\n    },\n    getSecdEquipment: function getSecdEquipment(val) {\n      var _this3 = this;\n\n      this.secOtherArray = [];\n      this.secClassArray = [];\n      this.devForm.equipmentSecondType = '';\n\n      if (val && val !== '100404') {\n        eqServer.findEquipmentSecondType(val).then(function (result) {\n          _this3.secOtherArray = result.result || [];\n          _this3.secClassArray = result.result || [];\n        });\n      }\n    },\n    getSearchSecdInfo: function getSearchSecdInfo(val) {\n      var _this4 = this;\n\n      this.secOtherArray = [];\n      this.searchForm.equipmentSecondType = '';\n\n      if (this.searchForm.equipmentFirstType !== '100404' && val) {\n        eqServer.findEquipmentSecondType(val).then(function (result) {\n          _this4.secOtherArray = result.result || [];\n        });\n      }\n    },\n    getClassList: function getClassList() {\n      var _this5 = this;\n\n      dictServer.findFstClasses().then(function (res) {\n        _this5.classArray = res.result || [];\n      });\n    },\n    findSecClass: function findSecClass(val) {\n      var _this6 = this;\n\n      this.secdClassId = '';\n      dictServer.findSecdClassByClassId(val).then(function (res) {\n        _this6.secClassArray = res.result || [];\n      });\n    },\n    handleSearch: function handleSearch() {\n      var _this7 = this;\n\n      eqServer.findByCondition(this.searchForm).then(function (res) {\n        if (res.code === 200) {\n          _this7.devData = res.result.records || [];\n          _this7.total = res.result.total;\n        }\n      });\n    },\n    handleAdd: function handleAdd() {\n      this.clearForm();\n      this.secOtherArray = [];\n      this.devDialogStatus = 'create';\n      this.devDialogVisible = true;\n    },\n    handleUpdate: function handleUpdate(row) {\n      var _this8 = this;\n\n      this.clearForm();\n      this.devForm.id = row.id;\n      this.devForm.equipmentNumber = row.equipmentNumber;\n      this.devForm.equipmentName = row.equipmentName;\n      this.devForm.equipmentFirstType = row.equipmentFirstType;\n      this.devForm.equipmentSecondType = row.equipmentSecondType;\n      this.devForm.equipmentBrand = row.equipmentBrand;\n      this.devForm.equipmentModel = row.equipmentModel;\n      this.devForm.checkCircle = row.checkCircle;\n      this.devForm.checkDate = row.checkDate;\n      this.devForm.remark = row.remark; // 获取二级类别字典\n\n      if (row.equipmentFirstType && row.equipmentFirstType !== '100404') {\n        eqServer.findEquipmentSecondType(row.equipmentFirstType).then(function (result) {\n          _this8.secOtherArray = result.result || [];\n          _this8.secClassArray = result.result || [];\n\n          _this8.$nextTick(function () {\n            _this8.devForm.equipmentSecondType = row.equipmentSecondType;\n          });\n        });\n      }\n\n      this.devDialogStatus = 'edit';\n      this.devDialogVisible = true;\n    },\n    clearForm: function clearForm() {\n      this.devForm = {\n        id: '',\n        equipmentNumber: '',\n        equipmentName: '',\n        equipmentFirstType: '',\n        equipmentSecondType: '',\n        equipmentBrand: '',\n        equipmentModel: '',\n        checkCircle: '',\n        checkDate: '',\n        remark: ''\n      };\n    },\n    confirmDialog: function confirmDialog() {\n      var _this9 = this;\n\n      if (this.devDialogStatus === 'create') {\n        eqServer.saveEquipment(this.devForm).then(function (result) {\n          if (result.code === 200) {\n            _this9.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this9.handleSearch();\n\n            _this9.devDialogVisible = false;\n          } else {\n            _this9.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      } else {\n        eqServer.updateEquipment(this.devForm).then(function (result) {\n          if (result.code === 200) {\n            _this9.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this9.handleSearch();\n\n            _this9.devDialogVisible = false;\n          } else {\n            _this9.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      }\n    },\n    handleDelete: function handleDelete(id) {\n      var _this10 = this;\n\n      this.$confirm('是否确定删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        eqServer.delEquipment(id).then(function (result) {\n          if (result.code === 200) {\n            _this10.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this10.handleSearch();\n          } else {\n            _this10.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      }).catch(function () {});\n    },\n    handleDownloadTep: function handleDownloadTep() {\n      var url = this.$store.getters.sysBaseUrl + '/api/dataImport/downloadEquipmentExcel';\n      window.open(url);\n    },\n    handleDownload: function handleDownload() {\n      var url = this.$store.getters.sysBaseUrl + '/api/dataImport/exportEquipment?equipmentNumber=&equipmentName=&equipmentFirstType=&equipmentSecondType=';\n      window.open(url);\n    },\n    customUploadChange: function customUploadChange(file) {\n      if (file.status === 'ready') return;\n\n      if (file.status === 'success') {\n        var res = file.response || {};\n\n        if (res && res.code === 200) {\n          this.fileResult = file.response.result;\n          this.$message({\n            type: 'success',\n            message: file.response.message\n          });\n          this.handleSearch();\n          this.uploadVisible = false;\n        } else {\n          this.$message.error('上传失败!');\n          this.excelFileList = [];\n        }\n      } else {\n        this.$message.error('上传失败!');\n        this.excelFileList = [];\n      }\n    },\n    handleUpload: function handleUpload() {\n      this.uploadVisible = true;\n      this.excelFileList = [];\n      this.fileResult = '';\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"18\">\n          <el-form-item label=\"设备编号:\">\n            <el-input v-model=\"searchForm.equipmentNumber\" style=\"width:165px\" placeholder=\"设备编号\" />\n          </el-form-item>\n          <el-form-item label=\"设备名称:\">\n            <el-input v-model=\"searchForm.equipmentName\" style=\"width:165px\" placeholder=\"设备名称\" />\n          </el-form-item>\n          <el-form-item label=\"设备类别:\">\n            <el-select v-model=\"searchForm.equipmentFirstType\" clearable style=\"width:160px\" filterable placeholder=\"设备类别\" @change=\"getSearchSecdInfo\">\n              <el-option\n                v-for=\"item in devTypeArray\"\n                :key=\"item.dictKey\"\n                :label=\"item.dictVal\"\n                :value=\"item.dictKey\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item v-if=\"searchForm.equipmentFirstType != '100404'\" label=\"检测类别:\">\n            <el-select v-model=\"searchForm.equipmentSecondType\" clearable style=\"width:160px\" filterable placeholder=\"检测类别\">\n              <el-option\n                v-for=\"item in secOtherArray\"\n                :key=\"item.dictKey\"\n                :label=\"item.dictVal\"\n                :value=\"item.dictKey\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleSearch\"> 查询</el-button>\n            <!-- <el-button type=\"primary\" @click=\"handleDownload\"> 导出</el-button> -->\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\" class=\"search-right\">\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-plus\" @click=\"handleAdd\">新增</el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-upload2\" @click=\"handleUpload\">批量导入</el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-download\" @click=\"handleDownload\">导出</el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-table\n      stripe\n      border\n      :data=\"devData\"\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n      style=\"width: 100%\"\n    >\n      <template slot=\"empty\">\n        <div class=\"table_empty\">\n          <div class=\"empty_tips\">\n            <span>\n              暂无数据\n            </span>\n          </div>\n        </div>\n      </template>\n      <el-table-column type=\"index\" width=\"55\" label=\"序号\" align=\"center\" />\n      <el-table-column prop=\"equipmentNumber\" label=\"设备编号\" align=\"center\" />\n      <el-table-column prop=\"equipmentName\" label=\"设备名称\" align=\"center\" />\n      <el-table-column prop=\"equipmentFirstTypeVal\" label=\"设备类别\" align=\"center\" />\n      <el-table-column prop=\"equipmentSecondTypeVal\" label=\"检测类别\" align=\"center\" />\n      <el-table-column prop=\"equipmentBrand\" label=\"设备品牌\" align=\"center\" />\n      <el-table-column prop=\"equipmentModel\" label=\"设备型号\" align=\"center\" />\n      <el-table-column prop=\"checkDate\" label=\"上次检定日期\" align=\"center\" />\n      <el-table-column prop=\"checkCircle\" label=\"检定周期\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          {{ CHECK_STATUS[row.checkCircle] }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" />\n\n      <el-table-column fixed=\"right\" align=\"center\" label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" @click=\"handleUpdate(scope.row)\"> 编辑</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-button type=\"text\" @click=\"handleDelete(scope.row.id)\"> 删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n    <el-dialog :title=\"titleMap[devDialogStatus]\" :visible.sync=\"devDialogVisible\" width=\"65%\" center :close-on-click-modal=\"false\">\n      <el-form ref=\"devForm\" :model=\"devForm\" :rules=\"devRules\" label-width=\"120px\">\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"equipmentNumber\" label=\"设备编号:\">\n              <el-input v-model=\"devForm.equipmentNumber\" placeholder=\"设备编号\" maxlength=\"25\" style=\"width: 80%;\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"equipmentName\">\n              <span slot=\"label\">\n                设备名称\n                <el-popover\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"300\"\n                  trigger=\"hover\"\n                  content=\"检测机构内部对该设备的命名：如气相色谱仪、液相色谱仪、便携式PH仪\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>\n                :\n              </span>\n              <el-input v-model=\"devForm.equipmentName\" placeholder=\"设备名称不能为空\" style=\"width: 80%;\" maxlength=\"25\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"equipmentFirstType\" label=\"设备类别:\">\n              <el-select v-model=\"devForm.equipmentFirstType\" placeholder=\"设备类别不能为空\" style=\"width: 80%;\" @change=\"getSecdEquipment\">\n                <el-option\n                  v-for=\"item in devTypeArray\"\n                  :key=\"item.dictKey\"\n                  :label=\"item.dictVal\"\n                  :value=\"item.dictKey\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item v-if=\"devForm.equipmentFirstType !== '100404'\" prop=\"equipmentSecondType\" label=\"检测类别:\">\n              <el-select v-model=\"devForm.equipmentSecondType\" placeholder=\"检测类别不能为空\" style=\"width: 80%;\">\n                <el-option\n                  v-for=\"item in secOtherArray\"\n                  :key=\"item.dictKey\"\n                  :label=\"item.dictVal\"\n                  :value=\"item.dictKey\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"equipmentBrand\" label=\"设备品牌:\">\n              <el-input v-model=\"devForm.equipmentBrand\" placeholder=\"设备品牌\" style=\"width: 80%;\" maxlength=\"20\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"equipmentModel\" label=\"设备型号:\">\n              <el-input v-model=\"devForm.equipmentModel\" placeholder=\"设备型号\" style=\"width: 80%;\" maxlength=\"10\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"checkDate\" label=\"上次检定日期:\">\n              <el-date-picker\n                v-model=\"devForm.checkDate\"\n                type=\"date\"\n                value-format=\"yyyy-MM-dd\"\n                placeholder=\"上次检定日期\"\n                style=\"width: 80%\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"checkCircle\" label=\"检定周期:\">\n              <el-select v-model=\"devForm.checkCircle\" clearable style=\"width:80%;\" filterable placeholder=\"检定周期\">\n                <el-option\n                  v-for=\"item in Object.keys(CHECK_STATUS)\"\n                  :key=\"item\"\n                  :label=\"CHECK_STATUS[item]\"\n                  :value=\"item\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item prop=\"remark\" label=\"备注:\">\n              <el-input v-model=\"devForm.remark\" type=\"textarea\" :rows=\"3\" placeholder=\"备注\" style=\"width: 92%;\" maxlength=\"50\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"devDialogVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmDialog\">确认</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- <el-dialog title=\"文件上传\" :visible.sync=\"uploadVisible\" center>\n      <el-form>\n        <el-form-item>\n          <el-upload\n            class=\"upload-demo\"\n            action=\"/api/dataImport/uploadEquipent\"\n            :on-change=\"customUploadChange\"\n            :file-list=\"excelFileList\"\n            accept=\".xlsx,.xls\"\n            :limit=\"1\"\n            style=\"width: 300px;\"\n          >\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n            <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:red;\">您只能上传.xlsx,.xls格式的文件</div>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"uploadVisible=false\">关闭</el-button>\n      </div>\n    </el-dialog> -->\n\n    <el-dialog title=\"批量导入设备\" :visible.sync=\"uploadVisible\" append-to-body width=\"53%\">\n      <div class=\"block\">\n        <el-timeline>\n          <el-timeline-item size=\"large\">\n            <span slot=\"dot\" class=\"time-dot\">\n              1\n            </span>\n            <el-row>\n              <el-col :span=\"24\">\n                下载模板，批量填写设备信息\n              </el-col>\n            </el-row>\n            <el-row style=\"padding-top:10px;\">\n              <el-col :span=\"24\">\n                <el-button size=\"mini\" type=\"primary\" @click=\"handleDownloadTep()\">模板下载</el-button>\n              </el-col>\n            </el-row>\n          </el-timeline-item>\n          <el-timeline-item size=\"large\">\n            <span slot=\"dot\" class=\"time-dot\">\n              2\n            </span>\n            <el-row>\n              <el-col :span=\"24\">\n                上传填写好的设备信息表格\n              </el-col>\n            </el-row>\n            <el-row style=\"padding-top:10px;\">\n              <el-col :span=\"24\">\n                <el-upload\n                  class=\"upload-demo\"\n                  action=\"/api/dataImport/uploadEquipent\"\n                  :on-change=\"customUploadChange\"\n                  :file-list=\"excelFileList\"\n                  accept=\".xlsx,.xls\"\n                  :limit=\"1\"\n                  style=\"width: 300px;\"\n                >\n                  <el-button size=\"mini\" type=\"primary\">点击上传</el-button>\n                  <!-- <div class=\"el-upload__text\"><em>点击上传</em></div> -->\n                  <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:red;\">您只能上传.xlsx,.xls格式的文件</div>\n                </el-upload>\n              </el-col>\n            </el-row>\n          </el-timeline-item>\n        </el-timeline>\n        <el-row>\n          <el-col :span=\"24\" style=\"\">\n            <span style=\"color:red; font-size: 13px\">备注：批量导入设备功能，只会将上传的设备信息列表内的设备新增到系统内，不对原有设备信息做任何替换或修改。\n\n            </span>\n          </el-col>\n        </el-row>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport Pagination from '@/components/Pagination'\nimport * as eqServer from '@/api/equipment'\nconst DEV_STATUS = {\n  '0': '采样',\n  '1': '检测'\n}\nconst USE_STATUS = {\n  '0': '闲置中',\n  '1': '使用中',\n  '2': '维修中'\n}\nconst CHECK_STATUS = {\n  '0': '月',\n  '1': '季度',\n  '2': '半年',\n  '3': '年',\n  '4': '两年',\n  '5': '三年',\n  '6': '无需检定'\n}\nimport * as dictServer from '@/api/dict'\nexport default {\n  components: { Pagination },\n  data() {\n    return {\n      CHECK_STATUS,\n      DEV_STATUS,\n      USE_STATUS,\n      searchForm: {\n        equipmentNumber: '',\n        equipmentName: '',\n        equipmentFirstType: '',\n        equipmentSecondType: '',\n        equipmentStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      devData: [],\n      devDialogStatus: 'create',\n      devDialogVisible: false,\n      titleMap: {\n        edit: '修改设备',\n        create: '新增设备'\n      },\n      devForm: {\n        id: '',\n        equipmentNumber: '',\n        equipmentName: '',\n        equipmentFirstType: '',\n        equipmentSecondType: '',\n        equipmentBrand: '',\n        equipmentModel: '',\n        checkCircle: '',\n        lastTime: '',\n        remark: ''\n      },\n      devRules: {\n        equipmentNumber: [{ required: true, message: '请录入设备编号', trigger: 'blur' }],\n        equipmentName: [{ required: true, message: '请录入设备名称', trigger: 'blur' }],\n        equipmentFirstType: [{ required: true, message: '请选择检测对象', trigger: 'change' }],\n        equipmentSecondType: [{ required: true, message: '请选择检测类别', trigger: 'change' }],\n        equipmentBrand: [{ required: true, message: '请录入设备品牌', trigger: 'blur' }],\n        equipmentModel: [{ required: true, message: '请录入设备型号', trigger: 'blur' }],\n        checkCircle: [{ required: true, message: '请选择检定周期', trigger: 'change' }]\n      },\n      classArray: [],\n      secClassArray: [],\n      secOtherArray: [],\n      devTypeArray: [], // 查询一类\n      classId: '',\n      uploadVisible: false,\n      excelFileList: [],\n      fileResult: ''\n    }\n  },\n  created() {\n    // this.getDicKey('devTypeArray', 1004)\n    // this.getDicKey('secOtherArray', 1005)\n    this.getFirstEquipment()\n    this.getClassList()\n    this.handleSearch()\n  },\n  methods: {\n    getDicKey(type, code) {\n      dictServer.getDicKey(code).then(result => {\n        if (result.code === 200) {\n          this[type] = result.result\n        }\n      })\n    },\n    getFirstEquipment() {\n      eqServer.findEquipmentFirstType().then(result => {\n        this.devTypeArray = result.result || []\n        this.classArray = result.result || []\n      })\n    },\n    getSecdEquipment(val) {\n      this.secOtherArray = []\n      this.secClassArray = []\n      this.devForm.equipmentSecondType = ''\n      if (val && val !== '100404') {\n        eqServer.findEquipmentSecondType(val).then(result => {\n          this.secOtherArray = result.result || []\n          this.secClassArray = result.result || []\n        })\n      }\n    },\n    getSearchSecdInfo(val) {\n      this.secOtherArray = []\n      this.searchForm.equipmentSecondType = ''\n      if (this.searchForm.equipmentFirstType !== '100404' && val) {\n        eqServer.findEquipmentSecondType(val).then(result => {\n          this.secOtherArray = result.result || []\n        })\n      }\n    },\n    getClassList() {\n      dictServer.findFstClasses().then(res => {\n        this.classArray = res.result || []\n      })\n    },\n    findSecClass(val) {\n      this.secdClassId = ''\n      dictServer.findSecdClassByClassId(val).then(res => {\n        this.secClassArray = res.result || []\n      })\n    },\n    handleSearch() {\n      eqServer.findByCondition(this.searchForm).then(res => {\n        if (res.code === 200) {\n          this.devData = res.result.records || []\n          this.total = res.result.total\n        }\n      })\n    },\n    handleAdd() {\n      this.clearForm()\n      this.secOtherArray = []\n      this.devDialogStatus = 'create'\n      this.devDialogVisible = true\n    },\n    handleUpdate(row) {\n      this.clearForm()\n      this.devForm.id = row.id\n      this.devForm.equipmentNumber = row.equipmentNumber\n      this.devForm.equipmentName = row.equipmentName\n      this.devForm.equipmentFirstType = row.equipmentFirstType\n      this.devForm.equipmentSecondType = row.equipmentSecondType\n      this.devForm.equipmentBrand = row.equipmentBrand\n      this.devForm.equipmentModel = row.equipmentModel\n      this.devForm.checkCircle = row.checkCircle\n      this.devForm.checkDate = row.checkDate\n      this.devForm.remark = row.remark\n      // 获取二级类别字典\n      if (row.equipmentFirstType && row.equipmentFirstType !== '100404') {\n        eqServer.findEquipmentSecondType(row.equipmentFirstType).then(result => {\n          this.secOtherArray = result.result || []\n          this.secClassArray = result.result || []\n          this.$nextTick(() => {\n            this.devForm.equipmentSecondType = row.equipmentSecondType\n          })\n        })\n      }\n\n      this.devDialogStatus = 'edit'\n      this.devDialogVisible = true\n    },\n    clearForm() {\n      this.devForm = {\n        id: '',\n        equipmentNumber: '',\n        equipmentName: '',\n        equipmentFirstType: '',\n        equipmentSecondType: '',\n        equipmentBrand: '',\n        equipmentModel: '',\n        checkCircle: '',\n        checkDate: '',\n        remark: ''\n      }\n    },\n    confirmDialog() {\n      if (this.devDialogStatus === 'create') {\n        eqServer.saveEquipment(this.devForm).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.handleSearch()\n            this.devDialogVisible = false\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      } else {\n        eqServer.updateEquipment(this.devForm).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.handleSearch()\n            this.devDialogVisible = false\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      }\n    },\n    handleDelete(id) {\n      this.$confirm('是否确定删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        eqServer.delEquipment(id).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      }).catch(() => {})\n    },\n\n    handleDownloadTep() {\n      const url = this.$store.getters.sysBaseUrl + '/api/dataImport/downloadEquipmentExcel'\n      window.open(url)\n    },\n    handleDownload() {\n      const url = this.$store.getters.sysBaseUrl + '/api/dataImport/exportEquipment?equipmentNumber=&equipmentName=&equipmentFirstType=&equipmentSecondType='\n      window.open(url)\n    },\n    customUploadChange(file) {\n      if (file.status === 'ready') return\n      if (file.status === 'success') {\n        const res = file.response || {}\n        if (res && res.code === 200) {\n          this.fileResult = file.response.result\n          this.$message({\n            type: 'success',\n            message: file.response.message\n          })\n          this.handleSearch()\n          this.uploadVisible = false\n        } else {\n          this.$message.error('上传失败!')\n          this.excelFileList = []\n        }\n      } else {\n        this.$message.error('上传失败!')\n        this.excelFileList = []\n      }\n    },\n    handleUpload() {\n      this.uploadVisible = true\n      this.excelFileList = []\n      this.fileResult = ''\n    }\n\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .time-dot {\n    text-align: center;\n    justify-content: center;\n    padding-top: 4px;\n    position: relative;\n    border-radius: 50%;\n    background: #dfe4ed;\n    height: 25px;\n    width: 25px;\n    left: -7px;\n  }\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n</style>\n"],"sourceRoot":"src/views/equipment"}]}