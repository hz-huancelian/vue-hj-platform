{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\profile\\index_old.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\profile\\index_old.vue","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.array.find\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\objectSpread2.js\"));\n\nvar _vuex = require(\"vuex\");\n\nvar deptServer = _interopRequireWildcard(require(\"@/api/dept\"));\n\nvar userServer = _interopRequireWildcard(require(\"@/api/user\"));\n\nvar _validate = require(\"@/utils/validate\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  components: {},\n  data: function data() {\n    var validatePhone = function validatePhone(rule, value, callback) {\n      if (value && value.length > 0) {\n        if ((0, _validate.validPhone)(value)) {\n          callback();\n        } else {\n          callback(new Error('输入正确的电话号码'));\n        }\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      departmentArray: [],\n      roleList: [],\n      userForm: {\n        userId: '',\n        username: '',\n        empCode: '',\n        deptId: '',\n        empName: '',\n        phone: '',\n        platformPositionId: ''\n      },\n      userRules: {\n        empName: [{\n          required: true,\n          message: '请录入用户姓名',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请录入联系方式',\n          trigger: 'blur'\n        }, {\n          required: true,\n          validator: validatePhone,\n          trigger: 'blur'\n        }]\n      },\n      postionArray: {},\n      deptArray: []\n    };\n  },\n  computed: (0, _objectSpread2.default)({}, (0, _vuex.mapGetters)(['userInfo'])),\n  created: function created() {\n    if (this.userInfo.deptId === '-1') {\n      this.handleChange(-1);\n    } else {\n      this.getDeptTreeList();\n    }\n\n    this.userForm.userId = this.userInfo.userId;\n    this.userForm.username = this.userInfo.username;\n    this.userForm.platformPositionId = this.userInfo.platformPositionId;\n    this.userForm.deptId = this.userInfo.deptId;\n    this.userForm.empCode = this.userInfo.empCode;\n    this.userForm.empName = this.userInfo.empName;\n    this.userForm.phone = this.userInfo.phone;\n  },\n  methods: {\n    getDeptTreeList: function getDeptTreeList() {\n      var _this = this;\n\n      deptServer.getDeptList().then(function (res) {\n        if (res.result) {\n          _this.deptArray = res.result || [];\n          var o = res.result.find(function (i) {\n            return i.id === _this.userInfo.deptId;\n          });\n\n          _this.handleChange(o.platformDeptId);\n        }\n      });\n    },\n    handleChange: function handleChange(platformDeptId) {\n      var _this2 = this;\n\n      deptServer.dpfindPositionIdByDeptId(platformDeptId).then(function (res) {\n        _this2.$nextTick(function () {\n          _this2.postionArray = res.result || {};\n        });\n      });\n    },\n    onSubmit: function onSubmit() {\n      var _this3 = this;\n\n      this.$refs.userForm.validate(function (valid) {\n        if (valid) {\n          var data = {\n            userId: _this3.userForm.userId,\n            empName: _this3.userForm.empName,\n            phone: _this3.userForm.phone\n          };\n          debugger;\n          userServer.editUserById(data).then(function (request) {\n            if (request.code === 200) {\n              _this3.$notify({\n                title: '成功',\n                message: request.message,\n                type: 'success'\n              });\n\n              _this3.$router.back();\n            } else {\n              _this3.$notify({\n                title: '失败',\n                message: request.message,\n                type: 'error'\n              });\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    goBack: function goBack() {\n      this.$router.back();\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["index_old.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"create-container\">\n    <el-form ref=\"userForm\" :model=\"userForm\" :rules=\"userRules\" label-width=\"100px\">\n      <el-form-item label=\"登录账号:\" prop=\"username\">\n        <el-input v-model=\"userForm.username\" :disabled=\"true\" style=\"width:300px\" />\n      </el-form-item>\n      <el-form-item v-if=\"!userForm.deptId==='-1'\" label=\"所属部门:\" prop=\"username\">\n        <el-select\n          v-model=\"userForm.deptId\"\n          clearable\n          filterable\n          style=\"width: 300px\"\n          :disabled=\"true\"\n        >\n          <el-option\n            v-for=\"item in deptArray\"\n            :key=\"item.id\"\n            :label=\"item.deptName\"\n            :value=\"item.id\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item v-if=\"!userForm.deptId==='-1'\" prop=\"platformPositionId\" label=\"岗位:\">\n        <el-select\n          v-model=\"userForm.platformPositionId\"\n          filterable\n          style=\"width: 300px\"\n          :disabled=\"true\"\n        >\n          <el-option\n            v-for=\"item in Object.keys(postionArray)\"\n            :key=\"item\"\n            :label=\"postionArray[item]\"\n            :value=\"item\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"用户名称:\" prop=\"empName\">\n        <el-input v-model=\"userForm.empName\" maxlength=\"15\" style=\"width:300px\" />\n      </el-form-item>\n      <el-form-item label=\"联系方式\" prop=\"phone\">\n        <el-input v-model=\"userForm.phone\" maxlength=\"11\" style=\"width:300px\" />\n      </el-form-item>\n\n      <el-form-item style=\"margin-top: 50px\">\n        <el-button\n          class=\"iconfont icon-right_circle\"\n          type=\"primary\"\n          @click=\"onSubmit\"\n        >保 存</el-button>\n        <el-button type class=\"iconfont icon-fanhui\" @click=\"goBack\">返 回</el-button>\n        <!-- <el-button class=\"iconfont icon-zhongzhi1\" @click=\"resetForm('userForm')\">重置</el-button> -->\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport * as deptServer from '@/api/dept'\nimport * as userServer from '@/api/user'\nimport { validPhone } from '@/utils/validate'\nexport default {\n  components: {},\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (value && value.length > 0) {\n        if (validPhone(value)) {\n          callback()\n        } else {\n          callback(new Error('输入正确的电话号码'))\n        }\n      } else {\n        callback()\n      }\n    }\n    return {\n      departmentArray: [],\n      roleList: [],\n      userForm: {\n        userId: '',\n        username: '',\n        empCode: '',\n        deptId: '',\n        empName: '',\n        phone: '',\n        platformPositionId: ''\n      },\n      userRules: {\n        empName: [{ required: true, message: '请录入用户姓名', trigger: 'blur' }],\n        phone: [{ required: true, message: '请录入联系方式', trigger: 'blur' }, { required: true, validator: validatePhone, trigger: 'blur' }]\n      },\n      postionArray: {},\n      deptArray: []\n    }\n  },\n  computed: {\n    ...mapGetters(['userInfo'])\n  },\n  created() {\n    if (this.userInfo.deptId === '-1') {\n      this.handleChange(-1)\n    } else {\n      this.getDeptTreeList()\n    }\n    this.userForm.userId = this.userInfo.userId\n    this.userForm.username = this.userInfo.username\n    this.userForm.platformPositionId = this.userInfo.platformPositionId\n    this.userForm.deptId = this.userInfo.deptId\n    this.userForm.empCode = this.userInfo.empCode\n    this.userForm.empName = this.userInfo.empName\n    this.userForm.phone = this.userInfo.phone\n  },\n  methods: {\n    getDeptTreeList() {\n      deptServer.getDeptList().then(res => {\n        if (res.result) {\n          this.deptArray = res.result || []\n          const o = res.result.find(i => i.id === this.userInfo.deptId)\n          this.handleChange(o.platformDeptId)\n        }\n      })\n    },\n    handleChange(platformDeptId) {\n      deptServer.dpfindPositionIdByDeptId(platformDeptId).then(res => {\n        this.$nextTick(() => {\n          this.postionArray = res.result || {}\n        })\n      })\n    },\n    onSubmit() {\n      this.$refs.userForm.validate(valid => {\n        if (valid) {\n          const data = {\n            userId: this.userForm.userId,\n            empName: this.userForm.empName,\n            phone: this.userForm.phone\n          }\n          debugger\n          userServer.editUserById(data).then(request => {\n            if (request.code === 200) {\n              this.$notify({\n                title: '成功',\n                message: request.message,\n                type: 'success'\n              })\n              this.$router.back()\n            } else {\n              this.$notify({\n                title: '失败',\n                message: request.message,\n                type: 'error'\n              })\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    },\n    goBack() {\n      this.$router.back()\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.create-container {\n  width: 500px;\n  height: 100%;\n  margin: 60px auto;\n}\n\n.avatar-wrapper {\n  position: relative;\n  .user-name {\n    margin-right: 2px;\n    font-size: 14px;\n  }\n  .user-avatar {\n    vertical-align: middle;\n    cursor: pointer;\n    width: 70px;\n    height: 70px;\n    border-radius: 10px;\n    margin-right: 10px;\n  }\n\n  .el-icon-caret-bottom {\n    cursor: pointer;\n    position: absolute;\n    right: -20px;\n    top: 25px;\n    font-size: 12px;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/profile"}]}