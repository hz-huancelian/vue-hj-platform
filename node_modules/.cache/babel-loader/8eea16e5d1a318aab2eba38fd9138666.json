{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\contract\\approve\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\contract\\approve\\index.vue","mtime":1649840030000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar contractServer = _interopRequireWildcard(require(\"@/api/contract\"));\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// Secondary package based on el-pagination\nvar CONTRACT_STATUS = {\n  '0': '待完善',\n  '6': '待提交',\n  '1': '待审核',\n  '2': '审核失败',\n  '4': '完成',\n  '5': '已作废'\n};\nvar _default = {\n  components: {\n    Pagination: _Pagination.default\n  },\n  data: function data() {\n    return {\n      CONTRACT_STATUS: CONTRACT_STATUS,\n      contractData: [],\n      searchForm: {\n        contCode: '',\n        contName: '',\n        contStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      approveVisible: false,\n      currentItem: {},\n      approveForm: {\n        contId: '',\n        auditFlag: '1',\n        auditReason: ''\n      }\n    };\n  },\n  created: function created() {\n    this.handleSearch();\n  },\n  methods: {\n    handleSearch: function handleSearch() {\n      var _this = this;\n\n      contractServer.findApproveConByCondition(this.searchForm).then(function (res) {\n        if (res.code === 200 && res.result) {\n          _this.contractData = res.result.records || [];\n          _this.total = res.result.total;\n        }\n      });\n    },\n    handleDetail: function handleDetail(row) {\n      var _this2 = this;\n\n      contractServer.findContFileById(row.id).then(function (res) {\n        if (res.code === 200 && res.result && res.result.length > 0) {\n          var path = res.result; // 合同文件存放地址\n          // this.$router.push(`/report/pdfView/${path}/1`)\n\n          _this2.$router.push({\n            name: 'sysPdfView',\n            params: {\n              path: path,\n              type: 1\n            }\n          });\n        } else {\n          _this2.$message.error('合同PDF还未生成');\n        }\n      });\n    },\n    handleApproveRes: function handleApproveRes(row) {\n      this.approveForm.contId = row.id;\n      this.approveForm.auditFlag = '1';\n      this.approveForm.auditReason = '';\n      this.approveVisible = true;\n    },\n    confirmApproveDialog: function confirmApproveDialog() {\n      var _this3 = this;\n\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        contractServer.auditCont(_this3.approveForm).then(function (res) {\n          if (res.code === 200) {\n            _this3.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            });\n\n            _this3.approveVisible = false;\n\n            _this3.handleSearch();\n          } else {\n            _this3.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            });\n          }\n        });\n      }).catch(function () {});\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"20\">\n          <el-form-item label=\"合同编号:\">\n            <el-input v-model=\"searchForm.contCode\" style=\"width:180px\" placeholder=\"合同编号\" />\n          </el-form-item>\n          <el-form-item label=\"项目名称:\">\n            <el-input v-model=\"searchForm.contName\" style=\"width:180px\" placeholder=\"项目名称\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"4\" class=\"search-right\">\n          <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div>\n      <el-table\n        stripe\n        border\n        :data=\"contractData\"\n        highlight-current-row\n        :header-cell-style=\"{background:'#ECF3FC'}\"\n        style=\"width: 100%\"\n      >\n        <template slot=\"empty\">\n          <div class=\"table_empty\">\n            <div class=\"empty_tips\">\n              <span>\n                暂无合同信息\n              </span>\n            </div>\n          </div>\n        </template>\n        <el-table-column type=\"index\" width=\"55\" label=\"序号\" align=\"center\" />\n        <el-table-column prop=\"contCode\" label=\"合同编号\" width=\"190px\" align=\"center\" />\n        <el-table-column prop=\"offerId\" label=\"报价单号\" width=\"170px\" align=\"center\" />\n        <el-table-column prop=\"projectName\" label=\"项目名称\" min-width=\"120px\" align=\"center\" />\n        <el-table-column prop=\"partA\" label=\"客户名称\" min-width=\"110px\" align=\"center\" />\n        <el-table-column prop=\"signDate\" label=\"签订时间\" width=\"110px\" align=\"center\" />\n        <el-table-column prop=\"validity\" label=\"有效期\" width=\"\" align=\"center\">\n          <template slot-scope=\"{row}\">\n            {{ row.validity }} 年\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"contStatus\" label=\"制作方式\" width=\"120px\" align=\"center\">\n          <template slot-scope=\"{row}\">\n            <el-tag :type=\"row.makeType==='0'?'success':''\">{{ row.makeType==='0'?'在线制作':'本地上传' }}</el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column fixed=\"right\" align=\"center\" label=\"操作\" width=\"120\">\n          <template slot-scope=\"{row}\">\n\n            <el-button v-if=\"row.contStatus>0\" type=\"text\" @click=\"handleDetail(row)\"> 查看</el-button>\n            <div v-if=\"row.contStatus==='1'\" class=\"erc-divider-vertical\" />\n            <el-button v-if=\"row.contStatus==='1'\" type=\"text\" @click=\"handleApproveRes(row)\"> 审核</el-button>\n\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n    <el-dialog title=\"合同审核\" :visible.sync=\"approveVisible\" center>\n      <div style=\"width: 500px;margin:0 auto\">\n        <el-form :model=\"approveForm\" label-width=\"100px\">\n          <el-form-item label=\"审核结果:\">\n            <el-radio-group v-model=\"approveForm.auditFlag\">\n              <el-radio label=\"1\">通过</el-radio>\n              <el-radio label=\"2\">驳回</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item v-if=\"approveForm.auditFlag === '2'\" label=\"审核意见:\">\n            <el-input v-model=\"approveForm.auditReason\" type=\"textarea\" :rows=\"3\" maxlength=\"50\" show-word-limit placeholder=\"审核意见\" />\n          </el-form-item>\n        </el-form>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"approveVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmApproveDialog\">确认</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport * as contractServer from '@/api/contract'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nconst CONTRACT_STATUS = {\n  '0': '待完善',\n  '6': '待提交',\n  '1': '待审核',\n  '2': '审核失败',\n  '4': '完成',\n  '5': '已作废'\n}\nexport default {\n  components: { Pagination },\n  data() {\n    return {\n      CONTRACT_STATUS,\n      contractData: [],\n      searchForm: {\n        contCode: '',\n        contName: '',\n        contStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      approveVisible: false,\n      currentItem: {},\n      approveForm: {\n        contId: '',\n        auditFlag: '1',\n        auditReason: ''\n      }\n    }\n  },\n  created() {\n    this.handleSearch()\n  },\n  methods: {\n    handleSearch() {\n      contractServer.findApproveConByCondition(this.searchForm).then(res => {\n        if (res.code === 200 && res.result) {\n          this.contractData = res.result.records || []\n          this.total = res.result.total\n        }\n      })\n    },\n\n    handleDetail(row) {\n      contractServer.findContFileById(row.id).then(res => {\n        if (res.code === 200 && res.result && res.result.length > 0) {\n          const path = res.result // 合同文件存放地址\n          // this.$router.push(`/report/pdfView/${path}/1`)\n          this.$router.push({ name: 'sysPdfView', params: { path: path, type: 1 }})\n        } else {\n          this.$message.error('合同PDF还未生成')\n        }\n      })\n    },\n    handleApproveRes(row) {\n      this.approveForm.contId = row.id\n      this.approveForm.auditFlag = '1'\n      this.approveForm.auditReason = ''\n      this.approveVisible = true\n    },\n    confirmApproveDialog() {\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        contractServer.auditCont(this.approveForm).then(res => {\n          if (res.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            })\n            this.approveVisible = false\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            })\n          }\n        })\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n</style>\n"],"sourceRoot":"src/views/contract/approve"}]}