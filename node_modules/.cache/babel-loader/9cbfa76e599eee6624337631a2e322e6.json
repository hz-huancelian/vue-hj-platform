{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\order\\components\\sameMeal.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\order\\components\\sameMeal.vue","mtime":1653289275000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.find-index\");\n\nrequire(\"core-js/modules/es6.array.find\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar factorServer = _interopRequireWildcard(require(\"@/api/factor\"));\n\nvar _vueUuid = require(\"vue-uuid\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar MEAN_STATUS = {\n  '0': '日均值',\n  '1': '时均值',\n  '2': '八小时均值'\n};\nvar _default = {\n  props: {\n    clearType: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      MEAN_STATUS: MEAN_STATUS,\n      factorGroupData: [],\n      currentNodeId: '',\n      factorList: [],\n      meanType: '',\n      currentNodeName: '',\n      choseGroupFatcors: [],\n      maxTotal: 10,\n      setDay: 1,\n      frequency: 1,\n      // 频次\n      addressArray: [],\n      lookPosition: '',\n      currentForm: {},\n      multiplGroupeSelection: []\n    };\n  },\n  watch: {\n    clearType: function clearType() {\n      this.factorList = [];\n      this.addressArray = [];\n      this.choseGroupFatcors = [];\n      this.multiplGroupeSelection = [];\n      this.setDay = 1;\n      this.frequency = 1;\n      this.currentForm = {};\n      this.lookPosition = '';\n    }\n  },\n  created: function created() {\n    this.getFactorGroup();\n  },\n  methods: {\n    getFactorGroup: function getFactorGroup() {\n      var _this = this;\n\n      factorServer.findHomFactorGroup().then(function (res) {\n        if (res.code === 200) {\n          _this.factorGroupData = res.result || [];\n        }\n      });\n    },\n    handleGroupSelectionChange: function handleGroupSelectionChange(val) {\n      var _this2 = this;\n\n      this.multiplGroupeSelection = val;\n\n      if (val && val.length > 0) {\n        var lastPrice = 0; // 计算总价格\n\n        val.forEach(function (i) {\n          lastPrice = parseFloat(i.price + lastPrice);\n\n          if (lastPrice > _this2.currentForm.groupCost) {\n            lastPrice = _this2.currentForm.groupCost;\n          }\n        });\n        val.forEach(function (i) {\n          // lastPrice = parseFloat(i.price + lastPrice)\n          // if (lastPrice > this.currentForm.groupCost) {\n          //   lastPrice = this.currentForm.groupCost\n          // }\n          var ob = _this2.choseGroupFatcors.find(function (j) {\n            return j.standardCode === i.standardCode;\n          });\n\n          if (_this2.choseGroupFatcors.length === 0) {\n            var subs = [];\n            subs.push(i);\n            var item = {\n              standardCode: i.standardCode,\n              className: i.className,\n              standardNo: i.standardNo,\n              standardName: i.standardName,\n              isFactor: '1',\n              factorName: _this2.getFactorName(subs),\n              secdClassId: i.secdClassId,\n              secdClassName: i.secdClassName,\n              frequency: i.frequency,\n              dayCount: i.dayCount,\n              costPerTime: lastPrice,\n              subCheckStandards: subs\n            };\n\n            _this2.choseGroupFatcors.push(item);\n          } else {\n            if (!ob) {\n              var newSubs = _this2.choseGroupFatcors[0].subCheckStandards;\n              newSubs.push(i);\n              _this2.choseGroupFatcors[0].factorName = _this2.getFactorName(newSubs);\n              _this2.choseGroupFatcors[0].costPerTime = lastPrice;\n            }\n          }\n        });\n        this.currentNodeId = this.choseGroupFatcors[0].secdClassId;\n      } else {\n        this.currentNodeId = '';\n      }\n\n      debugger;\n\n      if (this.addressArray.length === 0) {\n        if (this.currentNodeId === '002003') {\n          // 厂界无组织/ 环境空气 自动生成5个点位\n          this.$nextTick(function () {\n            for (var i = 0; i < 4; i++) {\n              _this2.addressArray.push({\n                value: '',\n                windNum: 3,\n                key: Date.now() + i\n              });\n            }\n          });\n        } else if (this.currentNodeId === '002001') {\n          this.$nextTick(function () {\n            for (var i = 0; i < 3; i++) {\n              _this2.addressArray.push({\n                value: '',\n                windNum: 3,\n                key: Date.now() + i\n              });\n            }\n          });\n        }\n      }\n    },\n    getFactorName: function getFactorName(items) {\n      if (items.length === 1) {\n        return this.currentForm.groupName + '(' + items[0].factorName + ')';\n      } else {\n        var n = '';\n        items.forEach(function (i) {\n          n += i.factorName + ',';\n        });\n        var fanme = this.currentForm.groupName + '(' + n.substring(0, 20) + '...)';\n        return fanme;\n      }\n    },\n    groupSelect: function groupSelect(selection, row) {\n      if (selection) {\n        if (selection.indexOf(row) === -1) {\n          var index = this.choseGroupFatcors.findIndex(function (i) {\n            return i.standardCode === row.standardCode;\n          });\n          this.choseGroupFatcors.splice(index, 1);\n        }\n      }\n    },\n    choseItem: function choseItem(val) {\n      var _this3 = this;\n\n      this.factorList = [];\n      this.multiplGroupeSelection = [];\n      this.choseGroupFatcors = [];\n      this.currentForm = val; // 清空设定值\n\n      this.setDay = 1;\n      this.frequency = 1;\n      this.maxTotal = 10;\n      this.addressArray = [];\n      this.currentNodeId = '';\n      this.currentNodeName = '';\n      this.meanType = '';\n      this.factorsPrice = val.groupCost;\n\n      if (val.groupId) {\n        factorServer.findCheckStandardsByGroupId(val.groupId).then(function (result) {\n          if (result.code === 200 && result.result) {\n            _this3.factorList = result.result || [];\n          }\n        });\n      }\n    },\n    handleGroupClose: function handleGroupClose(item) {\n      // 移除存储的因子\n      this.choseGroupFatcors.splice(this.choseGroupFatcors.indexOf(item), 1);\n      this.$refs.groupMultipleTable.toggleRowSelection(item, false);\n    },\n    changeMeanType: function changeMeanType(val) {\n      var curTotal = 0;\n\n      if (val === '0') {\n        this.maxTotal = curTotal = 1;\n      } else if (val === '1') {\n        this.maxTotal = curTotal = 4;\n      } else if (val === '2') {\n        this.maxTotal = curTotal = 2;\n      }\n\n      if (this.frequency > curTotal) {\n        this.frequency = curTotal;\n      }\n    },\n    addAddress: function addAddress() {\n      var _this4 = this;\n\n      this.$nextTick(function () {\n        _this4.addressArray.push({\n          value: '',\n          windNum: 3,\n          key: Date.now()\n        });\n      });\n    },\n    removeAddDomain: function removeAddDomain(item) {\n      var index = this.addressArray.indexOf(item);\n\n      if (index !== -1) {\n        this.addressArray.splice(index, 1);\n      }\n    },\n    confirmGroupChoseFactor: function confirmGroupChoseFactor() {\n      var _this5 = this;\n\n      if (!this.choseGroupFatcors || this.choseGroupFatcors.length <= 0) {\n        this.$message.warning('因子不能为空');\n        return;\n      }\n\n      if (!this.lookPosition || this.lookPosition.length <= 0) {\n        this.$message.warning('初始检测位置不能为空');\n        return;\n      }\n\n      var dynamic = {};\n\n      if (this.currentNodeId === '002001') {\n        this.$set(dynamic, 'meanType', this.meanType);\n        this.$set(dynamic, 'meanName', this.MEAN_STATUS[this.meanType]);\n      }\n\n      var groupId = '';\n\n      if (this.currentNodeId === '002001' || this.currentNodeId === '002003') {\n        groupId = this.currentNodeId;\n      }\n\n      var retListArray = this.choseGroupFatcors.map(function (i) {\n        var standardCode = i.standardCode,\n            className = i.className,\n            standardName = i.standardName,\n            secdClassId = i.secdClassId,\n            standardNo = i.standardNo,\n            secdClassName = i.secdClassName,\n            factorName = i.factorName,\n            subCheckStandards = i.subCheckStandards;\n\n        var n_UUid = _vueUuid.uuid.v4().replaceAll('-', '');\n\n        var usePrice = 0;\n        debugger;\n\n        if (subCheckStandards && subCheckStandards.length > 0) {\n          subCheckStandards.forEach(function (j) {\n            usePrice += j.price;\n          });\n        }\n\n        debugger;\n\n        if (_this5.currentForm.groupCost <= usePrice) {\n          usePrice = _this5.currentForm.groupCost;\n        }\n\n        var cost = parseFloat(usePrice * _this5.frequency * _this5.setDay).toFixed(2);\n\n        _this5.$set(i, 'factorGroupKey', n_UUid);\n\n        return {\n          standardCode: standardCode,\n          className: className,\n          standardName: standardName,\n          factorName: factorName,\n          isFactor: '1',\n          secdClassId: secdClassId,\n          standardNo: standardNo,\n          secdClassName: secdClassName,\n          frequency: _this5.frequency,\n          dayCount: _this5.setDay,\n          totalNum: Number(_this5.frequency * _this5.setDay).toFixed(0),\n          costPerTime: Number(usePrice).toFixed(2),\n          // 单次售价\n          totalCost: cost,\n          meanName: _this5.currentNodeId === '002001' ? _this5.MEAN_STATUS[_this5.meanType] : undefined,\n          factorPoint: _this5.lookPosition,\n          groupClassId: groupId !== '' ? groupId + '/' + standardCode : '',\n          dynamicParam: JSON.stringify(dynamic),\n          subCheckStandards: subCheckStandards,\n          factorGroupKey: n_UUid\n        };\n      });\n\n      if (this.addressArray && this.addressArray.length > 0) {\n        this.addressArray.forEach(function (item) {\n          if (item.value && item.value.length > 0) {\n            _this5.choseGroupFatcors.forEach(function (j) {\n              var standardCode = j.standardCode,\n                  className = j.className,\n                  standardName = j.standardName,\n                  secdClassId = j.secdClassId,\n                  secdClassName = j.secdClassName,\n                  standardNo = j.standardNo,\n                  factorName = j.factorName,\n                  costPerTime = j.costPerTime,\n                  subCheckStandards = j.subCheckStandards,\n                  factorGroupKey = j.factorGroupKey;\n              var cost = parseFloat(costPerTime * _this5.frequency * _this5.setDay).toFixed(2);\n              retListArray.push({\n                standardCode: standardCode,\n                className: className,\n                standardName: standardName,\n                isFactor: '1',\n                factorName: factorName,\n                standardNo: standardNo,\n                secdClassId: secdClassId,\n                secdClassName: secdClassName,\n                frequency: _this5.frequency,\n                dayCount: _this5.setDay,\n                costPerTime: costPerTime,\n                // 单次售价\n                totalNum: Number(_this5.frequency * _this5.setDay).toFixed(0),\n                totalCost: cost,\n                factorPoint: item.value,\n                remark: '',\n                meanName: _this5.currentNodeId === '002001' ? _this5.MEAN_STATUS[_this5.meanType] : undefined,\n                groupClassId: groupId !== '' ? groupId + '/' + standardCode : '',\n                dynamicParam: JSON.stringify(dynamic),\n                subCheckStandards: subCheckStandards,\n                factorGroupKey: factorGroupKey\n              });\n            });\n          }\n        });\n      } // 追加合并\n\n\n      this.formComfig(retListArray);\n      this.factorGroupVisible = false;\n    },\n    formComfig: function formComfig(items) {\n      this.$emit('handleConfim', items);\n    },\n    cancelComfig: function cancelComfig() {\n      this.$emit('handleCancel', false);\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["sameMeal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"4\">\n        <el-card shadow=\"never\" style=\"height: 400px;overflow-y: auto;\">\n          <div v-for=\"(item, index) in factorGroupData\" :key=\"index\" class=\"text dialog-item\" @click=\"choseItem(item)\">\n            {{ item.groupName }}\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"20\">\n        <el-table\n          ref=\"groupMultipleTable\"\n          :data=\"factorList\"\n          border\n          height=\"500px\"\n          :header-cell-style=\"{background:'#ECF3FC'}\"\n          @selection-change=\"handleGroupSelectionChange\"\n          @select=\"groupSelect\"\n        >\n          <el-table-column type=\"selection\" align=\"center\" width=\"50\" />\n          <el-table-column prop=\"secdClassName\" label=\"检测对象\" align=\"center\" />\n          <el-table-column prop=\"factorName\" label=\"检测因子\" align=\"center\" />\n          <el-table-column prop=\"standardNo\" label=\"标准号\" align=\"center\" />\n          <el-table-column prop=\"standardName\" label=\"检测标准\" min-width=\"130px\" align=\"center\" />\n          <el-table-column prop=\"analysisMethod\" label=\"分析方法\" align=\"center\" />\n          <el-table-column prop=\"price\" label=\"价格\" align=\"center\">\n            <template slot-scope=\"{row}\">\n              {{ row.price|MoneyFormat }} 元\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-col>\n    </el-row>\n    <el-divider content-position=\"left\">已选因子</el-divider>\n    <el-row style=\"min-height:36px;line-height: 30px\">\n      <el-col :span=\"2\">\n        <span>已选中因子:</span>\n      </el-col>\n      <el-col :span=\"22\">\n        <template v-if=\"choseGroupFatcors && choseGroupFatcors.length > 0\">\n          <el-tag\n            v-for=\"item in choseGroupFatcors\"\n            :key=\"item.id\"\n            closable\n            :disable-transitions=\"false\"\n            style=\"margin:2px 3px\"\n            @close=\"handleGroupClose(item)\"\n          >\n            {{ item.factorName }}\n          </el-tag>\n        </template>\n        <template v-else>\n          无\n        </template>\n      </el-col>\n    </el-row>\n\n    <el-divider content-position=\"left\">因子配置</el-divider>\n    <el-form>\n      <el-row :gutter=\"10\">\n        <el-col :span=\"6\">\n          <el-form-item v-if=\"currentNodeId === '002001'\" label=\"均值类型:\" label-width=\"100px\">\n            <el-select v-model=\"meanType\" placeholder=\"请选择均值类型\" @change=\"changeMeanType\">\n              <el-option value=\"0\" label=\"日均值\" />\n              <el-option value=\"1\" label=\"时均值\" />\n              <el-option value=\"2\" label=\"八小时均值\" />\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"天数:\" label-width=\"100px\">\n            <el-input-number v-model=\"setDay\" controls-position=\"right\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"频次(次/天):\" label-width=\"110px\">\n            <el-input-number v-model=\"frequency\" controls-position=\"right\" :max=\"maxTotal\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item :label=\"addressArray && addressArray.length >0 ?'检测位置1:':'检测位置:'\" label-width=\"100px\">\n            <el-input v-model=\"lookPosition\" placeholder=\"检测位置\" style=\"width: 250px;margin-right:3px\" />\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col v-for=\"(item, index) in addressArray\" :key=\"item.key\" :span=\"24\">\n          <el-form-item :label=\"'检测位置'+(index+2)+':'\" label-width=\"100px\">\n            <el-input v-model=\"item.value\" placeholder=\"检测位置\" style=\"width: 250px;margin-right:3px\" />\n            <el-button v-if=\"currentNodeId !== '002001' && currentNodeId !== '002003'\" type=\"text\" size=\"small\" @click.prevent=\"removeAddDomain(item)\">删除</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col v-if=\"currentNodeId !== '002003' && currentNodeId !== '002001'\" :span=\"24\" style=\"padding-left:20px\">\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"addAddress\">添加位置</el-button>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-divider />\n    <el-row>\n      <el-col :span=\"24\" style=\"text-align: right;\">\n        <el-button type=\"\" @click=\"cancelComfig\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirmGroupChoseFactor\">确 定</el-button>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nconst MEAN_STATUS = {\n  '0': '日均值',\n  '1': '时均值',\n  '2': '八小时均值'\n}\nimport * as factorServer from '@/api/factor'\nimport { uuid } from 'vue-uuid'\nexport default {\n  props: {\n    clearType: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      MEAN_STATUS,\n      factorGroupData: [],\n      currentNodeId: '',\n      factorList: [],\n      meanType: '',\n      currentNodeName: '',\n      choseGroupFatcors: [],\n      maxTotal: 10,\n      setDay: 1,\n      frequency: 1, // 频次\n      addressArray: [],\n      lookPosition: '',\n      currentForm: {},\n      multiplGroupeSelection: []\n    }\n  },\n  watch: {\n    clearType() {\n      this.factorList = []\n      this.addressArray = []\n      this.choseGroupFatcors = []\n      this.multiplGroupeSelection = []\n      this.setDay = 1\n      this.frequency = 1\n      this.currentForm = {}\n      this.lookPosition = ''\n    }\n  },\n  created() {\n    this.getFactorGroup()\n  },\n  methods: {\n    getFactorGroup() {\n      factorServer.findHomFactorGroup().then(res => {\n        if (res.code === 200) {\n          this.factorGroupData = res.result || []\n        }\n      })\n    },\n    handleGroupSelectionChange(val) {\n      this.multiplGroupeSelection = val\n      if (val && val.length > 0) {\n        var lastPrice = 0\n        // 计算总价格\n        val.forEach(i => {\n          lastPrice = parseFloat(i.price + lastPrice)\n          if (lastPrice > this.currentForm.groupCost) {\n            lastPrice = this.currentForm.groupCost\n          }\n        })\n\n        val.forEach(i => {\n          // lastPrice = parseFloat(i.price + lastPrice)\n          // if (lastPrice > this.currentForm.groupCost) {\n          //   lastPrice = this.currentForm.groupCost\n          // }\n          const ob = this.choseGroupFatcors.find(j => j.standardCode === i.standardCode)\n          if (this.choseGroupFatcors.length === 0) {\n            var subs = []\n            subs.push(i)\n            const item = {\n              standardCode: i.standardCode,\n              className: i.className,\n              standardNo: i.standardNo,\n              standardName: i.standardName,\n              isFactor: '1',\n              factorName: this.getFactorName(subs),\n              secdClassId: i.secdClassId,\n              secdClassName: i.secdClassName,\n              frequency: i.frequency,\n              dayCount: i.dayCount,\n              costPerTime: lastPrice,\n              subCheckStandards: subs\n            }\n            this.choseGroupFatcors.push(item)\n          } else {\n            if (!ob) {\n              var newSubs = this.choseGroupFatcors[0].subCheckStandards\n              newSubs.push(i)\n              this.choseGroupFatcors[0].factorName = this.getFactorName(newSubs)\n              this.choseGroupFatcors[0].costPerTime = lastPrice\n            }\n          }\n        })\n        this.currentNodeId = this.choseGroupFatcors[0].secdClassId\n      } else {\n        this.currentNodeId = ''\n      }\n      debugger\n      if (this.addressArray.length === 0) {\n        if (this.currentNodeId === '002003') { // 厂界无组织/ 环境空气 自动生成5个点位\n          this.$nextTick(() => {\n            for (var i = 0; i < 4; i++) {\n              this.addressArray.push({\n                value: '',\n                windNum: 3,\n                key: Date.now() + i\n              })\n            }\n          })\n        } else if (this.currentNodeId === '002001') {\n          this.$nextTick(() => {\n            for (var i = 0; i < 3; i++) {\n              this.addressArray.push({\n                value: '',\n                windNum: 3,\n                key: Date.now() + i\n              })\n            }\n          })\n        }\n      }\n    },\n    getFactorName(items) {\n      if (items.length === 1) {\n        return this.currentForm.groupName + '(' + items[0].factorName + ')'\n      } else {\n        var n = ''\n        items.forEach(i => { n += i.factorName + ',' })\n        var fanme = this.currentForm.groupName + '(' + n.substring(0, 20) + '...)'\n        return fanme\n      }\n    },\n    groupSelect(selection, row) {\n      if (selection) {\n        if (selection.indexOf(row) === -1) {\n          const index = this.choseGroupFatcors.findIndex(i => i.standardCode === row.standardCode)\n          this.choseGroupFatcors.splice(index, 1)\n        }\n      }\n    },\n    choseItem(val) {\n      this.factorList = []\n      this.multiplGroupeSelection = []\n      this.choseGroupFatcors = []\n      this.currentForm = val\n      // 清空设定值\n      this.setDay = 1\n      this.frequency = 1\n      this.maxTotal = 10\n      this.addressArray = []\n      this.currentNodeId = ''\n      this.currentNodeName = ''\n      this.meanType = ''\n      this.factorsPrice = val.groupCost\n      if (val.groupId) {\n        factorServer.findCheckStandardsByGroupId(val.groupId).then(result => {\n          if (result.code === 200 && result.result) {\n            this.factorList = result.result || []\n          }\n        })\n      }\n    },\n    handleGroupClose(item) {\n      // 移除存储的因子\n      this.choseGroupFatcors.splice(this.choseGroupFatcors.indexOf(item), 1)\n      this.$refs.groupMultipleTable.toggleRowSelection(item, false)\n    },\n    changeMeanType(val) {\n      let curTotal = 0\n      if (val === '0') {\n        this.maxTotal = curTotal = 1\n      } else if (val === '1') {\n        this.maxTotal = curTotal = 4\n      } else if (val === '2') {\n        this.maxTotal = curTotal = 2\n      }\n      if (this.frequency > curTotal) {\n        this.frequency = curTotal\n      }\n    },\n    addAddress() {\n      this.$nextTick(() => {\n        this.addressArray.push({\n          value: '',\n          windNum: 3,\n          key: Date.now()\n        })\n      })\n    },\n    removeAddDomain(item) {\n      var index = this.addressArray.indexOf(item)\n      if (index !== -1) {\n        this.addressArray.splice(index, 1)\n      }\n    },\n    confirmGroupChoseFactor() {\n      if (!this.choseGroupFatcors || this.choseGroupFatcors.length <= 0) {\n        this.$message.warning('因子不能为空')\n        return\n      }\n      if (!this.lookPosition || this.lookPosition.length <= 0) {\n        this.$message.warning('初始检测位置不能为空')\n        return\n      }\n      const dynamic = {}\n      if (this.currentNodeId === '002001') {\n        this.$set(dynamic, 'meanType', this.meanType)\n        this.$set(dynamic, 'meanName', this.MEAN_STATUS[this.meanType])\n      }\n      let groupId = ''\n      if (this.currentNodeId === '002001' || this.currentNodeId === '002003') {\n        groupId = this.currentNodeId\n      }\n\n      const retListArray = this.choseGroupFatcors.map(i => {\n        const { standardCode, className, standardName, secdClassId, standardNo, secdClassName, factorName, subCheckStandards } = i\n        const n_UUid = uuid.v4().replaceAll('-', '')\n        var usePrice = 0\n        debugger\n        if (subCheckStandards && subCheckStandards.length > 0) {\n          subCheckStandards.forEach(j => {\n            usePrice += j.price\n          })\n        }\n        debugger\n        if (this.currentForm.groupCost <= usePrice) {\n          usePrice = this.currentForm.groupCost\n        }\n\n        const cost = parseFloat(usePrice * this.frequency * this.setDay).toFixed(2)\n        this.$set(i, 'factorGroupKey', n_UUid)\n        return {\n          standardCode,\n          className,\n          standardName,\n          factorName,\n          isFactor: '1',\n          secdClassId,\n          standardNo,\n          secdClassName,\n          frequency: this.frequency,\n          dayCount: this.setDay,\n          totalNum: Number(this.frequency * this.setDay).toFixed(0),\n          costPerTime: Number(usePrice).toFixed(2), // 单次售价\n          totalCost: cost,\n          meanName: this.currentNodeId === '002001' ? this.MEAN_STATUS[this.meanType] : undefined,\n          factorPoint: this.lookPosition,\n          groupClassId: groupId !== '' ? (groupId + '/' + standardCode) : '',\n          dynamicParam: JSON.stringify(dynamic),\n          subCheckStandards,\n          factorGroupKey: n_UUid\n        }\n      })\n      if (this.addressArray && this.addressArray.length > 0) {\n        this.addressArray.forEach(item => {\n          if (item.value && item.value.length > 0) {\n            this.choseGroupFatcors.forEach(j => {\n              const { standardCode, className, standardName, secdClassId, secdClassName, standardNo, factorName, costPerTime, subCheckStandards, factorGroupKey } = j\n              const cost = parseFloat(costPerTime * this.frequency * this.setDay).toFixed(2)\n              retListArray.push({\n                standardCode,\n                className,\n                standardName,\n                isFactor: '1',\n                factorName,\n                standardNo,\n                secdClassId,\n                secdClassName,\n                frequency: this.frequency,\n                dayCount: this.setDay,\n                costPerTime, // 单次售价\n                totalNum: Number(this.frequency * this.setDay).toFixed(0),\n                totalCost: cost,\n                factorPoint: item.value,\n                remark: '',\n                meanName: this.currentNodeId === '002001' ? this.MEAN_STATUS[this.meanType] : undefined,\n                groupClassId: groupId !== '' ? (groupId + '/' + standardCode) : '',\n                dynamicParam: JSON.stringify(dynamic),\n                subCheckStandards,\n                factorGroupKey\n              })\n            })\n          }\n        })\n      }\n      // 追加合并\n      this.formComfig(retListArray)\n      this.factorGroupVisible = false\n    },\n    formComfig(items) {\n      this.$emit('handleConfim', items)\n    },\n    cancelComfig() {\n      this.$emit('handleCancel', false)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n  .block-flex {\n    position: relative;\n    display: flex;\n    &>div{\n      border: 1px solid #B7B7B7;\n      width: 100px;\n      margin: 0;\n      line-height: 30px;\n      text-align: center;\n    }\n    &>div:first-child {\n      background: #B7B7B7;\n    }\n  }\n  .card-left {\n    width: 100%;\n    min-height: 200px;\n    max-height: 450px;\n  }\n  .card-right {\n    width: 100%;\n    min-height: 200px;\n    max-height: 450px;\n  }\n  .el-card {\n    overflow: auto;\n  }\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n  .el-icon-arrow-down {\n    font-size: 14px;\n  }\n  // /deep/.main-body .el-table__header-wrapper  .el-checkbox{\n  //   display:none\n  // }\n  .agreement_picture {\n    min-height: calc(100%);\n    .pdf{\n      height: calc(100%);\n    }\n  }\n\n  /deep/ .el-input.is-disabled .el-input__inner {\n    color:unset\n  }\n\n  /deep/.i-input .el-input__inner {\n    text-align: center;\n  }\n  /deep/.right-input .el-input__inner {\n    text-align: right;\n  }\n\n  .el-header {\n    line-height: 45px;\n    height: 45px;\n  }\n  .el-footer {\n    text-align: right;\n    line-height: 45px;\n    height: 45px;\n\n    .pagination-container {\n      padding: 0;\n      margin-top: 10px;\n      margin-bottom: 45px;\n    }\n  }\n  .el-main {\n    overflow-y: auto;\n  }\n  .el-container {\n    max-height: 450px;\n  }\n\n</style>\n<style scoped>\n  .text {\n    font-size: 14px;\n  }\n  .dialog-item {\n    padding-left: 3px;\n    line-height: 30px;\n    cursor:pointer;\n\n  }\n  .dialog-item:hover {\n    background: #e8f4ff;\n    border-radius: 3px;\n  }\n\ntable {\n    background-color: transparent\n}\n\ncaption {\n    padding-top: 8px;\n    padding-bottom: 8px;\n    color: #777;\n    text-align: left\n}\n\nth {\n    text-align: left\n}\n\n.table {\n    width: 100%;\n    max-width: 100%;\n    margin-bottom: 20px\n}\n\n.table>tbody>tr>td,.table>tbody>tr>th,.table>tfoot>tr>td,.table>tfoot>tr>th,.table>thead>tr>td,.table>thead>tr>th {\n    padding: 8px;\n    line-height: 1.42857143;\n    vertical-align: middle;\n    border-top: 1px solid #ddd\n}\n\n.table>thead>tr>th {\n    vertical-align: bottom;\n    border-bottom: 2px solid #ddd\n}\n\n.table>caption+thead>tr:first-child>td,.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>td,.table>thead:first-child>tr:first-child>th {\n    border-left: 1px solid #F1F2F4\n}\n\n.table>tbody+tbody {\n    border-top: 2px solid #ddd\n}\n\n.table .table {\n    background-color: #fff\n}\n\n.table-condensed>tbody>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>thead>tr>th {\n    padding: 5px\n}\n\n.table-bordered {\n    border: 1px solid #ddd\n}\n\n.table-bordered>tbody>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>thead>tr>th {\n    border: 1px solid #ddd\n}\n\n.table-bordered>thead>tr>td,.table-bordered>thead>tr>th {\n    border-bottom-width: 2px\n}\n\n.table-striped>tbody>tr:nth-of-type(odd) {\n    background-color: #f9f9f9\n}\n\n.table-hover>tbody>tr:hover {\n    background-color: #f5f5f5\n}\n\ntable col[class*=col-] {\n    position: static;\n    display: table-column;\n    float: none\n}\n\ntable td[class*=col-],table th[class*=col-] {\n    position: static;\n    display: table-cell;\n    float: none\n}\n\n.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active {\n    background-color: #f5f5f5\n}\n\n.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover {\n    background-color: #e8e8e8\n}\n\n.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success {\n    background-color: #dff0d8\n}\n\n.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover {\n    background-color: #d0e9c6\n}\n\n.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>thead>tr>td.info,.table>thead>tr>th.info {\n    background-color: #d9edf7\n}\n\n.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr.info:hover>th,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover {\n    background-color: #c4e3f3\n}\n\n.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>thead>tr>td.warning,.table>thead>tr>th.warning {\n    background-color: #fcf8e3\n}\n\n.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover {\n    background-color: #faf2cc\n}\n\n.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>thead>tr>td.danger,.table>thead>tr>th.danger {\n    background-color: #f2dede\n}\n\n.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover {\n    background-color: #ebcccc\n}\n\n.table-responsive {\n  min-height: 3.01%;\n  overflow-x: auto;\n}\n\n.table-bordered, .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > td, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > thead > tr > th {\n    border: 1px solid #e9ecef;\n    text-align: center;\n    line-height: 14px;\n}\n\n.table-bordered, td, th {\n    border-radius: 0 !important;\n}\n\n.table-bordered > tbody > tr:last-child > td {\n    border-bottom: 1px solid #e9ecef;\n}\n\n.bootstrap-table .fixed-table-container .fixed-table-header {\n    overflow: hidden;\n    background: rgba(0, 0, 0, .05);\n}\n\n.fixed-table-header .table > thead > tr {\n    background: none !important;\n}\n\n.table > thead > tr {\n    color: #636363;\n    font-weight: 400;\n    background: rgba(0, 0, 0, .05);\n    /*   background: repeat-x #fafafa;\n  background-image: -webkit-linear-gradient(top,#F8F8F8 0,#fafafa 100%);\n  background-image: -o-linear-gradient(top,#F8F8F8 0,#fafafa 100%);\n  background-image: linear-gradient(to bottom,#F8F8F8 0,#fafafa 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff8f8f8', endColorstr='#ffececec', GradientType=0); */\n}\n\n.table > thead > tr > th {\n    border-color: #e9ecef;\n    font-weight: 700;\n    border-right-color: transparent;\n}\n\n.table > thead > tr > th .ace-icon:first-child {\n    margin-right: 2px;\n}\n\n.table > thead > tr > th:first-child {\n    border-left-color: #F1F1F1;\n}\n\n.table > thead > tr > th:last-child {\n    border-right-color: #F1F1F1;\n}\n\n.table.table-bordered > thead > tr > th {\n    vertical-align: middle;\n}\n\ntd.center, th.center {\n    text-align: center;\n}\n\ntd .lbl, th .lbl {\n    margin-bottom: 0;\n}\n\ntd .lbl:only-child, th .lbl:only-child {\n    vertical-align: top;\n}\n\n.table-header {\n    background-color: #307ECC;\n    color: #FFF;\n    font-size: 14px;\n    line-height: 38px;\n    padding-left: 12px;\n    margin-bottom: 1px;\n}\n\n.table-header .close {\n    margin-right: 8px;\n    margin-top: 0;\n    opacity: .45;\n    filter: alpha(opacity=45);\n}\n\n.table-header .close:hover {\n    opacity: .75;\n    filter: alpha(opacity=75);\n}\n\nth.detail-col {\n    width: 48px;\n    text-align: center;\n}\n\ntr.detail-row {\n    display: none;\n}\n\ntr.detail-row.open {\n    display: block;\n    display: table-row;\n}\n\ntr.detail-row > td {\n    background-color: #f1f6f8;\n    border-top: 3px solid #d1e1ea !important;\n}\n\n.table-detail {\n    background-color: #fff;\n    border: 1px solid #dcebf7;\n    width: 100%;\n    padding: 12px;\n}\n\n.table-detail td > .profile-user-info {\n    width: 100%;\n}\n\n</style>\n"],"sourceRoot":"src/views/order/components"}]}