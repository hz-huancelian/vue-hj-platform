{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\components\\TopNav\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\components\\TopNav\\index.vue","mtime":1637217134000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar _router = require(\"@/router\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      // 顶部栏初始数\n      visibleNumber: 5,\n      // 是否为首次加载\n      isFrist: false,\n      // 当前激活菜单的 index\n      currentIndex: undefined\n    };\n  },\n  computed: {\n    theme: function theme() {\n      return this.$store.state.settings.theme;\n    },\n    // 顶部显示菜单\n    topMenus: function topMenus() {\n      var topMenus = [];\n      this.routers.map(function (menu) {\n        if (menu.hidden !== true) {\n          // 兼容顶部栏一级菜单内部跳转\n          if (menu.path === '/') {\n            topMenus.push(menu.children[0]);\n          } else {\n            topMenus.push(menu);\n          }\n        }\n      });\n      return topMenus;\n    },\n    // 所有的路由信息\n    routers: function routers() {\n      return this.$store.state.permission.topbarRouters;\n    },\n    // 设置子路由\n    childrenMenus: function childrenMenus() {\n      var _this = this;\n\n      var childrenMenus = [];\n      this.routers.map(function (router) {\n        for (var item in router.children) {\n          if (router.children[item].parentPath === undefined) {\n            if (router.path === '/') {\n              router.children[item].path = '/redirect/' + router.children[item].path;\n            } else {\n              if (!_this.ishttp(router.children[item].path)) {\n                router.children[item].path = router.path + '/' + router.children[item].path;\n              }\n            }\n\n            router.children[item].parentPath = router.path;\n          }\n\n          childrenMenus.push(router.children[item]);\n        }\n      });\n      return _router.constantRoutes.concat(childrenMenus);\n    },\n    // 默认激活的菜单\n    activeMenu: function activeMenu() {\n      var path = this.$route.path;\n      var activePath = this.defaultRouter();\n\n      if (path.lastIndexOf('/') > 0) {\n        var tmpPath = path.substring(1, path.length);\n        activePath = '/' + tmpPath.substring(0, tmpPath.indexOf('/'));\n      } else if (path === '/index' || path === '') {\n        if (!this.isFrist) {\n          // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n          this.isFrist = true;\n        } else {\n          activePath = 'index';\n        }\n      }\n\n      var routes = this.activeRoutes(activePath);\n\n      if (routes.length === 0) {\n        activePath = this.currentIndex || this.defaultRouter();\n        this.activeRoutes(activePath);\n      }\n\n      return activePath;\n    }\n  },\n  beforeMount: function beforeMount() {\n    window.addEventListener('resize', this.setVisibleNumber);\n  },\n  beforeDestroy: function beforeDestroy() {\n    window.removeEventListener('resize', this.setVisibleNumber);\n  },\n  mounted: function mounted() {\n    this.setVisibleNumber();\n  },\n  methods: {\n    // 根据宽度计算设置显示栏数\n    setVisibleNumber: function setVisibleNumber() {\n      var width = document.body.getBoundingClientRect().width / 3;\n      this.visibleNumber = parseInt(width / 85);\n    },\n    // 默认激活的路由\n    defaultRouter: function defaultRouter() {\n      var _this2 = this;\n\n      var router;\n      Object.keys(this.routers).some(function (key) {\n        if (!_this2.routers[key].hidden) {\n          router = _this2.routers[key].path;\n          return true;\n        }\n      });\n      return router;\n    },\n    // 菜单选择事件\n    handleSelect: function handleSelect(key, keyPath) {\n      this.currentIndex = key;\n\n      if (this.ishttp(key)) {\n        // http(s):// 路径新窗口打开\n        window.open(key, '_blank');\n      } else if (key.indexOf('/redirect') !== -1) {\n        // /redirect 路径内部打开\n        this.$router.push({\n          path: key.replace('/redirect', '')\n        });\n      } else {\n        // 显示左侧联动菜单\n        this.activeRoutes(key);\n      }\n    },\n    // 当前激活的路由\n    activeRoutes: function activeRoutes(key) {\n      var routes = [];\n\n      if (this.childrenMenus && this.childrenMenus.length > 0) {\n        this.childrenMenus.map(function (item) {\n          if (key === item.parentPath || key === 'index' && item.path === '') {\n            routes.push(item);\n          }\n        });\n      }\n\n      if (routes.length > 0) {\n        this.$store.commit('SET_SIDEBAR_ROUTERS', routes);\n      }\n\n      return routes;\n    },\n    ishttp: function ishttp(url) {\n      return url.indexOf('http://') !== -1 || url.indexOf('https://') !== -1;\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAgCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA;AACA,MAAA,aAAA,EAAA,CAFA;AAGA;AACA,MAAA,OAAA,EAAA,KAJA;AAKA;AACA,MAAA,YAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,KAAA;AACA,KAHA;AAIA;AACA,IAAA,QALA,sBAKA;AACA,UAAA,QAAA,GAAA,EAAA;AACA,WAAA,OAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,MAAA,KAAA,IAAA,EAAA;AACA;AACA,cAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,CAAA,CAAA;AACA,WAFA,MAEA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA;AACA,OATA;AAUA,aAAA,QAAA;AACA,KAlBA;AAmBA;AACA,IAAA,OApBA,qBAoBA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,UAAA,CAAA,aAAA;AACA,KAtBA;AAuBA;AACA,IAAA,aAxBA,2BAwBA;AAAA;;AACA,UAAA,aAAA,GAAA,EAAA;AACA,WAAA,OAAA,CAAA,GAAA,CAAA,UAAA,MAAA,EAAA;AACA,aAAA,IAAA,IAAA,IAAA,MAAA,CAAA,QAAA,EAAA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,IAAA,EAAA,UAAA,KAAA,SAAA,EAAA;AACA,gBAAA,MAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,IAAA,EAAA,IAAA,GAAA,eAAA,MAAA,CAAA,QAAA,CAAA,IAAA,EAAA,IAAA;AACA,aAFA,MAEA;AACA,kBAAA,CAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,IAAA,EAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA,IAAA,EAAA,IAAA,GAAA,MAAA,CAAA,IAAA,GAAA,GAAA,GAAA,MAAA,CAAA,QAAA,CAAA,IAAA,EAAA,IAAA;AACA;AACA;;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,IAAA,EAAA,UAAA,GAAA,MAAA,CAAA,IAAA;AACA;;AACA,UAAA,aAAA,CAAA,IAAA,CAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AACA;AACA,OAdA;AAeA,aAAA,uBAAA,MAAA,CAAA,aAAA,CAAA;AACA,KA1CA;AA2CA;AACA,IAAA,UA5CA,wBA4CA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,IAAA;AACA,UAAA,UAAA,GAAA,KAAA,aAAA,EAAA;;AACA,UAAA,IAAA,CAAA,WAAA,CAAA,GAAA,IAAA,CAAA,EAAA;AACA,YAAA,OAAA,GAAA,IAAA,CAAA,SAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA;AACA,QAAA,UAAA,GAAA,MAAA,OAAA,CAAA,SAAA,CAAA,CAAA,EAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,OAHA,MAGA,IAAA,IAAA,KAAA,QAAA,IAAA,IAAA,KAAA,EAAA,EAAA;AACA,YAAA,CAAA,KAAA,OAAA,EAAA;AACA;AACA,eAAA,OAAA,GAAA,IAAA;AACA,SAHA,MAGA;AACA,UAAA,UAAA,GAAA,OAAA;AACA;AACA;;AACA,UAAA,MAAA,GAAA,KAAA,YAAA,CAAA,UAAA,CAAA;;AACA,UAAA,MAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,QAAA,UAAA,GAAA,KAAA,YAAA,IAAA,KAAA,aAAA,EAAA;AACA,aAAA,YAAA,CAAA,UAAA;AACA;;AACA,aAAA,UAAA;AACA;AAhEA,GAXA;AA6EA,EAAA,WA7EA,yBA6EA;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,KAAA,gBAAA;AACA,GA/EA;AAgFA,EAAA,aAhFA,2BAgFA;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,QAAA,EAAA,KAAA,gBAAA;AACA,GAlFA;AAmFA,EAAA,OAnFA,qBAmFA;AACA,SAAA,gBAAA;AACA,GArFA;AAsFA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,gBAFA,8BAEA;AACA,UAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,qBAAA,GAAA,KAAA,GAAA,CAAA;AACA,WAAA,aAAA,GAAA,QAAA,CAAA,KAAA,GAAA,EAAA,CAAA;AACA,KALA;AAMA;AACA,IAAA,aAPA,2BAOA;AAAA;;AACA,UAAA,MAAA;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,KAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,CAAA,MAAA,CAAA,OAAA,CAAA,GAAA,EAAA,MAAA,EAAA;AACA,UAAA,MAAA,GAAA,MAAA,CAAA,OAAA,CAAA,GAAA,EAAA,IAAA;AACA,iBAAA,IAAA;AACA;AACA,OALA;AAMA,aAAA,MAAA;AACA,KAhBA;AAiBA;AACA,IAAA,YAlBA,wBAkBA,GAlBA,EAkBA,OAlBA,EAkBA;AACA,WAAA,YAAA,GAAA,GAAA;;AACA,UAAA,KAAA,MAAA,CAAA,GAAA,CAAA,EAAA;AACA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,GAAA,EAAA,QAAA;AACA,OAHA,MAGA,IAAA,GAAA,CAAA,OAAA,CAAA,WAAA,MAAA,CAAA,CAAA,EAAA;AACA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA,GAAA,CAAA,OAAA,CAAA,WAAA,EAAA,EAAA;AAAA,SAAA;AACA,OAHA,MAGA;AACA;AACA,aAAA,YAAA,CAAA,GAAA;AACA;AACA,KA9BA;AA+BA;AACA,IAAA,YAhCA,wBAgCA,GAhCA,EAgCA;AACA,UAAA,MAAA,GAAA,EAAA;;AACA,UAAA,KAAA,aAAA,IAAA,KAAA,aAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,aAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,GAAA,KAAA,IAAA,CAAA,UAAA,IAAA,GAAA,KAAA,OAAA,IAAA,IAAA,CAAA,IAAA,KAAA,EAAA,EAAA;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,SAJA;AAKA;;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,MAAA;AACA;;AACA,aAAA,MAAA;AACA,KA7CA;AA8CA,IAAA,MA9CA,kBA8CA,GA9CA,EA8CA;AACA,aAAA,GAAA,CAAA,OAAA,CAAA,SAAA,MAAA,CAAA,CAAA,IAAA,GAAA,CAAA,OAAA,CAAA,UAAA,MAAA,CAAA,CAAA;AACA;AAhDA;AAtFA,C","sourcesContent":["<template>\n  <el-menu\n    :default-active=\"activeMenu\"\n    mode=\"horizontal\"\n    @select=\"handleSelect\"\n  >\n    <template v-for=\"(item, index) in topMenus\">\n      <el-menu-item\n        v-if=\"index < visibleNumber\"\n        :key=\"index\"\n        :style=\"{'--theme': theme}\"\n        :index=\"item.path\"\n      ><svg-icon :icon-class=\"item.meta.icon\" />\n        {{ item.meta.title }}</el-menu-item>\n    </template>\n\n    <!-- 顶部菜单超出数量折叠 -->\n    <el-submenu v-if=\"topMenus.length > visibleNumber\" :style=\"{'--theme': theme}\" index=\"more\">\n      <template slot=\"title\">更多菜单</template>\n      <template v-for=\"(item, index) in topMenus\">\n        <el-menu-item\n          v-if=\"index >= visibleNumber\"\n          :key=\"index\"\n          :index=\"item.path\"\n        ><svg-icon :icon-class=\"item.meta.icon\" />\n          {{ item.meta.title }}</el-menu-item>\n      </template>\n    </el-submenu>\n  </el-menu>\n</template>\n\n<script>\nimport { constantRoutes } from '@/router'\n\nexport default {\n  data() {\n    return {\n      // 顶部栏初始数\n      visibleNumber: 5,\n      // 是否为首次加载\n      isFrist: false,\n      // 当前激活菜单的 index\n      currentIndex: undefined\n    }\n  },\n  computed: {\n    theme() {\n      return this.$store.state.settings.theme\n    },\n    // 顶部显示菜单\n    topMenus() {\n      const topMenus = []\n      this.routers.map((menu) => {\n        if (menu.hidden !== true) {\n          // 兼容顶部栏一级菜单内部跳转\n          if (menu.path === '/') {\n            topMenus.push(menu.children[0])\n          } else {\n            topMenus.push(menu)\n          }\n        }\n      })\n      return topMenus\n    },\n    // 所有的路由信息\n    routers() {\n      return this.$store.state.permission.topbarRouters\n    },\n    // 设置子路由\n    childrenMenus() {\n      var childrenMenus = []\n      this.routers.map((router) => {\n        for (var item in router.children) {\n          if (router.children[item].parentPath === undefined) {\n            if (router.path === '/') {\n              router.children[item].path = '/redirect/' + router.children[item].path\n            } else {\n              if (!this.ishttp(router.children[item].path)) {\n                router.children[item].path = router.path + '/' + router.children[item].path\n              }\n            }\n            router.children[item].parentPath = router.path\n          }\n          childrenMenus.push(router.children[item])\n        }\n      })\n      return constantRoutes.concat(childrenMenus)\n    },\n    // 默认激活的菜单\n    activeMenu() {\n      const path = this.$route.path\n      let activePath = this.defaultRouter()\n      if (path.lastIndexOf('/') > 0) {\n        const tmpPath = path.substring(1, path.length)\n        activePath = '/' + tmpPath.substring(0, tmpPath.indexOf('/'))\n      } else if (path === '/index' || path === '') {\n        if (!this.isFrist) {\n          // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n          this.isFrist = true\n        } else {\n          activePath = 'index'\n        }\n      }\n      var routes = this.activeRoutes(activePath)\n      if (routes.length === 0) {\n        activePath = this.currentIndex || this.defaultRouter()\n        this.activeRoutes(activePath)\n      }\n      return activePath\n    }\n  },\n  beforeMount() {\n    window.addEventListener('resize', this.setVisibleNumber)\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.setVisibleNumber)\n  },\n  mounted() {\n    this.setVisibleNumber()\n  },\n  methods: {\n    // 根据宽度计算设置显示栏数\n    setVisibleNumber() {\n      const width = document.body.getBoundingClientRect().width / 3\n      this.visibleNumber = parseInt(width / 85)\n    },\n    // 默认激活的路由\n    defaultRouter() {\n      let router\n      Object.keys(this.routers).some((key) => {\n        if (!this.routers[key].hidden) {\n          router = this.routers[key].path\n          return true\n        }\n      })\n      return router\n    },\n    // 菜单选择事件\n    handleSelect(key, keyPath) {\n      this.currentIndex = key\n      if (this.ishttp(key)) {\n        // http(s):// 路径新窗口打开\n        window.open(key, '_blank')\n      } else if (key.indexOf('/redirect') !== -1) {\n        // /redirect 路径内部打开\n        this.$router.push({ path: key.replace('/redirect', '') })\n      } else {\n        // 显示左侧联动菜单\n        this.activeRoutes(key)\n      }\n    },\n    // 当前激活的路由\n    activeRoutes(key) {\n      var routes = []\n      if (this.childrenMenus && this.childrenMenus.length > 0) {\n        this.childrenMenus.map((item) => {\n          if (key === item.parentPath || (key === 'index' && item.path === '')) {\n            routes.push(item)\n          }\n        })\n      }\n      if (routes.length > 0) {\n        this.$store.commit('SET_SIDEBAR_ROUTERS', routes)\n      }\n      return routes\n    },\n    ishttp(url) {\n      return url.indexOf('http://') !== -1 || url.indexOf('https://') !== -1\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.topmenu-container.el-menu--horizontal > .el-menu-item {\n  float: left;\n  height: 50px !important;\n  line-height: 50px !important;\n  color: #999093 !important;\n  padding: 0 5px !important;\n  margin: 0 10px !important;\n}\n\n.topmenu-container.el-menu--horizontal > .el-menu-item.is-active, .el-menu--horizontal > .el-submenu.is-active .el-submenu__title {\n  border-bottom: 2px solid #{'var(--theme)'} !important;\n  color: #303133;\n}\n\n/* submenu item */\n.topmenu-container.el-menu--horizontal > .el-submenu .el-submenu__title {\n  float: left;\n  height: 50px !important;\n  line-height: 50px !important;\n  color: #999093 !important;\n  padding: 0 5px !important;\n  margin: 0 10px !important;\n}\n</style>\n"],"sourceRoot":"src/components/TopNav"}]}