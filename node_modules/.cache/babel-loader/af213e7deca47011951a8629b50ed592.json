{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\customer\\customerList.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\customer\\customerList.vue","mtime":1652235258000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar customerServer = _interopRequireWildcard(require(\"@/api/customer\"));\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\nvar _dict = require(\"@/api/dict\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// Secondary package based on el-pagination\nvar ACCOUNT_STATUS = {\n  '0': '有效',\n  '1': '无效'\n};\nvar _default = {\n  name: 'CustomerList',\n  components: {\n    Pagination: _Pagination.default\n  },\n  data: function data() {\n    return {\n      ACCOUNT_STATUS: ACCOUNT_STATUS,\n      customerData: [],\n      searchForm: {\n        companyName: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      titleMap: {\n        edit: '修改客户',\n        create: '新增客户'\n      },\n      customForm: {\n        cusContBaseInfoId: '',\n        companyName: '',\n        address: '',\n        postCode: '',\n        jurPerson: '',\n        agentPerson: '',\n        telFax: '',\n        bankName: '',\n        bankNo: '',\n        taxNumber: ''\n      },\n      customRules: {\n        companyName: [{\n          required: true,\n          message: '请录入单位名称',\n          trigger: 'blur'\n        }],\n        address: [{\n          required: true,\n          message: '请录入单位地址',\n          trigger: 'blur'\n        }],\n        postCode: [{\n          required: true,\n          message: '请录入邮政编码',\n          trigger: 'blur'\n        }],\n        jurPerson: [{\n          required: true,\n          message: '请录入法定代表人',\n          trigger: 'blur'\n        }],\n        agentPerson: [{\n          required: true,\n          message: '请录入委托代理人',\n          trigger: 'blur'\n        }],\n        telFax: [{\n          required: true,\n          message: '请录入电话/传真',\n          trigger: 'blur'\n        }],\n        bankName: [{\n          required: true,\n          message: '请录入开户银行',\n          trigger: 'blur'\n        }],\n        bankNo: [{\n          required: true,\n          message: '请录入银行账号',\n          trigger: 'blur'\n        }],\n        taxNumber: [{\n          required: true,\n          message: '请录入企业税号',\n          trigger: 'blur'\n        }]\n      },\n      customerDialogStatus: 'create',\n      customerDialogVisible: false,\n      departmentArray: [],\n      customerActiveName: '1',\n      factorData: [],\n      factorForm: {\n        checkCount: 1,\n        CountType: '',\n        reportAmountRate: 10,\n        expediteAmountRate: 0,\n        laborAmount: '',\n        tripAmount: '',\n        taxAmountRate: 6\n      },\n      factorRules: {},\n      priceArray: [],\n      innerPriceVisible: false,\n      addPriceForm: {\n        selfName: '',\n        amount: 0.00\n      },\n      uploadVisible: false,\n      excelFileList: [],\n      fileResult: ''\n    };\n  },\n  created: function created() {\n    this.handleSearch();\n  },\n  methods: {\n    getDicKey: function getDicKey(type, code) {\n      var _this = this;\n\n      (0, _dict.getDicKey)(code).then(function (result) {\n        if (result.code === 200) {\n          _this[type] = result.result;\n        }\n      });\n    },\n    handleSearch: function handleSearch() {\n      var _this2 = this;\n\n      customerServer.getCustomerForPage(this.searchForm).then(function (res) {\n        if (res.code === 200 && res.result) {\n          _this2.customerData = res.result.records || [];\n          _this2.total = res.result.total;\n        }\n      });\n    },\n    // 重置\n    handleCreate: function handleCreate() {\n      this.clearForm();\n      this.customerDialogStatus = 'create';\n      this.customerDialogVisible = true;\n    },\n    handleUpdate: function handleUpdate(row) {\n      this.clearForm();\n      this.customForm = Object.assign({}, row);\n      this.customForm.cusContBaseInfoId = row.id;\n      this.customerDialogStatus = 'edit';\n      this.customerDialogVisible = true;\n    },\n    confirmDialog: function confirmDialog() {\n      if (this.customerDialogStatus === 'create') {\n        this.confirmCreate();\n      } else {\n        this.confirmUpdate();\n      }\n    },\n    confirmCreate: function confirmCreate() {\n      var _this3 = this;\n\n      this.$refs.customForm.validate(function (valid) {\n        if (valid) {\n          customerServer.addCusContBase(_this3.customForm).then(function (request) {\n            _this3.$notify({\n              title: '成功',\n              message: request.message,\n              type: 'success'\n            });\n\n            _this3.handleSearch();\n\n            _this3.customerDialogVisible = false;\n\n            _this3.$refs.customForm.resetFields();\n          }).catch(function () {});\n        } else {\n          return false;\n        }\n      });\n    },\n    confirmUpdate: function confirmUpdate() {\n      var _this4 = this;\n\n      this.$refs.customForm.validate(function (valid) {\n        if (valid) {\n          customerServer.modifyCusContBaseById(_this4.customForm).then(function (request) {\n            _this4.$notify({\n              title: '成功',\n              message: request.message,\n              type: 'success'\n            });\n\n            _this4.handleSearch();\n\n            _this4.customerDialogVisible = false;\n\n            _this4.$refs.customForm.resetFields();\n          }).catch(function () {});\n        } else {\n          return false;\n        }\n      });\n    },\n    handleDelete: function handleDelete(customerId) {\n      var _this5 = this;\n\n      this.$confirm('确定删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        customerServer.delCusContBaseById(customerId).then(function (result) {\n          if (result.code === 200) {\n            _this5.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            });\n\n            _this5.handleSearch();\n          } else {\n            _this5.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            });\n          }\n        });\n      }).catch(function () {});\n    },\n    clearForm: function clearForm() {\n      this.customForm = {\n        cusContBaseInfoId: '',\n        companyName: '',\n        address: '',\n        postCode: '',\n        jurPerson: '',\n        agentPerson: '',\n        telFax: '',\n        bankName: '',\n        bankNo: '',\n        taxNumber: ''\n      };\n    },\n    handleDownloadTep: function handleDownloadTep() {\n      var url = this.$store.getters.sysBaseUrl + '/api/dataImport/downloadCustomerExcel';\n      window.open(url);\n    },\n    handleDownload: function handleDownload() {\n      var url = this.$store.getters.sysBaseUrl + '/api/dataImport/exportCustomer';\n      window.open(url);\n    },\n    customUploadChange: function customUploadChange(file) {\n      if (file.status === 'ready') return;\n\n      if (file.status === 'success') {\n        var res = file.response || {};\n\n        if (res && res.code === 200) {\n          this.fileResult = file.response.result;\n          this.$message({\n            type: 'success',\n            message: file.response.message\n          });\n          this.handleSearch();\n          this.uploadVisible = false;\n        } else {\n          this.$message.error('上传失败!');\n          this.excelFileList = [];\n        }\n      } else {\n        this.$message.error('上传失败!');\n        this.excelFileList = [];\n      }\n    },\n    handleUpload: function handleUpload() {\n      this.uploadVisible = true;\n      this.excelFileList = [];\n      this.fileResult = '';\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["customerList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"18\">\n          <el-form-item label=\"单位名称:\">\n            <el-input v-model=\"searchForm.companyName\" style=\"width:180px\" placeholder=\"单位名称\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleSearch\"> 查询</el-button>\n            <!-- <el-button type=\"primary\" @click=\"handleDownload\"> 导出</el-button> -->\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\" class=\"search-right\">\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-plus\" @click=\"handleCreate\">新增</el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-upload2\" @click=\"handleUpload\">批量导入</el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-download\" @click=\"handleDownload\">导出</el-button>\n          <el-button type=\"text\" size=\"small\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div>\n      <el-table\n        stripe\n        border\n        :data=\"customerData\"\n        highlight-current-row\n        :header-cell-style=\"{background:'#ECF3FC'}\"\n        style=\"width: 100%\"\n      >\n        <template slot=\"empty\">\n          <div class=\"table_empty\">\n            <div class=\"empty_tips\">\n              <span>\n                暂无客户,\n              </span>\n              <el-button type=\"text\" size=\"small\" style=\"font-size:14px;\" @click=\"handleCreate\">新建客户</el-button>\n            </div>\n          </div>\n        </template>\n        <el-table-column type=\"index\" width=\"50\" label=\"序号\" fixed=\"left\" align=\"center\" />\n        <el-table-column prop=\"companyName\" label=\"单位名称\" fixed=\"left\" align=\"center\" />\n        <el-table-column prop=\"jurPerson\" label=\"法定代表人\" align=\"center\" />\n        <el-table-column prop=\"address\" label=\"通讯地址\" align=\"center\" />\n        <el-table-column prop=\"agentPerson\" label=\"委托代理人\" align=\"center\" />\n        <el-table-column prop=\"telFax\" label=\"电话/传真\" align=\"center\" />\n        <el-table-column prop=\"bankName\" label=\"开户行\" width=\"100\" align=\"center\" />\n        <el-table-column prop=\"bankNo\" label=\"银行卡号\" align=\"center\" />\n        <el-table-column prop=\"taxNumber\" label=\"识别号/信用代码\" min-width=\"100\" align=\"center\" />\n        <el-table-column prop=\"createUserId\" label=\"创建人\" width=\"110px\" align=\"center\" />\n\n        <el-table-column fixed=\"right\" align=\"center\" label=\"操作\" width=\"130\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" @click=\"handleUpdate(scope.row)\"> 修改</el-button>\n            <div class=\"erc-divider-vertical\" />\n            <el-button type=\"text\" @click=\"handleDelete(scope.row.id)\"> 删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n    <el-dialog :title=\"titleMap[customerDialogStatus]\" :visible.sync=\"customerDialogVisible\" width=\"65%\" center :close-on-click-modal=\"false\">\n      <el-form ref=\"customForm\" :model=\"customForm\" :rules=\"customRules\" label-width=\"100px\">\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"companyName\" label=\"单位名称:\">\n              <el-input v-model=\"customForm.companyName\" placeholder=\"单位名称\" maxlength=\"25\" style=\"width: 80%;\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"address\" label=\"单位地址:\">\n              <el-input v-model=\"customForm.address\" placeholder=\"单位地址\" style=\"width: 80%;\" maxlength=\"35\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"telFax\" label=\"电话/传真:\">\n              <el-input v-model=\"customForm.telFax\" placeholder=\"电话/传真\" style=\"width: 80%;\" maxlength=\"15\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"postCode\" label=\"邮政编码:\">\n              <el-input v-model=\"customForm.postCode\" placeholder=\"邮政编码\" style=\"width: 80%;\" maxlength=\"6\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"jurPerson\" label=\"法定代表人:\">\n              <el-input v-model=\"customForm.jurPerson\" placeholder=\"法定代表人\" style=\"width: 80%;\" maxlength=\"40\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item prop=\"agentPerson\" label=\"委托代理人:\">\n              <el-input v-model=\"customForm.agentPerson\" placeholder=\"委托代理人\" style=\"width: 80%;\" maxlength=\"40\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"开户银行:\">\n              <el-input v-model=\"customForm.bankName\" placeholder=\"开户银行\" style=\"width: 80%;\" maxlength=\"30\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"银行账号:\">\n              <el-input v-model=\"customForm.bankNo\" placeholder=\"银行账号\" style=\"width: 80%;\" maxlength=\"30\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"18\">\n            <el-form-item label=\"纳税人识别号/统一社会信用代码:\" label-width=\"230px\">\n              <el-input v-model=\"customForm.taxNumber\" placeholder=\"企业税号\" style=\"width: 300px\" maxlength=\"20\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"customerDialogVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmDialog\">确认</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"批量导入客户\" :visible.sync=\"uploadVisible\" append-to-body>\n      <div class=\"block\">\n        <el-timeline>\n          <el-timeline-item size=\"large\">\n            <span slot=\"dot\" class=\"time-dot\">\n              1\n            </span>\n            <el-row>\n              <el-col :span=\"24\">\n                下载模板，批量填写客户信息\n              </el-col>\n            </el-row>\n            <el-row style=\"padding-top:10px;\">\n              <el-col :span=\"24\">\n                <el-button size=\"mini\" type=\"primary\" @click=\"handleDownloadTep()\">模板下载</el-button>\n              </el-col>\n            </el-row>\n          </el-timeline-item>\n          <el-timeline-item size=\"large\">\n            <span slot=\"dot\" class=\"time-dot\">\n              2\n            </span>\n            <el-row>\n              <el-col :span=\"24\">\n                上传填写好的客户信息表格\n              </el-col>\n            </el-row>\n            <el-row style=\"padding-top:10px;\">\n              <el-col :span=\"24\">\n                <el-upload\n                  class=\"upload-demo\"\n                  action=\"/api/dataImport/uploadCustomer\"\n                  :on-change=\"customUploadChange\"\n                  :file-list=\"excelFileList\"\n                  accept=\".xlsx,.xls\"\n                  :limit=\"1\"\n                  style=\"width: 300px;\"\n                >\n                  <el-button size=\"mini\" type=\"primary\">点击上传</el-button>\n                  <!-- <div class=\"el-upload__text\"><em>点击上传</em></div> -->\n                  <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:red;\">您只能上传.xlsx,.xls格式的文件</div>\n                </el-upload>\n              </el-col>\n            </el-row>\n          </el-timeline-item>\n        </el-timeline>\n        <el-row>\n          <el-col :span=\"24\" style=\"\">\n            <span style=\"color:red; font-size: 13px\">备注：批量导入客户功能，只会将上传的客户信息列表内的客户新增到系统内，不对原有客户信息做任何替换或修改。</span>\n          </el-col>\n        </el-row>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"uploadVisible=false\">关闭</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- <el-dialog title=\"文件上传\" :visible.sync=\"uploadVisible\" center>\n      <el-form>\n        <el-form-item>\n          <el-upload\n            class=\"upload-demo\"\n            action=\"/api/dataImport/uploadCustomer\"\n            :on-change=\"customUploadChange\"\n            :file-list=\"excelFileList\"\n            accept=\".xlsx,.xls\"\n            :limit=\"1\"\n            style=\"width: 300px;\"\n          >\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n            <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:red;\">您只能上传.xlsx,.xls格式的文件</div>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"uploadVisible=false\">关闭</el-button>\n      </div>\n    </el-dialog> -->\n  </div>\n</template>\n\n<script>\nimport * as customerServer from '@/api/customer'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nimport { getDicKey } from '@/api/dict'\nconst ACCOUNT_STATUS = {\n  '0': '有效',\n  '1': '无效'\n}\nexport default {\n  name: 'CustomerList',\n  components: { Pagination },\n  data() {\n    return {\n      ACCOUNT_STATUS,\n      customerData: [],\n      searchForm: {\n        companyName: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      titleMap: {\n        edit: '修改客户',\n        create: '新增客户'\n      },\n      customForm: {\n        cusContBaseInfoId: '',\n        companyName: '',\n        address: '',\n        postCode: '',\n        jurPerson: '',\n        agentPerson: '',\n        telFax: '',\n        bankName: '',\n        bankNo: '',\n        taxNumber: ''\n      },\n      customRules: {\n        companyName: [{ required: true, message: '请录入单位名称', trigger: 'blur' }],\n        address: [{ required: true, message: '请录入单位地址', trigger: 'blur' }],\n        postCode: [{ required: true, message: '请录入邮政编码', trigger: 'blur' }],\n        jurPerson: [{ required: true, message: '请录入法定代表人', trigger: 'blur' }],\n        agentPerson: [{ required: true, message: '请录入委托代理人', trigger: 'blur' }],\n        telFax: [{ required: true, message: '请录入电话/传真', trigger: 'blur' }],\n        bankName: [{ required: true, message: '请录入开户银行', trigger: 'blur' }],\n        bankNo: [{ required: true, message: '请录入银行账号', trigger: 'blur' }],\n        taxNumber: [{ required: true, message: '请录入企业税号', trigger: 'blur' }]\n      },\n      customerDialogStatus: 'create',\n      customerDialogVisible: false,\n      departmentArray: [],\n      customerActiveName: '1',\n      factorData: [],\n      factorForm: {\n        checkCount: 1,\n        CountType: '',\n        reportAmountRate: 10,\n        expediteAmountRate: 0,\n        laborAmount: '',\n        tripAmount: '',\n        taxAmountRate: 6\n      },\n      factorRules: {},\n      priceArray: [],\n      innerPriceVisible: false,\n      addPriceForm: {\n        selfName: '',\n        amount: 0.00\n      },\n      uploadVisible: false,\n      excelFileList: [],\n      fileResult: ''\n    }\n  },\n  created() {\n    this.handleSearch()\n  },\n  methods: {\n    getDicKey(type, code) {\n      getDicKey(code).then(result => {\n        if (result.code === 200) {\n          this[type] = result.result\n        }\n      })\n    },\n    handleSearch() {\n      customerServer.getCustomerForPage(this.searchForm).then(res => {\n        if (res.code === 200 && res.result) {\n          this.customerData = res.result.records || []\n          this.total = res.result.total\n        }\n      })\n    },\n    // 重置\n    handleCreate() {\n      this.clearForm()\n      this.customerDialogStatus = 'create'\n      this.customerDialogVisible = true\n    },\n    handleUpdate(row) {\n      this.clearForm()\n      this.customForm = Object.assign({}, row)\n      this.customForm.cusContBaseInfoId = row.id\n      this.customerDialogStatus = 'edit'\n      this.customerDialogVisible = true\n    },\n    confirmDialog() {\n      if (this.customerDialogStatus === 'create') {\n        this.confirmCreate()\n      } else {\n        this.confirmUpdate()\n      }\n    },\n    confirmCreate() {\n      this.$refs.customForm.validate(valid => {\n        if (valid) {\n          customerServer.addCusContBase(this.customForm).then(request => {\n            this.$notify({\n              title: '成功',\n              message: request.message,\n              type: 'success'\n            })\n            this.handleSearch()\n            this.customerDialogVisible = false\n            this.$refs.customForm.resetFields()\n          }).catch(() => {})\n        } else {\n          return false\n        }\n      })\n    },\n    confirmUpdate() {\n      this.$refs.customForm.validate(valid => {\n        if (valid) {\n          customerServer.modifyCusContBaseById(this.customForm).then(request => {\n            this.$notify({\n              title: '成功',\n              message: request.message,\n              type: 'success'\n            })\n            this.handleSearch()\n            this.customerDialogVisible = false\n            this.$refs.customForm.resetFields()\n          }).catch(() => {})\n        } else {\n          return false\n        }\n      })\n    },\n    handleDelete(customerId) {\n      this.$confirm('确定删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        customerServer.delCusContBaseById(customerId).then(result => {\n          if (result.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: result.message,\n              type: 'success'\n            })\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: result.message,\n              type: 'error'\n            })\n          }\n        })\n      }).catch(() => {})\n    },\n    clearForm() {\n      this.customForm = {\n        cusContBaseInfoId: '',\n        companyName: '',\n        address: '',\n        postCode: '',\n        jurPerson: '',\n        agentPerson: '',\n        telFax: '',\n        bankName: '',\n        bankNo: '',\n        taxNumber: ''\n      }\n    },\n    handleDownloadTep() {\n      const url = this.$store.getters.sysBaseUrl + '/api/dataImport/downloadCustomerExcel'\n      window.open(url)\n    },\n    handleDownload() {\n      const url = this.$store.getters.sysBaseUrl + '/api/dataImport/exportCustomer'\n      window.open(url)\n    },\n    customUploadChange(file) {\n      if (file.status === 'ready') return\n      if (file.status === 'success') {\n        const res = file.response || {}\n        if (res && res.code === 200) {\n          this.fileResult = file.response.result\n          this.$message({\n            type: 'success',\n            message: file.response.message\n          })\n          this.handleSearch()\n          this.uploadVisible = false\n        } else {\n          this.$message.error('上传失败!')\n          this.excelFileList = []\n        }\n      } else {\n        this.$message.error('上传失败!')\n        this.excelFileList = []\n      }\n    },\n    handleUpload() {\n      this.uploadVisible = true\n      this.excelFileList = []\n      this.fileResult = ''\n    }\n\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .time-dot {\n    text-align: center;\n    justify-content: center;\n    padding-top: 4px;\n    position: relative;\n    border-radius: 50%;\n    background: #dfe4ed;\n    height: 25px;\n    width: 25px;\n    left: -7px;\n  }\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n</style>\n"],"sourceRoot":"src/views/customer"}]}