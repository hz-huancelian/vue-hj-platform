{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\utils\\request.js","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\utils\\request.js","mtime":1638345722000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjectsJiu\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _elementUi = require(\"element-ui\");\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _auth = require(\"@/utils/auth\");\n\n// create an axios instance\nvar service = _axios.default.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  // url = base url + request url\n  timeout: 5000 // request timeout\n\n});\n\nvar service2 = _axios.default.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  timeout: 6000\n});\n\nservice2.interceptors;\nservice.interceptors.request.use(function (config) {\n  // do something before request is sent\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  config.headers['Cache-Control'] = 'no-cache'; // 解决 类似360浏览器Ajax缓存问题\n\n  config.headers['Pragma'] = 'no-cache';\n\n  if (_store.default.getters.token) {\n    config.headers['Authorization'] = (0, _auth.getToken)();\n  }\n\n  return config;\n}, function (error) {\n  // do something with request error\n  return Promise.reject(error);\n}); // response interceptor\n\nservice.interceptors.response.use(function (response) {\n  var res = response.data;\n\n  if (res.code !== 200) {\n    if (res.code === 401 || res.code === 403) {\n      (0, _elementUi.Message)({\n        message: '您的登录超时!',\n        type: 'error',\n        duration: 5 * 1000\n      });\n\n      _store.default.dispatch('user/resetToken').then(function () {\n        location.reload();\n      });\n    } else if (res.code === 406) {\n      (0, _elementUi.Message)({\n        message: '您的账号在其他地方访登录!',\n        type: 'error',\n        duration: 3 * 1000\n      });\n\n      _store.default.dispatch('user/resetToken').then(function () {\n        location.reload();\n      });\n    } else {\n      (0, _elementUi.Message)({\n        message: res.message || 'Error',\n        type: 'error',\n        duration: 5 * 1000\n      });\n      return Promise.reject(new Error(res.message || 'Error'));\n    }\n  } else {\n    return res;\n  }\n}, function (error) {\n  var errObj = error.response.data;\n  (0, _elementUi.Message)({\n    message: '服务器请求异常!',\n    type: 'error',\n    duration: 5 * 1000\n  });\n  return Promise.reject(errObj);\n});\nvar _default = service;\nexports.default = _default;",{"version":3,"sources":["F:/webstormProjectsJiu/vue-hj-platform/src/utils/request.js"],"names":["service","axios","create","baseURL","process","env","VUE_APP_BASE_API","timeout","service2","interceptors","request","use","config","headers","store","getters","token","error","Promise","reject","response","res","data","code","message","type","duration","dispatch","then","location","reload","Error","errObj"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;AACA,IAAMA,OAAO,GAAGC,eAAMC,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvCC,EAAAA,OAAO,EAAE,IAFkB,CAEb;;AAFa,CAAb,CAAhB;;AAKA,IAAMC,QAAQ,GAAGP,eAAMC,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADO;AAE5BC,EAAAA,OAAO,EAAE;AAFmB,CAAb,CAAjB;;AAKAC,QAAQ,CAACC,YAAT;AAEAT,OAAO,CAACS,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AACAA,EAAAA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkC,UAAlC,CAHQ,CAGqC;;AAC7CD,EAAAA,MAAM,CAACC,OAAP,CAAe,QAAf,IAA2B,UAA3B;;AACA,MAAIC,eAAMC,OAAN,CAAcC,KAAlB,EAAyB;AACvBJ,IAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkC,qBAAlC;AACD;;AACD,SAAOD,MAAP;AACD,CAVH,EAWE,UAAAK,KAAK,EAAI;AACP;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAdH,E,CAiBA;;AACAjB,OAAO,CAACS,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B,CACE,UAAAS,QAAQ,EAAI;AACV,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AACpB,QAAIF,GAAG,CAACE,IAAJ,KAAa,GAAb,IAAoBF,GAAG,CAACE,IAAJ,KAAa,GAArC,EAA0C;AACxC,8BAAQ;AACNC,QAAAA,OAAO,EAAE,SADH;AAENC,QAAAA,IAAI,EAAE,OAFA;AAGNC,QAAAA,QAAQ,EAAE,IAAI;AAHR,OAAR;;AAKAZ,qBAAMa,QAAN,CAAe,iBAAf,EAAkCC,IAAlC,CAAuC,YAAM;AAC3CC,QAAAA,QAAQ,CAACC,MAAT;AACD,OAFD;AAGD,KATD,MASO,IAAIT,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AAC3B,8BAAQ;AACNC,QAAAA,OAAO,EAAE,eADH;AAENC,QAAAA,IAAI,EAAE,OAFA;AAGNC,QAAAA,QAAQ,EAAE,IAAI;AAHR,OAAR;;AAKAZ,qBAAMa,QAAN,CAAe,iBAAf,EAAkCC,IAAlC,CAAuC,YAAM;AAC3CC,QAAAA,QAAQ,CAACC,MAAT;AACD,OAFD;AAGD,KATM,MASA;AACL,8BAAQ;AACNN,QAAAA,OAAO,EAAEH,GAAG,CAACG,OAAJ,IAAe,OADlB;AAENC,QAAAA,IAAI,EAAE,OAFA;AAGNC,QAAAA,QAAQ,EAAE,IAAI;AAHR,OAAR;AAKA,aAAOR,OAAO,CAACC,MAAR,CAAe,IAAIY,KAAJ,CAAUV,GAAG,CAACG,OAAJ,IAAe,OAAzB,CAAf,CAAP;AACD;AACF,GA3BD,MA2BO;AACL,WAAOH,GAAP;AACD;AACF,CAjCH,EAkCE,UAAAJ,KAAK,EAAI;AACP,MAAMe,MAAM,GAAGf,KAAK,CAACG,QAAN,CAAeE,IAA9B;AACA,0BAAQ;AACNE,IAAAA,OAAO,EAAE,UADH;AAENC,IAAAA,IAAI,EAAE,OAFA;AAGNC,IAAAA,QAAQ,EAAE,IAAI;AAHR,GAAR;AAKA,SAAOR,OAAO,CAACC,MAAR,CAAea,MAAf,CAAP;AACD,CA1CH;eA6CehC,O","sourcesContent":["import axios from 'axios'\nimport { Message } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\n\n// create an axios instance\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  timeout: 5000 // request timeout\n})\n\nconst service2 = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  timeout: 6000\n})\n\nservice2.interceptors\n\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n    config.headers['X-Requested-With'] = 'XMLHttpRequest'\n    config.headers['Cache-Control'] = 'no-cache' // 解决 类似360浏览器Ajax缓存问题\n    config.headers['Pragma'] = 'no-cache'\n    if (store.getters.token) {\n      config.headers['Authorization'] = getToken()\n    }\n    return config\n  },\n  error => {\n    // do something with request error\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\nservice.interceptors.response.use(\n  response => {\n    const res = response.data\n    if (res.code !== 200) {\n      if (res.code === 401 || res.code === 403) {\n        Message({\n          message: '您的登录超时!',\n          type: 'error',\n          duration: 5 * 1000\n        })\n        store.dispatch('user/resetToken').then(() => {\n          location.reload()\n        })\n      } else if (res.code === 406) {\n        Message({\n          message: '您的账号在其他地方访登录!',\n          type: 'error',\n          duration: 3 * 1000\n        })\n        store.dispatch('user/resetToken').then(() => {\n          location.reload()\n        })\n      } else {\n        Message({\n          message: res.message || 'Error',\n          type: 'error',\n          duration: 5 * 1000\n        })\n        return Promise.reject(new Error(res.message || 'Error'))\n      }\n    } else {\n      return res\n    }\n  },\n  error => {\n    const errObj = error.response.data\n    Message({\n      message: '服务器请求异常!',\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(errObj)\n  }\n)\n\nexport default service\n"]}]}