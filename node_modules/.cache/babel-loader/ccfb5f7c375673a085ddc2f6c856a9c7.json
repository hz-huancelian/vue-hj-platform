{"remainingRequest":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjects\\vue-hj-platform\\src\\views\\sample\\approve\\approveHisList.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjects\\vue-hj-platform\\src\\views\\sample\\approve\\approveHisList.vue","mtime":1652691576000},{"path":"F:\\webstormProjects\\vue-hj-platform\\babel.config.js","mtime":1637214064000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"F:\\\\webstormProjects\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireDefault.js\");\n\nvar _interopRequireWildcard = require(\"F:\\\\webstormProjects\\\\vue-hj-platform\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\interopRequireWildcard.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nvar sampleServer = _interopRequireWildcard(require(\"@/api/sample\"));\n\nvar stockServer = _interopRequireWildcard(require(\"@/api/stock\"));\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// Secondary package based on el-pagination\nvar ACCOUNT_STATUS = {\n  '0': '草稿',\n  '1': '待审核',\n  '2': '审核驳回',\n  '3': '审核通过'\n};\nvar _default = {\n  name: 'SampleHisApprove',\n  components: {\n    Pagination: _Pagination.default\n  },\n  filters: {\n    statusQualityFilter: function statusQualityFilter(status) {\n      var statusMap = {\n        '0': 'info',\n        '1': '',\n        '2': 'danger',\n        '3': 'success'\n      };\n      return statusMap[status];\n    }\n  },\n  props: {\n    sampTaskId: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      ACCOUNT_STATUS: ACCOUNT_STATUS,\n      sampleData: [],\n      searchForm: {\n        jobId: '',\n        sampItemId: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      approveVisible: false,\n      sampleVisible: false,\n      sampleDetailForm: {\n        factorName: '',\n        factorPoint: '',\n        secdClassName: '',\n        factorDataVos: [],\n        sampleDataVo: {\n          collectDate: '',\n          collectLocation: '',\n          imageList: [],\n          sampleData: [],\n          specialNote: ''\n        },\n        sampleJobVo: {\n          projectName: '',\n          jobRemark: ''\n        }\n      },\n      currentSample: '',\n      approveForm: {\n        sampItemId: '',\n        auditFlag: '1',\n        auditReason: ''\n      },\n      sampleImage: '',\n      sampleImageList: [],\n      showTitle: '',\n      sampleDetails: [],\n      multipleSelection: [],\n      batchApproveVisible: false,\n      batchApprove: {\n        sampItemId: '',\n        auditFlag: '1',\n        auditReason: ''\n      },\n      sampleDataInfo: [],\n      sampleSecInfo: []\n    };\n  },\n  created: function created() {\n    this.searchForm.sampTaskId = this.sampTaskId;\n    this.handleSearch();\n  },\n  methods: {\n    handleSearch: function handleSearch() {\n      var _this = this;\n\n      sampleServer.findHisAuditSampItemForManageByCondition(this.searchForm).then(function (res) {\n        if (res.code === 200) {\n          _this.sampleData = res.result.records;\n          _this.total = res.result.total;\n        }\n      });\n    },\n    handleDetail: function handleDetail(row) {\n      var _this2 = this;\n\n      // 获取数据\n      this.currentSample = row.sampleNo;\n      this.sampleImageList = [];\n      this.sampleDataInfo = [];\n      this.sampleSecInfo = [];\n      this.sampleImage = '';\n      var baseUrl = this.$store.getters.sysBaseUrl + '/cyImg/';\n      stockServer.getSampleDataBySampItemId(row.sampItemId).then(function (res) {\n        if (res.code === 200 && res.result) {\n          _this2.sampleDetailForm = res.result || {};\n\n          _this2.$nextTick(function () {\n            // 提取图片\n            _this2.sampleImageList = res.result.sampleDataVo.imageList.map(function (i) {\n              return baseUrl + i;\n            }); // 二级类别\n\n            _this2.sampleSecInfo = res.result.sampleDataVo.sampleData || []; // 因子\n\n            var nfactorDataVos = res.result.factorDataVos.filter(function (i) {\n              return i.dataEntryStep === '1';\n            }) || []; // 因子\n\n            _this2.sampleDataInfo = nfactorDataVos.map(function (i) {\n              if (i.measuredFormVal && i.measuredFormVal.length > 0) {\n                _this2.$set(i, 'measuredForm', JSON.parse(i.measuredFormVal));\n              }\n\n              return i;\n            });\n          });\n\n          _this2.sampleVisible = true;\n        }\n      }); // 封装展示数据\n    },\n    handleBatchApprove: function handleBatchApprove() {\n      if (this.multipleSelection && this.multipleSelection.length > 0) {\n        var samples = this.multipleSelection.map(function (i) {\n          return i.sampItemId;\n        });\n        this.batchApprove.sampItemId = samples.toString();\n        this.batchApprove.auditFlag = '1';\n        this.batchApprove.auditReason = '';\n        this.showTitle = '样品审核';\n        this.batchApproveVisible = true;\n      } else {\n        this.$message.warning('至少选择一个任务进行审核');\n      }\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    batchConfirmDialog: function batchConfirmDialog() {\n      var _this3 = this;\n\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        sampleServer.batchDoAuditSampItemForManager(_this3.batchApprove).then(function (res) {\n          if (res.code === 200) {\n            _this3.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            });\n\n            _this3.batchApproveVisible = false;\n\n            _this3.handleSearch();\n          } else {\n            _this3.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            });\n          }\n        });\n      }).catch(function () {});\n    },\n    confirmDialog: function confirmDialog() {\n      var _this4 = this;\n\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        sampleServer.doAuditSampItemForManager(_this4.approveForm).then(function (res) {\n          if (res.code === 200) {\n            _this4.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            });\n\n            _this4.approveVisible = false;\n\n            _this4.handleSearch();\n          } else {\n            _this4.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            });\n          }\n        });\n      }).catch(function () {});\n    },\n    goBack: function goBack() {\n      this.$router.back();\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["approveHisList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"20\">\n          <el-form-item label=\"样品编号:\">\n            <el-input v-model=\"searchForm.sampItemId\" style=\"width:165px\" placeholder=\"样品编号\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleSearch\"> 查询</el-button>\n            <el-button type=\"\" @click=\"goBack\">返回</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"4\" class=\"search-right\">\n          <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div>\n      <el-table\n        stripe\n        border\n        :data=\"sampleData\"\n        highlight-current-row\n        :header-cell-style=\"{background:'#ECF3FC'}\"\n        style=\"width: 100%\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <template slot=\"empty\">\n          <div class=\"table_empty\">\n            <div class=\"empty_tips\">\n              <span>\n                暂无审核信息\n              </span>\n            </div>\n          </div>\n        </template>\n        <el-table-column type=\"index\" width=\"55\" label=\"序号\" align=\"center\" />\n        <el-table-column prop=\"sampleNo\" label=\"样品编号\" min-width=\"140px\" align=\"center\" />\n        <el-table-column prop=\"projectName\" label=\"项目名称\" align=\"center\" min-width=\"140px\" />\n        <el-table-column prop=\"inspectionName\" label=\"受检单位\" align=\"center\" />\n        <el-table-column prop=\"collectUser\" label=\"采样人\" width=\"190px\" align=\"center\" />\n        <el-table-column prop=\"reviewUser\" label=\"复核人\" width=\"190px\" align=\"center\" />\n        <el-table-column prop=\"factorPoint\" label=\"采样点位\" align=\"center\" />\n        <el-table-column prop=\"secdClassName\" label=\"检测类别\" width=\"120px\" align=\"center\" />\n        <el-table-column prop=\"finishTime\" label=\"采样登记时间\" width=\"190px\" align=\"center\" />\n        <el-table-column fixed=\"right\" align=\"center\" label=\"操作\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" @click=\"handleDetail(scope.row)\"> 查看</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n    <el-dialog :title=\"currentSample + '-详情'\" :visible.sync=\"sampleVisible\" width=\"85%\" center top=\"5vh\">\n      <el-form :model=\"sampleDetailForm\" label-width=\"180px\" label-position=\"right\">\n        <el-card style=\"margin-top: 5px;padding-bottom: 20px;\">\n          <div slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>基础信息</span>\n          </div>\n          <el-col :span=\"16\" style=\"height:32px;\">\n            <el-form-item label-width=\"100\" label=\"检测因子:\">\n              <span class=\"showTile\">{{ sampleDetailForm.factorName }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\" style=\"height:32px;\">\n            <el-form-item label-width=\"100\" label=\"点位:\">\n              <span class=\"showTile\">{{ sampleDetailForm.factorPoint }}</span>\n            </el-form-item>\n          </el-col>\n          <!--动态二级类别信息-->\n        </el-card>\n        <el-card v-for=\"item in sampleSecInfo\" :key=\"item.groupKey\" style=\"margin-top: 5px;padding-bottom: 20px;\">\n          <div v-if=\"item.groupName && item.groupName != ''\" slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>{{ item.groupName }}</span>\n          </div>\n          <el-col v-for=\"(sitem,index) in item.params\" :key=\"index\" :span=\"8\" style=\"height:32px;\">\n            <el-form-item label-width=\"100\">\n              <span slot=\"label\">{{ sitem.name }}:</span>\n              <span class=\"showTile\">{{ sitem.value?sitem.value.toString():'' }}</span>\n            </el-form-item>\n          </el-col>\n        </el-card>\n\n        <el-card v-if=\"sampleDataInfo && sampleDataInfo.length > 0\" style=\"margin-top: 5px\">\n          <div slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>现场检测因子信息</span>\n          </div>\n          <el-table :data=\"sampleDataInfo\" stripe>\n            <el-table-column prop=\"factorName\" label=\"检测因子项目\" />\n            <el-table-column label=\"因子结果集\">\n              <template slot-scope=\"{row}\">\n                <template v-if=\"row.measuredForm\">\n                  {{ '第一值: ' +row.measuredForm.firstVal + ' 第二值: ' + row.measuredForm.secondVal + \" 均值: \" + row.measuredForm.avgVal }}\n                </template>\n                <template v-else>\n                  {{ row.factorData?row.factorData:'' }}\n                </template>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"checkEquipment\" label=\"检测设备\">\n              <template slot-scope=\"{row}\">\n                {{ row.checkEquipment&&row.checkEquipment.length>0?row.checkEquipment.replaceAll('^_^',' '):'' }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"theoreticalVal\" label=\"理论值\" />\n            <el-table-column prop=\"groundConditions\" label=\"测定值\" />\n          </el-table>\n        </el-card>\n\n        <el-card style=\"margin-top: 5px\">\n          <div slot=\"header\" class=\"clearfix\">\n            <div style=\"width: 3px;margin:auto 3px; height: 20px;background-color:steelblue;\" />\n            <span>现场信息</span>\n          </div>\n          <el-col :span=\"12\">\n            <el-form-item label-width=\"100\" label=\"采样地址:\">\n              <span class=\"showTile\">{{ sampleDetailForm.sampleDataVo.collectLocation }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label-width=\"100\" label=\"采样日期:\">\n              <span class=\"showTile\">{{ sampleDetailForm.sampleDataVo.collectDate }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label-width=\"100\" label=\"现场图片:\">\n              <div v-if=\"sampleImageList && sampleImageList.length > 0\" class=\"demo-image__lazy\">\n                <el-image v-for=\"(url, index) in sampleImageList\" :key=\"index\" :src=\"url\" :preview-src-list=\"sampleImageList\" style=\"width: 100px; height: 100px;margin-left: 10px;\" />\n              </div>\n            </el-form-item>\n          </el-col>\n        </el-card>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"sampleVisible=false\">关 闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport * as sampleServer from '@/api/sample'\nimport * as stockServer from '@/api/stock'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nconst ACCOUNT_STATUS = {\n  '0': '草稿',\n  '1': '待审核',\n  '2': '审核驳回',\n  '3': '审核通过'\n}\n\nexport default {\n  name: 'SampleHisApprove',\n  components: { Pagination },\n  filters: {\n    statusQualityFilter(status) {\n      const statusMap = {\n        '0': 'info',\n        '1': '',\n        '2': 'danger',\n        '3': 'success'\n      }\n      return statusMap[status]\n    }\n  },\n  props: {\n    sampTaskId: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      ACCOUNT_STATUS,\n      sampleData: [],\n      searchForm: {\n        jobId: '',\n        sampItemId: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      approveVisible: false,\n      sampleVisible: false,\n      sampleDetailForm: {\n        factorName: '',\n        factorPoint: '',\n        secdClassName: '',\n        factorDataVos: [],\n        sampleDataVo: {\n          collectDate: '',\n          collectLocation: '',\n          imageList: [],\n          sampleData: [],\n          specialNote: ''\n        },\n        sampleJobVo: {\n          projectName: '',\n          jobRemark: ''\n        }\n      },\n      currentSample: '',\n      approveForm: {\n        sampItemId: '',\n        auditFlag: '1',\n        auditReason: ''\n      },\n      sampleImage: '',\n      sampleImageList: [],\n      showTitle: '',\n      sampleDetails: [],\n      multipleSelection: [],\n      batchApproveVisible: false,\n      batchApprove: {\n        sampItemId: '',\n        auditFlag: '1',\n        auditReason: ''\n      },\n      sampleDataInfo: [],\n      sampleSecInfo: []\n\n    }\n  },\n  created() {\n    this.searchForm.sampTaskId = this.sampTaskId\n    this.handleSearch()\n  },\n  methods: {\n    handleSearch() {\n      sampleServer.findHisAuditSampItemForManageByCondition(this.searchForm).then(res => {\n        if (res.code === 200) {\n          this.sampleData = res.result.records\n          this.total = res.result.total\n        }\n      })\n    },\n    handleDetail(row) {\n      // 获取数据\n      this.currentSample = row.sampleNo\n      this.sampleImageList = []\n      this.sampleDataInfo = []\n      this.sampleSecInfo = []\n      this.sampleImage = ''\n      var baseUrl = this.$store.getters.sysBaseUrl + '/cyImg/'\n      stockServer.getSampleDataBySampItemId(row.sampItemId).then(res => {\n        if (res.code === 200 && res.result) {\n          this.sampleDetailForm = res.result || {}\n          this.$nextTick(() => {\n            // 提取图片\n            this.sampleImageList = res.result.sampleDataVo.imageList.map(i => {\n              return baseUrl + i\n            })\n            // 二级类别\n            this.sampleSecInfo = res.result.sampleDataVo.sampleData || []\n\n            // 因子\n            var nfactorDataVos = res.result.factorDataVos.filter(i => i.dataEntryStep === '1') || []\n            // 因子\n            this.sampleDataInfo = nfactorDataVos.map(i => {\n              if (i.measuredFormVal && i.measuredFormVal.length > 0) {\n                this.$set(i, 'measuredForm', JSON.parse(i.measuredFormVal))\n              }\n              return i\n            })\n          })\n          this.sampleVisible = true\n        }\n      })\n      // 封装展示数据\n    },\n    handleBatchApprove() {\n      if (this.multipleSelection && this.multipleSelection.length > 0) {\n        const samples = this.multipleSelection.map(i => {\n          return i.sampItemId\n        })\n        this.batchApprove.sampItemId = samples.toString()\n        this.batchApprove.auditFlag = '1'\n        this.batchApprove.auditReason = ''\n        this.showTitle = '样品审核'\n        this.batchApproveVisible = true\n      } else {\n        this.$message.warning('至少选择一个任务进行审核')\n      }\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    batchConfirmDialog() {\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        sampleServer.batchDoAuditSampItemForManager(this.batchApprove).then(res => {\n          if (res.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            })\n            this.batchApproveVisible = false\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            })\n          }\n        })\n      }).catch(() => {})\n    },\n    confirmDialog() {\n      this.$confirm('确定提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        sampleServer.doAuditSampItemForManager(this.approveForm).then(res => {\n          if (res.code === 200) {\n            this.$notify({\n              title: '成功',\n              message: res.message,\n              type: 'success'\n            })\n            this.approveVisible = false\n            this.handleSearch()\n          } else {\n            this.$notify({\n              title: '失败',\n              message: res.message,\n              type: 'error'\n            })\n          }\n        })\n      }).catch(() => {})\n    },\n    goBack() {\n      this.$router.back()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n</style>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n  .block-flex {\n    position: relative;\n    display: flex;\n    &>div{\n      border: 1px solid #B7B7B7;\n      width: 100px;\n      margin: 0;\n      line-height: 30px;\n      text-align: center;\n    }\n    &>div:first-child {\n      background: #B7B7B7;\n    }\n  }\n  .card-left {\n    width: 100%;\n    min-height: 200px;\n    max-height: 400px;\n  }\n  .card-right {\n    width: 100%;\n    min-height: 200px;\n    max-height: 400px;\n  }\n  .el-card {\n    overflow: auto;\n  }\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n  // /deep/.el-table__header-wrapper  .el-checkbox{\n  //   display:none\n  // }\n\n</style>\n<style scoped>\n\ntable {\n    background-color: transparent\n}\n\ncaption {\n    padding-top: 8px;\n    padding-bottom: 8px;\n    color: #777;\n    text-align: left\n}\n\nth {\n    text-align: left\n}\n\n.table {\n    width: 100%;\n    max-width: 100%;\n    margin-bottom: 20px\n}\n\n.table>tbody>tr>td,.table>tbody>tr>th,.table>tfoot>tr>td,.table>tfoot>tr>th,.table>thead>tr>td,.table>thead>tr>th {\n    padding: 8px;\n    line-height: 1.42857143;\n    vertical-align: middle;\n    border-top: 1px solid #ddd\n}\n\n.table>thead>tr>th {\n    vertical-align: bottom;\n    border-bottom: 2px solid #ddd\n}\n\n.table>caption+thead>tr:first-child>td,.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>td,.table>thead:first-child>tr:first-child>th {\n    border-left: 1px solid #F1F2F4\n}\n\n.table>tbody+tbody {\n    border-top: 2px solid #ddd\n}\n\n.table .table {\n    background-color: #fff\n}\n\n.table-condensed>tbody>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>thead>tr>th {\n    padding: 5px\n}\n\n.table-bordered {\n    border: 1px solid #ddd\n}\n\n.table-bordered>tbody>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>thead>tr>th {\n    border: 1px solid #ddd\n}\n\n.table-bordered>thead>tr>td,.table-bordered>thead>tr>th {\n    border-bottom-width: 2px\n}\n\n.table-striped>tbody>tr:nth-of-type(odd) {\n    background-color: #f9f9f9\n}\n\n.table-hover>tbody>tr:hover {\n    background-color: #f5f5f5\n}\n\ntable col[class*=col-] {\n    position: static;\n    display: table-column;\n    float: none\n}\n\ntable td[class*=col-],table th[class*=col-] {\n    position: static;\n    display: table-cell;\n    float: none\n}\n\n.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active {\n    background-color: #f5f5f5\n}\n\n.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover {\n    background-color: #e8e8e8\n}\n\n.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success {\n    background-color: #dff0d8\n}\n\n.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover {\n    background-color: #d0e9c6\n}\n\n.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>thead>tr>td.info,.table>thead>tr>th.info {\n    background-color: #d9edf7\n}\n\n.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr.info:hover>th,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover {\n    background-color: #c4e3f3\n}\n\n.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>thead>tr>td.warning,.table>thead>tr>th.warning {\n    background-color: #fcf8e3\n}\n\n.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover {\n    background-color: #faf2cc\n}\n\n.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>thead>tr>td.danger,.table>thead>tr>th.danger {\n    background-color: #f2dede\n}\n\n.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover {\n    background-color: #ebcccc\n}\n\n.table-responsive {\n  min-height: 3.01%;\n  overflow-x: auto;\n}\n\n.table-bordered, .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > td, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > thead > tr > th {\n    border: 1px solid #e9ecef;\n    text-align: center;\n}\n\n.table-bordered, td, th {\n    border-radius: 0 !important;\n}\n\n.table-bordered > tbody > tr:last-child > td {\n    border-bottom: 1px solid #e9ecef;\n}\n\n.bootstrap-table .fixed-table-container .fixed-table-header {\n    overflow: hidden;\n    background: rgba(0, 0, 0, .05);\n}\n\n.fixed-table-header .table > thead > tr {\n    background: none !important;\n}\n\n.table > thead > tr {\n    color: #636363;\n    font-weight: 400;\n    background: rgba(0, 0, 0, .05);\n    /*   background: repeat-x #fafafa;\n  background-image: -webkit-linear-gradient(top,#F8F8F8 0,#fafafa 100%);\n  background-image: -o-linear-gradient(top,#F8F8F8 0,#fafafa 100%);\n  background-image: linear-gradient(to bottom,#F8F8F8 0,#fafafa 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff8f8f8', endColorstr='#ffececec', GradientType=0); */\n}\n\n.table > thead > tr > th {\n    border-color: #e9ecef;\n    font-weight: 700;\n    border-right-color: transparent;\n}\n\n.table > thead > tr > th .ace-icon:first-child {\n    margin-right: 2px;\n}\n\n.table > thead > tr > th:first-child {\n    border-left-color: #F1F1F1;\n}\n\n.table > thead > tr > th:last-child {\n    border-right-color: #F1F1F1;\n}\n\n.table.table-bordered > thead > tr > th {\n    vertical-align: middle;\n}\n\ntd.center, th.center {\n    text-align: center;\n}\n\ntd .lbl, th .lbl {\n    margin-bottom: 0;\n}\n\ntd .lbl:only-child, th .lbl:only-child {\n    vertical-align: top;\n}\n\n.table-header {\n    background-color: #307ECC;\n    color: #FFF;\n    font-size: 14px;\n    line-height: 30px;\n    padding-left: 12px;\n    margin-bottom: 1px;\n}\n\n.table-header .close {\n    margin-right: 8px;\n    margin-top: 0;\n    opacity: .45;\n    filter: alpha(opacity=45);\n}\n\n.table-header .close:hover {\n    opacity: .75;\n    filter: alpha(opacity=75);\n}\n\nth.detail-col {\n    width: 48px;\n    text-align: center;\n}\n\ntr.detail-row {\n    display: none;\n}\n\ntr.detail-row.open {\n    display: block;\n    display: table-row;\n}\n\ntr.detail-row > td {\n    background-color: #f1f6f8;\n    border-top: 3px solid #d1e1ea !important;\n}\n\n.table-detail {\n    background-color: #fff;\n    border: 1px solid #dcebf7;\n    width: 100%;\n    padding: 12px;\n}\n\n.table-detail td > .profile-user-info {\n    width: 100%;\n}\n  .clearfix {\n    line-height: 40px;\n    display: flex;\n  }\n\n</style>\n"],"sourceRoot":"src/views/sample/approve"}]}