{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\contract\\components\\contractList.vue?vue&type=template&id=626bd746&scoped=true&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\contract\\components\\contractList.vue","mtime":1652432914000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div>\n  <el-form :model=\"searchForm\" :inline=\"true\">\n    <el-row>\n      <el-col :span=\"20\">\n        <el-form-item label=\"合同编号:\">\n          <el-input v-model=\"searchForm.contCode\" style=\"width:180px\" placeholder=\"合同编号\" />\n        </el-form-item>\n        <el-form-item label=\"项目名称:\">\n          <el-input v-model=\"searchForm.contName\" style=\"width:180px\" placeholder=\"项目名称\" />\n        </el-form-item>\n        <el-form-item label=\"合同状态:\">\n          <el-select v-model=\"searchForm.contStatus\" clearable style=\"width:170px\" filterable placeholder=\"合同状态\">\n            <el-option\n              v-for=\"item in Object.keys(CONTRACT_STATUS)\"\n              :key=\"item\"\n              :label=\"CONTRACT_STATUS[item]\"\n              :value=\"item\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"4\" class=\"search-right\">\n        <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n      </el-col>\n    </el-row>\n  </el-form>\n  <div>\n    <el-table\n      stripe\n      border\n      :data=\"contractData\"\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n      style=\"width: 100%\"\n    >\n      <template slot=\"empty\">\n        <div class=\"table_empty\">\n          <div class=\"empty_tips\">\n            <span>\n              暂无合同信息\n            </span>\n          </div>\n        </div>\n      </template>\n      <el-table-column type=\"index\" width=\"55\" label=\"序号\" fixed=\"left\" align=\"center\" />\n      <el-table-column prop=\"contCode\" label=\"合同编号\" width=\"185px\" align=\"center\" />\n      <el-table-column prop=\"offerId\" label=\"报价单号\" width=\"170px\" align=\"center\" />\n      <el-table-column prop=\"projectName\" label=\"项目名称\" min-width=\"120px\" align=\"center\" />\n      <el-table-column prop=\"partA\" label=\"客户名称\" width=\"120px\" align=\"center\" />\n      <el-table-column prop=\"signDate\" label=\"签订日期\" width=\"120px\" align=\"center\" />\n      <el-table-column prop=\"validity\" label=\"有效期(年)\" width=\"100px\" align=\"center\" />\n      <el-table-column prop=\"contStatus\" label=\"合同状态\" width=\"110px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.contStatus|statusQualityFilter\">\n            {{ CONTRACT_STATUS[row.contStatus] }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <!-- <el-table-column prop=\"auditReason\" label=\"驳回原因\" :show-overflow-tooltip=\"true\" width=\"100px\" align=\"center\" /> -->\n\n      <el-table-column fixed=\"right\" align=\"center\" label=\"操作\" width=\"210px\">\n        <template slot-scope=\"{row}\">\n\n          <el-button v-if=\"row.contStatus>0\" type=\"text\" @click=\"handleDetail(row)\"> 查看</el-button>\n          <div v-if=\"row.contStatus==='6' || row.contStatus==='2'\" class=\"erc-divider-vertical\" />\n\n          <el-button v-if=\"row.contStatus==='0'\" v-hasPermi=\"['contract:list:add']\" type=\"text\" @click=\"handleEdit(row)\"> 完善</el-button>\n          <el-button v-if=\"row.contStatus==='6' || row.contStatus==='2'\" v-hasPermi=\"['contract:list:update']\" type=\"text\" @click=\"handleEdit(row)\"> 编辑</el-button>\n\n          <div v-if=\"row.signDate && row.contStatus>= 1\" class=\"erc-divider-vertical\" />\n          <el-button v-if=\"row.signDate && row.contStatus>= 1\" type=\"text\" @click=\"handleDwonload(row)\"> 下载</el-button>\n\n          <div v-if=\"row.signDate && row.contStatus==='6'\" v-hasPermi=\"['contract:list:update']\" class=\"erc-divider-vertical\" />\n          <el-button v-if=\"row.signDate && row.contStatus==='6' \" v-hasPermi=\"['contract:list:update']\" type=\"text\" @click=\"handleApprove(row)\"> 提交审核</el-button>\n\n          <div v-if=\"row.contStatus==='0'|| row.contStatus==='2'\" v-hasPermi=\"['contract:list:del']\" class=\"erc-divider-vertical\" />\n          <el-button v-if=\"row.contStatus==='0'|| row.contStatus==='2'\" v-hasPermi=\"['contract:list:del']\" type=\"text\" @click=\"handleDelete(row)\"> 作废</el-button>\n\n          <div v-if=\"row.contStatus==='2'\" class=\"erc-divider-vertical\" />\n          <el-button v-if=\"row.contStatus==='2'\" type=\"text\" @click=\"handleApproveDetail(row)\"> 审核历史</el-button>\n\n          <!-- <div v-if=\"row.contStatus==='1'\" class=\"erc-divider-vertical\" />\n          <el-button v-if=\"row.contStatus==='1'\" type=\"text\" @click=\"handleApproveRes(row)\"> 审核</el-button> -->\n\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n  <div style=\"float: right\">\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"searchForm.pageNumber\"\n      :limit.sync=\"searchForm.pageSize\"\n      @pagination=\"handleSearch\"\n    />\n  </div>\n  <el-dialog title=\"合同信息完善\" :visible.sync=\"contractVisible\" width=\"85%\" top=\"5vh\" :close-on-click-modal=\"false\">\n    <el-tabs v-model=\"activeName\" type=\"border-card\">\n      <el-tab-pane name=\"maker\" label=\"在线制作\">\n        <el-form ref=\"contractForm\" :model=\"contractForm\" :rules=\"contractRules\" label-width=\"120px\" label-position=\"right\">\n          <el-divider content-position=\"left\">合同信息</el-divider>\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"contractInfoTdo.validity\" label=\"有效期(年):\">\n                <el-input-number v-model=\"contractForm.contractInfoTdo.validity\" controls-position=\"right\" style=\"width: 90%;\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"contractInfoTdo.signDate\" label=\"签订日期:\">\n                <el-date-picker\n                  v-model=\"contractForm.contractInfoTdo.signDate\"\n                  type=\"date\"\n                  value-format=\"yyyy-MM-dd\"\n                  placeholder=\"签订日期\"\n                  style=\"width: 90%;\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"contractInfoTdo.signLocation\" label=\"签订地址:\">\n                <el-input v-model=\"contractForm.contractInfoTdo.signLocation\" style=\"width: 90%;\" placeholder=\"签订地址\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"contractInfoTdo.payMethod\" label=\"支付方式:\">\n                <el-select v-model=\"contractForm.contractInfoTdo.payMethod\" style=\"width: 90%;\" placeholder=\"支付方式\">\n                  <el-option value=\"1\" label=\"一次付清\">一次付清</el-option>\n                  <el-option value=\"2\" label=\"分期支付\">分期支付</el-option>\n                  <el-option value=\"3\" label=\"其他方式\">其他方式</el-option>\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"16\">\n              <el-form-item prop=\"contractInfoTdo.payMethodDesc\" label=\"支付说明:\">\n                <el-input v-model=\"contractForm.contractInfoTdo.payMethodDesc\" style=\"width: 90%;\" placeholder=\"支付说明\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-divider content-position=\"left\">客户信息</el-divider>\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item label=\"合同属性:\">\n                <el-switch\n                  v-model=\"masterSwitch\"\n                  active-text=\"子合同\"\n                  inactive-text=\"主合同\"\n                />\n              </el-form-item>\n            </el-col>\n            <el-col v-if=\"masterSwitch\" :span=\"16\">\n              <el-form-item label=\"关联主合同:\">\n                <el-input v-model=\"contractForm.addTdo.supContCode\" placeholder=\"合同编号\" style=\"width: 200px;\" />\n                <el-button type=\"primary\" size=\"mini\" style=\"margin-left: 10px;\" @click=\"checkContractInfo\">验证</el-button>\n                <span v-if=\"checkFlag\" style=\"color:green;margin-left: 10px;\">\n                  {{ checkText }}\n                </span>\n                <span v-if=\"!checkFlag\" style=\"color:red;margin-left: 10px;\">\n                  {{ checkText }}\n                </span>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.companyName\" label=\"单位名称:\">\n                <!-- <el-autocomplete\n                  v-model=\"contractForm.addTdo.companyName\"\n                  :fetch-suggestions=\"querySearchAsync\"\n                  placeholder=\"请输入内容\"\n                  style=\"width: 90%;\"\n                  @select=\"handleSelectCom\"\n                >\n                  <i\n                    slot=\"suffix\"\n                    class=\"el-icon-edit el-input__icon\"\n                  />\n                  <template slot-scope=\"{ item }\">\n                    <div class=\"name\">{{ companyMap[item] }}</div>\n                  </template>\n                </el-autocomplete> -->\n\n                <el-select\n                  v-model=\"contractForm.addTdo.companyName\"\n                  filterable\n                  remote\n                  placeholder=\"请输入客户\"\n                  :remote-method=\"querySearchAsync\"\n                  style=\"width: 90%;\"\n                  @change=\"handleSelectCom\"\n                >\n                  <el-option\n                    v-for=\"item in Object.keys(companyMap)\"\n                    :key=\"item\"\n                    :label=\"companyMap[item]\"\n                    :value=\"item\"\n                  />\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.address\" label=\"通讯地址:\">\n                <el-input v-model=\"contractForm.addTdo.address\" style=\"width: 90%;\" maxlength=\"35\" placeholder=\"通讯地址\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.postCode\" label=\"邮政编码:\">\n                <el-input v-model=\"contractForm.addTdo.postCode\" style=\"width: 90%;\" :maxlength=\"6\" placeholder=\"邮政编码\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.jurPerson\" label=\"法定代表人:\">\n                <el-input v-model=\"contractForm.addTdo.jurPerson\" style=\"width: 90%;\" maxlength=\"40\" placeholder=\"法定代表人\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.agentPerson\" label=\"委托代理人:\">\n                <el-input v-model=\"contractForm.addTdo.agentPerson\" style=\"width: 90%;\" maxlength=\"40\" placeholder=\"委托代理人\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.telFax\" label=\"电话/传真:\">\n                <el-input v-model=\"contractForm.addTdo.telFax\" style=\"width: 90%;\" maxlength=\"15\" placeholder=\"电话/传真\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.bankName\" label=\"开户银行:\">\n                <el-input v-model=\"contractForm.addTdo.bankName\" style=\"width: 90%;\" maxlength=\"15\" placeholder=\"开户银行\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.bankNo\" label=\"银行账号:\">\n                <el-input v-model=\"contractForm.addTdo.bankNo\" style=\"width: 90%;\" maxlength=\"20\" placeholder=\"银行账号\" @input=\"bankNumCheck\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-form-item prop=\"addTdo.taxNumber\" label=\"税号:\">\n                <el-input v-model=\"contractForm.addTdo.taxNumber\" style=\"width: 90%;\" maxlength=\"20\" placeholder=\"税号\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n\n        </el-form>\n      </el-tab-pane>\n      <el-tab-pane name=\"upload\" label=\"合同上传\">\n        <el-form :model=\"contarctUploadForm\" label-width=\"110px\">\n          <el-form-item prop=\"signDate\" label=\"签订时间:\">\n            <el-date-picker\n              v-model=\"contarctUploadForm.signDate\"\n              type=\"date\"\n              value-format=\"yyyy-MM-dd\"\n              placeholder=\"签订日期\"\n              style=\"width: 260px;\"\n            />\n          </el-form-item>\n          <el-form-item label=\"合同属性:\">\n            <el-switch\n              v-model=\"masterUpSwitch\"\n              active-text=\"子合同\"\n              inactive-text=\"主合同\"\n            />\n          </el-form-item>\n          <el-form-item v-if=\"masterUpSwitch\" label=\"关联主合同:\">\n            <el-input v-model=\"contarctUploadForm.supContCode\" placeholder=\"合同编号\" style=\"width: 200px;\" />\n            <el-button type=\"primary\" size=\"mini\" style=\"margin-left: 10px;\" @click=\"checkUpContractInfo\">验证</el-button>\n            <span v-if=\"checkUpFlag\" style=\"color:green;margin-left: 10px;\">\n              {{ checkUpText }}\n            </span>\n            <span v-if=\"!checkUpFlag\" style=\"color:red;margin-left: 10px;\">\n              {{ checkUpText }}\n            </span>\n          </el-form-item>\n          <el-form-item label=\"有效期(年):\">\n            <el-input-number v-model=\"contarctUploadForm.validity\" controls-position=\"right\" style=\"width: 260px;\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n          </el-form-item>\n          <el-form-item label=\"合同附件上传:\">\n            <el-upload\n              ref=\"upload\"\n              drag\n              class=\"upload-demo\"\n              action=\"/api/cont/uploadContFile\"\n              :on-change=\"onUploadChange\"\n              :on-exceed=\"onExceed\"\n              :on-remove=\"onUploadRemove\"\n              :limit=\"1\"\n              :file-list=\"fileList\"\n              accept=\".doc,.docx,.pdf\"\n            >\n              <i class=\"el-icon-upload\" />\n              <div class=\"el-upload__text\">\n                将文件拖到此处，或\n                <em>点击上传</em>\n              </div>\n              <div slot=\"tip\" class=\"el-upload__tip\" />\n              <div slot=\"tip\" class=\"el-upload__tip\" style=\"color:red\">注:您只能上传.doc,.docx,.pdf格式的文件</div>\n            </el-upload>\n\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n    </el-tabs>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"contractVisible=false\">取消</el-button>\n      <el-button v-loading.fullscreen.lock=\"processLoading\" type=\"primary\" @click=\"confirmDialog\">确认</el-button>\n    </div>\n  </el-dialog>\n\n  <el-dialog title=\"合同审核\" :visible.sync=\"approveVisible\" center>\n    <div style=\"width: 400px;margin:0 auto\">\n      <el-form :model=\"approveForm\" label-width=\"100px\">\n        <el-form-item label=\"审核结果:\">\n          <el-radio-group v-model=\"approveForm.auditFlag\">\n            <el-radio label=\"1\">通过</el-radio>\n            <el-radio label=\"2\">驳回</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item v-if=\"approveForm.auditFlag === '2'\" label=\"审核意见:\">\n          <el-input v-model=\"approveForm.auditReason\" type=\"textarea\" :rows=\"3\" maxlength=\"50\" show-word-limit placeholder=\"审核意见\" />\n        </el-form-item>\n      </el-form>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"approveVisible=false\">取消</el-button>\n      <el-button type=\"primary\" @click=\"confirmApproveDialog\">确认</el-button>\n    </div>\n  </el-dialog>\n\n  <el-dialog title=\"审核历史\" :visible.sync=\"appHisVisible\" width=\"75%\">\n    <el-table :data=\"approveDetails\" border stripe>\n      <el-table-column type=\"index\" label=\"序号\" width=\"50\" align=\"center\" />\n      <el-table-column label=\"状态\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.auditFlag==='1'?'success':'danger'\">{{ row.auditFlag==='1'?'通过':'不通过' }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"auditReason\" label=\"审核说明\" align=\"center\" />\n      <el-table-column prop=\"auditUserName\" label=\"审批用户\" align=\"center\" />\n      <el-table-column prop=\"createTime\" label=\"审批时间\" align=\"center\" />\n    </el-table>\n  </el-dialog>\n</div>\n",null]}