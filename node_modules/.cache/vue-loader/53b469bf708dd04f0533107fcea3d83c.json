{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\sample\\sampleDetail.vue?vue&type=style&index=0&id=5cdda4b6&scoped=true&lang=scss&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\sample\\sampleDetail.vue","mtime":1651115240000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.detail-continer{\n  padding: 18px;\n  background-color: #fff;\n  margin:8px 10px;\n  min-height: calc(100vh - 130px);\n  border-radius: 5px;\n}\n\n.footer{\n  height: 100px;\n  width: 100%;\n  bottom: 10px;\n  font-size: 14px;\n}\n ::v-deep .el-card .el-card__header {\n  padding: 5px 20px;\n  background: #F3F2F2;\n}\n.block-flex {\n  position: relative;\n  display: flex;\n  &>div{\n    border: 1px solid #B7B7B7;\n    width: 100px;\n    margin: 0;\n    line-height: 30px;\n    text-align: center;\n  }\n  &>div:first-child {\n    background: #B7B7B7;\n  }\n}\n.card-left {\n  width: 100%;\n  min-height: 200px;\n  max-height: 400px;\n}\n.card-right {\n  width: 100%;\n  min-height: 200px;\n  max-height: 400px;\n}\n.el-card {\n  overflow: auto;\n}\n.el-dropdown-link {\n  cursor: pointer;\n  color: #409EFF;\n}\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n\n",{"version":3,"sources":["sampleDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+QA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sampleDetail.vue","sourceRoot":"src/views/sample","sourcesContent":["<template>\n  <div class=\"detail-continer\">\n    <el-card shadow=\"never\" class=\"card-continer\" style=\"height:550px\">\n      <div slot=\"header\" class=\"clearfix\">\n        <el-row>\n          <el-col :span=\"8\">\n            <span>样品列表<i class=\"el-input__icon\" /></span>\n          </el-col>\n          <el-col :span=\"8\">\n            <template v-if=\"showTitle\">\n              <el-row style=\"text-align:center;;font-size:14px;\">\n                <el-col :span=\"24\">Web打印服务CLodop未安装启动，<a href=\"#\" style=\"color:red\" @click=\"fileDownLoad\">点击这里下载执行安装</a></el-col>\n              </el-row>\n              <el-row style=\"text-align:center;font-size:14px;padding-top:3px;\">\n                <el-col :span=\"24\">(若此前已安装过，<a href=\"#\" style=\"color:red\" @click=\"tabPrint\">可点这里直接再次启动</a>），成功后请刷新本页面。</el-col>\n              </el-row>\n            </template>\n            <template v-else>\n              <div style=\"visibility: hidden;\">信息提示</div>\n            </template>\n          </el-col>\n          <el-col :span=\"8\" style=\"padding: 5px;text-align:right\">\n            <el-button type=\"primary\" size=\"mini\" @click=\"pageBack\"> 返回</el-button>\n            <el-button type=\"primary\" size=\"mini\" @click=\"tabPrint\"> 标签打印</el-button>\n          </el-col>\n        </el-row>\n      </div>\n      <el-table\n        stripe\n        border\n        :data=\"sampleData\"\n        highlight-current-row\n        :header-cell-style=\"{background:'#ECF3FC'}\"\n        style=\"width: 100%\"\n        max-height=\"420px\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <template slot=\"empty\">\n          <div class=\"table_empty\">\n            <div class=\"empty_tips\">\n              <span>\n                暂无样品\n              </span>\n            </div>\n          </div>\n        </template>\n        <el-table-column type=\"selection\" width=\"45\" align=\"center\" />\n        <el-table-column prop=\"sampleNo\" label=\"样品编号\" width=\"150\" align=\"center\" />\n        <el-table-column prop=\"secdClassName\" label=\"检测类别\" align=\"center\" />\n        <el-table-column prop=\"factorName\" label=\"检测因子\" min-width=\"170px\" align=\"center\" />\n        <el-table-column prop=\"factorPoint\" label=\"检测位置\" align=\"center\" />\n        <el-table-column prop=\"dayAndCount\" label=\"频次(天/次)\" width=\"130px\" align=\"center\" />\n        <!-- <el-table-column prop=\"inspectionName\" label=\"受检单位\" :show-overflow-tooltip=\"true\" align=\"center\" /> -->\n        <el-table-column prop=\"smapStatus\" label=\"样品状态\" width=\"120px\" align=\"center\">\n          <template slot-scope=\"{row}\">\n            <el-tag effect=\"dark\" :type=\"row.smapStatus|statusQualityFilter\">\n              {{ SAMPLE_STATUS[row.smapStatus] }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"sampleType\" label=\"是否分包\" width=\"100\" align=\"center\">\n          <template slot-scope=\"{row}\">\n            <el-tag effect=\"dark\" :type=\"row.sampleType==='1'?'danger':'success'\">\n              {{ row.sampleType==='1'?'分包':'自检' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div style=\"float: right\">\n        <pagination\n          v-show=\"total>0\"\n          :total=\"total\"\n          :page.sync=\"searchForm.pageNumber\"\n          :limit.sync=\"searchForm.pageSize\"\n          style=\"padding-top: 10px;\"\n          @pagination=\"handleSearch\"\n        />\n      </div>\n    </el-card>\n    <div class=\"footer\">\n      <el-row style=\"color: red;\">\n        <el-col :span=\"24\">\n          提示：\n        </el-col>\n      </el-row>\n      <el-row style=\"color: red;\">\n        <el-col :span=\"24\">\n          1. 打印样品标签需要用到【热敏打印机】以及【三防热敏标签纸】；\n        </el-col>\n      </el-row>\n\n      <el-row style=\"color: red;\">\n        <el-col :span=\"24\">\n          2. 由于一般电脑不带蓝牙，打印机建议使用USB版，而不是蓝牙版，推荐使用得力DL-888D型号；\n        </el-col>\n      </el-row>\n\n      <el-row style=\"color: red;\">\n        <el-col :span=\"24\">\n          3. 三防热敏标签纸的尺寸为60*40mm，推荐得力品牌。\n        </el-col>\n      </el-row>\n\n    </div>\n\n    <div style=\"overflow: auto;opacity:0;\">\n      <div id=\"labelPrint\" ref=\"labelPrint\" style=\"margin: 0;padding: 5px; \">\n        <div\n          v-for=\"item in printList\"\n          :key=\"item.sampItemId\"\n          style=\"width: 60mm;height: 40mm;margin: 0; padding: 0px; font-size:12px;;\"\n        >\n          <div style=\"padding-left: 10px;padding-top:6px;display: flex;\">\n            <div style=\"padding: 0px;line-height: 4mm;\">受检单位:</div>\n            <div style=\"padding-left: 10px;line-height: 4mm;\">{{ item.inspectionName|ellipsis }}</div>\n          </div>\n          <div style=\"padding-left: 10px;display: flex;\">\n            <div style=\"padding:  0px;line-height: 4mm;\">样品类别:</div>\n            <div style=\"padding-left: 10px;line-height: 4mm;\">{{ item.secdClassName }}</div>\n          </div>\n          <div style=\"padding-left: 10px;display: flex;\">\n            <div style=\"padding:  0px;line-height: 4mm;\">检测因子:</div>\n            <div style=\"padding-left: 10px;line-height: 4mm;\">{{ item.factorName|ellipsis }}</div>\n          </div>\n          <div style=\"text-align: center; font-size: 12px;\">\n            <barcode :value=\"item.sampleNo\" :options=\"barcode_option\" tag=\"svg\" />\n          </div>\n          <div style=\"padding-left: 10px;display: flex;\">\n            <div style=\"padding:  0px;line-height: 3mm;width: 8mm\">点位:</div>\n            <div style=\"padding:  0px;line-height: 3mm;width: 29mm;text-align:center;\">{{ item.factorPoint }}</div>\n            <div style=\"padding:  0px;line-height: 3mm;width: 11mm\">次/天:</div>\n            <div style=\"padding:  0px;line-height: 3mm;width: 8mm;text-align:center;\">{{ item.frequency?item.frequency:'' }}/{{ item.day?item.day:'' }}</div>\n          </div>\n          <div style=\"padding-left: 10px;display: flex;\">\n            <div style=\"padding:  0px;line-height: 3mm;\">状态:</div>\n            <div style=\"padding-left: 10px;line-height: 4mm;\">□未检 □在检 □已检</div>\n          </div>\n          <div style=\"padding-left: 10px;display: flex;\">\n            <div style=\"padding:  0px;line-height: 3mm;width: 14mm\">日期:</div>\n            <div style=\"padding:  0px;line-height: 3mm;width: 14mm\">&nbsp;</div>\n            <div style=\"padding:  0px;line-height: 3mm;width: 14mm\">采样人:</div>\n            <div style=\"padding:  0px;line-height: 3mm;width: 14mm\">&nbsp;</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as sampleServer from '@/api/sample'\nimport { getLodop } from '@/utils/LodopFuncs'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nconst SAMPLE_STATUS = {\n  '0': '待采样',\n  '1': '已采样',\n  '2': '待组长审核',\n  '3': '待负责人审核',\n  '4': '审核通过',\n  '5': '审核失败',\n  '6': '已入库',\n  '7': '部分出库',\n  '8': '已出库',\n  '9': '入库中',\n  '10': '待复核'\n}\nexport default {\n  components: { Pagination },\n  filters: {\n    statusQualityFilter(status) {\n      if (status === '0' || status === '1') {\n        return ''\n      } else if (status === '2' || status === '3') {\n        return 'info'\n      } else if (status === '4' || status > 5) {\n        return 'success'\n      } else {\n        return 'danger'\n      }\n    }\n  },\n  data() {\n    return {\n      SAMPLE_STATUS,\n      sampleData: [],\n      searchForm: {\n        sampTaskId: '',\n        pageNumber: 1,\n        pageSize: 50\n      },\n      total: 0,\n      multipleSelection: [],\n      barcode_option: {\n        format: 'CODE128',\n        displayValue: true, // 是否默认显示条形码数据\n        background: 'rgba(255,255,255,.0)', // 条形码背景颜色\n        width: '1.3px', // 单个条形码的宽度\n        fontOptions: 'bold',\n        height: '30mm',\n        fontSize: '12px', // 字体大小\n        textMargin: 0,\n        font: '12px/1.5 arial,\"黑体\"',\n        textAlign: 'center', // 设置文本的水平对齐方式\n        margin: 5\n      },\n      printList: [],\n      showTitle: false\n    }\n  },\n  created() {\n    if (this.$route.params.sampTaskId) {\n      this.searchForm.sampTaskId = this.$route.params.sampTaskId\n      this.handleSearch()\n    }\n  },\n  methods: {\n    handleSearch() {\n      sampleServer.getSampleItemBySampTaskId(this.searchForm).then(result => {\n        if (result.code === 200 && result.result) {\n          this.sampleData = result.result.records || []\n          this.total = result.result.total\n        }\n      })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    tabPrint() {\n      if (this.multipleSelection && this.multipleSelection.length > 0) {\n        this.printList = this.multipleSelection\n        this.$nextTick(() => {\n          this.tagPrint()\n        })\n      } else {\n        this.$message.info('最少选择一条记录信息')\n      }\n    },\n    tagPrint() {\n      const LODOP = getLodop()\n      setTimeout(() => {\n        this.$nextTick(() => {\n          if (LODOP !== undefined) {\n            LODOP.PRINT_INIT('标签')\n            LODOP.ADD_PRINT_HTM(0, 0, '60mm', '40mm',\n              document.getElementById('labelPrint').innerHTML)\n            // LODOP.PRINT()\n            LODOP.SET_PRINT_MODE('TRYLINKPRINTER_NOALERT', true)// 这个语句设置网络共享打印机连接不通时是否提示一下\n            LODOP.PREVIEW()\n            // LODOP.PRINT_DESIGN()\n          } else {\n            // 显示提示信息\n            this.showTitle = true\n            // this.$print(this.$refs.labelPrint)\n          }\n          this.showPrint = false\n        })\n      }, 1000)\n    },\n    pageBack() {\n      this.$router.back()\n    },\n    fileDownLoad() {\n      var url = this.$store.getters.sysBaseUrl + '/downLoad/CLodop_Setup_for_Win32NT.exe'\n      window.open(url)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .detail-continer{\n    padding: 18px;\n    background-color: #fff;\n    margin:8px 10px;\n    min-height: calc(100vh - 130px);\n    border-radius: 5px;\n  }\n\n  .footer{\n    height: 100px;\n    width: 100%;\n    bottom: 10px;\n    font-size: 14px;\n  }\n   ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n  .block-flex {\n    position: relative;\n    display: flex;\n    &>div{\n      border: 1px solid #B7B7B7;\n      width: 100px;\n      margin: 0;\n      line-height: 30px;\n      text-align: center;\n    }\n    &>div:first-child {\n      background: #B7B7B7;\n    }\n  }\n  .card-left {\n    width: 100%;\n    min-height: 200px;\n    max-height: 400px;\n  }\n  .card-right {\n    width: 100%;\n    min-height: 200px;\n    max-height: 400px;\n  }\n  .el-card {\n    overflow: auto;\n  }\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n\n</style>\n"]}]}