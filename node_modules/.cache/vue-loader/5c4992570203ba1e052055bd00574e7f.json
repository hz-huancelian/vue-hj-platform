{"remainingRequest":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjects\\vue-hj-platform\\src\\views\\report\\components\\hisReportTaskList.vue?vue&type=style&index=0&id=1364c43e&scoped=true&lang=scss&","dependencies":[{"path":"F:\\webstormProjects\\vue-hj-platform\\src\\views\\report\\components\\hisReportTaskList.vue","mtime":1651763299000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.search_div {\n  >div {\n    &:nth-child(1){\n      margin-right: 10px;\n    }\n    display: inline-block;\n  }\n}\n\n.search_input {\n  width: 200px;\n  margin-bottom: 5px;\n}\n.search-right {\n  text-align: right;\n  padding-right: 25px;\n}\n.item {\n  font-size: 16px;\n}\n::v-deep .el-card .el-card__header {\n  padding: 5px 20px;\n  background: #F3F2F2;\n}\n .info-table-new {\n  font-size: 14px;\n  width: 100%;\n  text-align: center;\n  margin-top: 10px;\n  border-top: 1px solid #ececec;\n  border-left: 1px solid #ececec;\n  line-height: 35px;\n  td {\n    border-bottom: 1px solid #ececec;\n    border-right: 1px solid #ececec;\n    width: 25%;\n    height: 35px;\n    // &:nth-child(2n + 1) {\n    //   width: 25%;\n    //   background: #f5f5f5;\n    // }\n  }\n}\n.el-dropdown-link {\n  cursor: pointer;\n  color: #409EFF;\n}\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n/deep/.hide .el-upload--picture-card {\n  display: none;\n}\n",{"version":3,"sources":["hisReportTaskList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"hisReportTaskList.vue","sourceRoot":"src/views/report/components","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"19\">\n          <el-form-item label=\"任务单号:\">\n            <el-input v-model=\"searchForm.jobId\" style=\"width:165px\" placeholder=\"任务单号\" />\n          </el-form-item>\n          <el-form-item label=\"项目名称:\">\n            <el-input v-model=\"searchForm.projectName\" style=\"width:165px\" placeholder=\"项目名称\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"5\" class=\"search-right\">\n          <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-table\n      border\n      :data=\"reportData\"\n      stripe\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n    >\n      <el-table-column type=\"index\" width=\"50\" label=\"序号\" align=\"center\" />\n      <el-table-column prop=\"reportCode\" label=\"报告编号\" width=\"140px\" align=\"center\" />\n      <el-table-column prop=\"jobId\" label=\"任务单号\" width=\"140px\" align=\"center\" />\n      <el-table-column prop=\"projectName\" label=\"项目名称\" align=\"center\" />\n      <el-table-column prop=\"consignorName\" label=\"委托单位\" align=\"center\" />\n      <el-table-column prop=\"inspectionName\" label=\"受检单位\" align=\"center\" />\n      <el-table-column prop=\"reportMakeTime\" label=\"生成时间\" width=\"160px\" align=\"center\" />\n      <el-table-column label=\"操作\" align=\"center\" width=\"185px\">\n        <template slot-scope=\"{row}\">\n          <el-button type=\"text\" @click=\"handleDetail(row)\">查看</el-button>\n\n          <div v-if=\"row.reportStatus > 1\" class=\"erc-divider-vertical\" />\n          <el-dropdown v-if=\"row.reportStatus > 1\">\n            <span class=\"el-dropdown-link\">\n              更多<i class=\"el-icon-arrow-down el-icon--right\" />\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-link v-if=\"row.reportStatus>1\" :underline=\"false\" @click=\"handleDownload(row)\">\n                <el-dropdown-item>最新报告下载</el-dropdown-item>\n              </el-link>\n              <el-link v-if=\"row.reportStatus>1\" :underline=\"false\" @click=\"handleOldDownload(row)\">\n                <el-dropdown-item>原始报告下载</el-dropdown-item>\n              </el-link>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nconst REPORT_STATUS = {\n  // '0': '待分配',\n  '1': '未生成',\n  '2': '制作中',\n  '3': '待提交审批',\n  '4': '待审核',\n  '5': '待签发',\n  '6': '完成',\n  '7': '已驳回'\n\n}\nimport Pagination from '@/components/Pagination'\nimport * as reportServer from '@/api/report'\nimport { mapGetters } from 'vuex'\nimport waves from '@/directive/waves' // waves directive\nimport checkPermission from '@/utils/permission' // 权限判断函数\nexport default {\n  components: { Pagination },\n  directives: { waves },\n  filters: {\n    statusQualityFilter(status) {\n      if (status < 3) {\n        return 'info'\n      } else if (status < 6) {\n        return ''\n      } else if (status === '6') {\n        return 'success'\n      } else {\n        return 'danger'\n      }\n    }\n  },\n  data() {\n    return {\n      REPORT_STATUS,\n      searchForm: {\n        jobId: '',\n        projectName: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      reportData: [],\n      hideLogoUploadEdit: false,\n      hideUploadEdit: false,\n      downloadLoading: false\n\n    }\n  },\n  computed: {\n    ...mapGetters(['platformPositionId', 'userId'])\n  },\n  created() {\n    this.handleSearch()\n  },\n  methods: {\n    checkPermission,\n    handleSearch() {\n      reportServer.findHisReportInfosByCondition(this.searchForm).then(res => {\n        if (res.code === 200 && res.result) {\n          this.reportData = res.result.records || []\n          this.total = res.result.total\n        }\n      })\n    },\n    handleAddReport(row) {\n      this.downloadLoading = true\n      reportServer.genReport(row.reportCode).then(result => {\n        if (result.code === 200) {\n          this.$notify({\n            title: '成功',\n            message: result.message,\n            type: 'success'\n          })\n          this.handleSearch()\n        } else {\n          this.$notify({\n            title: '失败',\n            message: result.message,\n            type: 'error'\n          })\n        }\n        this.downloadLoading = false\n      }).catch(() => {\n        this.downloadLoading = false\n      })\n    },\n    handleDetail(row) {\n      const path = row.reportCode + '.pdf'\n      this.$router.push({ name: 'sysPdfView', params: { path: path, type: 2 }})\n    },\n    handleDownload(row) {\n      var url = this.$store.getters.sysBaseUrl + '/file/report/' + row.reportFileId\n      window.open(url)\n    },\n    handleOldDownload(row) {\n      var url = this.$store.getters.sysBaseUrl + '/file/report/' + row.reportCode + '.docx'\n      window.open(url)\n    }\n\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n   .info-table-new {\n    font-size: 14px;\n    width: 100%;\n    text-align: center;\n    margin-top: 10px;\n    border-top: 1px solid #ececec;\n    border-left: 1px solid #ececec;\n    line-height: 35px;\n    td {\n      border-bottom: 1px solid #ececec;\n      border-right: 1px solid #ececec;\n      width: 25%;\n      height: 35px;\n      // &:nth-child(2n + 1) {\n      //   width: 25%;\n      //   background: #f5f5f5;\n      // }\n    }\n  }\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n  /deep/.hide .el-upload--picture-card {\n    display: none;\n  }\n</style>\n"]}]}