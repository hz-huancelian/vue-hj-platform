{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\profile\\index_old.vue?vue&type=style&index=0&id=7bb80baa&lang=scss&scoped=true&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\profile\\index_old.vue","mtime":1637214064000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.create-container {\n  width: 500px;\n  height: 100%;\n  margin: 60px auto;\n}\n\n.avatar-wrapper {\n  position: relative;\n  .user-name {\n    margin-right: 2px;\n    font-size: 14px;\n  }\n  .user-avatar {\n    vertical-align: middle;\n    cursor: pointer;\n    width: 70px;\n    height: 70px;\n    border-radius: 10px;\n    margin-right: 10px;\n  }\n\n  .el-icon-caret-bottom {\n    cursor: pointer;\n    position: absolute;\n    right: -20px;\n    top: 25px;\n    font-size: 12px;\n  }\n}\n",{"version":3,"sources":["index_old.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index_old.vue","sourceRoot":"src/views/profile","sourcesContent":["<template>\n  <div class=\"create-container\">\n    <el-form ref=\"userForm\" :model=\"userForm\" :rules=\"userRules\" label-width=\"100px\">\n      <el-form-item label=\"登录账号:\" prop=\"username\">\n        <el-input v-model=\"userForm.username\" :disabled=\"true\" style=\"width:300px\" />\n      </el-form-item>\n      <el-form-item v-if=\"!userForm.deptId==='-1'\" label=\"所属部门:\" prop=\"username\">\n        <el-select\n          v-model=\"userForm.deptId\"\n          clearable\n          filterable\n          style=\"width: 300px\"\n          :disabled=\"true\"\n        >\n          <el-option\n            v-for=\"item in deptArray\"\n            :key=\"item.id\"\n            :label=\"item.deptName\"\n            :value=\"item.id\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item v-if=\"!userForm.deptId==='-1'\" prop=\"platformPositionId\" label=\"岗位:\">\n        <el-select\n          v-model=\"userForm.platformPositionId\"\n          filterable\n          style=\"width: 300px\"\n          :disabled=\"true\"\n        >\n          <el-option\n            v-for=\"item in Object.keys(postionArray)\"\n            :key=\"item\"\n            :label=\"postionArray[item]\"\n            :value=\"item\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"用户名称:\" prop=\"empName\">\n        <el-input v-model=\"userForm.empName\" maxlength=\"15\" style=\"width:300px\" />\n      </el-form-item>\n      <el-form-item label=\"联系方式\" prop=\"phone\">\n        <el-input v-model=\"userForm.phone\" maxlength=\"11\" style=\"width:300px\" />\n      </el-form-item>\n\n      <el-form-item style=\"margin-top: 50px\">\n        <el-button\n          class=\"iconfont icon-right_circle\"\n          type=\"primary\"\n          @click=\"onSubmit\"\n        >保 存</el-button>\n        <el-button type class=\"iconfont icon-fanhui\" @click=\"goBack\">返 回</el-button>\n        <!-- <el-button class=\"iconfont icon-zhongzhi1\" @click=\"resetForm('userForm')\">重置</el-button> -->\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex'\nimport * as deptServer from '@/api/dept'\nimport * as userServer from '@/api/user'\nimport { validPhone } from '@/utils/validate'\nexport default {\n  components: {},\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (value && value.length > 0) {\n        if (validPhone(value)) {\n          callback()\n        } else {\n          callback(new Error('输入正确的电话号码'))\n        }\n      } else {\n        callback()\n      }\n    }\n    return {\n      departmentArray: [],\n      roleList: [],\n      userForm: {\n        userId: '',\n        username: '',\n        empCode: '',\n        deptId: '',\n        empName: '',\n        phone: '',\n        platformPositionId: ''\n      },\n      userRules: {\n        empName: [{ required: true, message: '请录入用户姓名', trigger: 'blur' }],\n        phone: [{ required: true, message: '请录入联系方式', trigger: 'blur' }, { required: true, validator: validatePhone, trigger: 'blur' }]\n      },\n      postionArray: {},\n      deptArray: []\n    }\n  },\n  computed: {\n    ...mapGetters(['userInfo'])\n  },\n  created() {\n    if (this.userInfo.deptId === '-1') {\n      this.handleChange(-1)\n    } else {\n      this.getDeptTreeList()\n    }\n    this.userForm.userId = this.userInfo.userId\n    this.userForm.username = this.userInfo.username\n    this.userForm.platformPositionId = this.userInfo.platformPositionId\n    this.userForm.deptId = this.userInfo.deptId\n    this.userForm.empCode = this.userInfo.empCode\n    this.userForm.empName = this.userInfo.empName\n    this.userForm.phone = this.userInfo.phone\n  },\n  methods: {\n    getDeptTreeList() {\n      deptServer.getDeptList().then(res => {\n        if (res.result) {\n          this.deptArray = res.result || []\n          const o = res.result.find(i => i.id === this.userInfo.deptId)\n          this.handleChange(o.platformDeptId)\n        }\n      })\n    },\n    handleChange(platformDeptId) {\n      deptServer.dpfindPositionIdByDeptId(platformDeptId).then(res => {\n        this.$nextTick(() => {\n          this.postionArray = res.result || {}\n        })\n      })\n    },\n    onSubmit() {\n      this.$refs.userForm.validate(valid => {\n        if (valid) {\n          const data = {\n            userId: this.userForm.userId,\n            empName: this.userForm.empName,\n            phone: this.userForm.phone\n          }\n          debugger\n          userServer.editUserById(data).then(request => {\n            if (request.code === 200) {\n              this.$notify({\n                title: '成功',\n                message: request.message,\n                type: 'success'\n              })\n              this.$router.back()\n            } else {\n              this.$notify({\n                title: '失败',\n                message: request.message,\n                type: 'error'\n              })\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    },\n    goBack() {\n      this.$router.back()\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.create-container {\n  width: 500px;\n  height: 100%;\n  margin: 60px auto;\n}\n\n.avatar-wrapper {\n  position: relative;\n  .user-name {\n    margin-right: 2px;\n    font-size: 14px;\n  }\n  .user-avatar {\n    vertical-align: middle;\n    cursor: pointer;\n    width: 70px;\n    height: 70px;\n    border-radius: 10px;\n    margin-right: 10px;\n  }\n\n  .el-icon-caret-bottom {\n    cursor: pointer;\n    position: absolute;\n    right: -20px;\n    top: 25px;\n    font-size: 12px;\n  }\n}\n</style>\n"]}]}