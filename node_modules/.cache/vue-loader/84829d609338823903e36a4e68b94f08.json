{"remainingRequest":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjects\\vue-hj-platform\\src\\views\\contract\\components\\hisContractList.vue?vue&type=style&index=0&id=66cb767c&scoped=true&lang=scss&","dependencies":[{"path":"F:\\webstormProjects\\vue-hj-platform\\src\\views\\contract\\components\\hisContractList.vue","mtime":1649239137000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.search_div {\n  >div {\n    &:nth-child(1){\n      margin-right: 10px;\n    }\n    display: inline-block;\n  }\n}\n\n.search_input {\n  width: 200px;\n  margin-bottom: 5px;\n}\n.search-right {\n  text-align: right;\n  padding-right: 25px;\n}\n.item {\n  font-size: 16px;\n}\n::v-deep .el-card .el-card__header {\n  padding: 5px 20px;\n  background: #F3F2F2;\n}\n",{"version":3,"sources":["hisContractList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"hisContractList.vue","sourceRoot":"src/views/contract/components","sourcesContent":["<template>\n  <div>\n    <el-form :model=\"searchForm\" :inline=\"true\">\n      <el-row>\n        <el-col :span=\"20\">\n          <el-form-item label=\"合同编号:\">\n            <el-input v-model=\"searchForm.contCode\" style=\"width:180px\" placeholder=\"合同编号\" />\n          </el-form-item>\n          <el-form-item label=\"项目名称:\">\n            <el-input v-model=\"searchForm.contName\" style=\"width:180px\" placeholder=\"项目名称\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"4\" class=\"search-right\">\n          <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div>\n      <el-table\n        stripe\n        border\n        :data=\"contractData\"\n        highlight-current-row\n        :header-cell-style=\"{background:'#ECF3FC'}\"\n        style=\"width: 100%\"\n      >\n        <template slot=\"empty\">\n          <div class=\"table_empty\">\n            <div class=\"empty_tips\">\n              <span>\n                暂无合同信息\n              </span>\n            </div>\n          </div>\n        </template>\n        <el-table-column type=\"index\" width=\"55\" label=\"序号\" align=\"center\" />\n        <el-table-column prop=\"contCode\" label=\"合同编号\" width=\"185px\" align=\"center\" />\n        <el-table-column prop=\"offerId\" label=\"报价单号\" width=\"170px\" align=\"center\" />\n        <el-table-column prop=\"projectName\" label=\"项目名称\" min-width=\"140px\" align=\"center\" />\n        <el-table-column prop=\"partA\" label=\"甲方\" width=\"120px\" align=\"center\" />\n        <el-table-column prop=\"signDate\" label=\"签订日期\" width=\"120\" align=\"center\" />\n        <el-table-column prop=\"validity\" label=\"有效期(年)\" align=\"center\" />\n        <el-table-column prop=\"contStatus\" label=\"合同状态\" align=\"center\">\n          <template slot-scope=\"{row}\">\n            <el-tag :type=\"row.contStatus|statusQualityFilter\">\n              {{ CONTRACT_STATUS[row.contStatus] }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <!-- <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"120\" align=\"center\" /> -->\n\n        <el-table-column align=\"center\" label=\"操作\" width=\"100\">\n          <template slot-scope=\"{row}\">\n            <el-button v-if=\"row.contStatus!=5\" type=\"text\" @click=\"handleDetail(row)\"> 查看</el-button>\n            <div v-if=\"row.contStatus!=5\" class=\"erc-divider-vertical\" />\n            <el-button v-if=\"row.contStatus!=5\" type=\"text\" @click=\"handleDwonload(row)\"> 下载</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div style=\"float: right\">\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"searchForm.pageNumber\"\n        :limit.sync=\"searchForm.pageSize\"\n        @pagination=\"handleSearch\"\n      />\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport * as contractServer from '@/api/contract'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nconst CONTRACT_STATUS = {\n  '4': '完成',\n  '5': '已作废'\n}\nexport default {\n  components: { Pagination },\n  filters: {\n    statusQualityFilter(status) {\n      if (status === '0' || status === '2') {\n        return ''\n      } else if (status === '3' || status === '1') {\n        return 'success'\n      } else if (status === '4') {\n        return 'success'\n      } else {\n        return 'danger'\n      }\n    }\n  },\n  data() {\n    return {\n      CONTRACT_STATUS,\n      contractData: [],\n      searchForm: {\n        contCode: '',\n        contName: '',\n        contStatus: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      contractVisible: false,\n      contractForm: {\n        contId: '',\n        contractInfoTdo: {\n          signDate: '',\n          signLocation: '',\n          payMethod: '',\n          payMethodDesc: '',\n          validity: ''\n        },\n        cusContBaseInfoTdo: {\n          organId: '',\n          companyName: '',\n          address: '',\n          postCode: '',\n          jurPerson: '',\n          agentPerson: '',\n          telFax: '',\n          bankName: '',\n          bankNo: '',\n          taxNumber: ''\n        }\n      },\n      collapNames: ['1'],\n      restaurants: []\n    }\n  },\n  created() {\n    this.handleSearch()\n  },\n  methods: {\n    handleSearch() {\n      contractServer.findHisContInfosByCondition(this.searchForm).then(res => {\n        if (res.code === 200 && res.result) {\n          this.contractData = res.result.records\n          this.total = res.result.total\n        }\n      })\n    },\n    handleDetail(row) {\n      contractServer.findContFileById(row.id).then(res => {\n        if (res.code === 200 && res.result && res.result.length > 0) {\n          // this.$router.push(`/report/pdfView/${res.result}/1`)\n          this.$router.push({ name: 'sysPdfView', params: { path: res.result, type: 1 }})\n        } else {\n          this.$message.error('合同PDF还未生成')\n        }\n      })\n    },\n    handleDwonload(row) {\n      var url = '/api/word/downLoadContract?contCode=' + row.contCode\n      window.open(url)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\" type=\"text/scss\">\n  .search_div {\n    >div {\n      &:nth-child(1){\n        margin-right: 10px;\n      }\n      display: inline-block;\n    }\n  }\n\n  .search_input {\n    width: 200px;\n    margin-bottom: 5px;\n  }\n  .search-right {\n    text-align: right;\n    padding-right: 25px;\n  }\n  .item {\n    font-size: 16px;\n  }\n  ::v-deep .el-card .el-card__header {\n    padding: 5px 20px;\n    background: #F3F2F2;\n  }\n</style>\n"]}]}