{"remainingRequest":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\order\\components\\orderList copy.vue?vue&type=template&id=4d5efa12&scoped=true&","dependencies":[{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\src\\views\\order\\components\\orderList copy.vue","mtime":1651895238000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjectsJiu\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div>\n  <el-form :model=\"searchForm\" :inline=\"true\">\n    <el-row>\n      <el-col :span=\"20\">\n        <el-form-item label=\"项目名称:\">\n          <el-input v-model=\"searchForm.projectName\" style=\"width:165px\" placeholder=\"项目名称\" />\n        </el-form-item>\n        <el-form-item label=\"报价单号:\">\n          <el-input v-model=\"searchForm.id\" style=\"width:165px\" placeholder=\"报价单号\" />\n        </el-form-item>\n        <el-form-item label=\"报价单状态:\">\n          <el-select v-model=\"searchForm.status\" clearable style=\"width:160px\" filterable placeholder=\"报价单状态\">\n            <el-option\n              v-for=\"item in Object.keys(ACCOUNT_STATUS)\"\n              :key=\"item\"\n              :label=\"ACCOUNT_STATUS[item]\"\n              :value=\"item\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"4\" class=\"search-right\">\n        <el-button v-hasPermi=\"['order:list:add']\" type=\"text\" icon=\"el-icon-plus\" @click=\"handleCreate\">新增</el-button>\n        <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n      </el-col>\n    </el-row>\n  </el-form>\n  <div>\n    <el-table\n      stripe\n      :data=\"orderData\"\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n      style=\"width: 100%\"\n    >\n      <template slot=\"empty\">\n        <div class=\"table_empty\">\n          <div class=\"empty_tips\">\n            <span>\n              暂无报价单,\n            </span>\n            <el-button type=\"text\" size=\"mini\" style=\"font-size:14px;\" @click=\"handleCreate\">新建报价单</el-button>\n          </div>\n        </div>\n      </template>\n      <el-table-column type=\"index\" width=\"55\" label=\"序号\" align=\"center\" />\n      <el-table-column prop=\"projectName\" label=\"项目名称\" min-width=\"150px\" align=\"center\" />\n      <el-table-column prop=\"id\" label=\"报价单号\" sortable width=\"170px\" align=\"center\" />\n      <el-table-column prop=\"checkType\" label=\"检测类型\" width=\"90px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          {{ row.checkType === '0'?\"委托检测\":\"样品送检\" }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"certificationType\" label=\"认证类型\" width=\"90px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          {{ row.certificationType === '1'?\"CMA\":\"CNAS\" }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"consignorName\" label=\"客户名称\" min-width=\"150px\" align=\"center\" />\n      <el-table-column prop=\"status\" label=\"状态\" width=\"100\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag effect=\"dark\" :type=\"row.status | statusQualityFilter\">\n            {{ ACCOUNT_STATUS[row.status] }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"finishDate\" label=\"客户要求完成时间\" width=\"140\" align=\"center\" />\n      <el-table-column prop=\"createUserId\" label=\"报价人\" align=\"center\" />\n      <el-table-column prop=\"checkTaskCount\" label=\"任务数\" align=\"center\" />\n\n      <el-table-column prop=\"checkCircle\" label=\"周期\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          {{ CHECK_STATUS[row.checkCircle] }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"draftAmount\" label=\"费用总计(元)\" align=\"center\" />\n      <!-- <el-table-column prop=\"auditReason\" label=\"驳回原因\" :show-overflow-tooltip=\"true\" width=\"100px\" align=\"center\" /> -->\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160\" align=\"center\" />\n\n      <el-table-column fixed=\"right\" align=\"center\" label=\"操作\" width=\"190\">\n        <template slot-scope=\"{row}\">\n          <el-button type=\"text\" @click=\"handleDetail(row)\"> 查看</el-button>\n          <div v-hasPermi=\"['order:list:update']\" class=\"erc-divider-vertical\" />\n          <el-button v-hasPermi=\"['order:list:update']\" type=\"text\" @click=\"handleCopy(row)\"> 复制</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <!-- <el-button type=\"text\" @click=\"handleDownload(row)\"> 下载</el-button>\n          <div class=\"erc-divider-vertical\" /> -->\n\n          <el-dropdown size=\"medium\">\n            <span class=\"el-dropdown-link\">\n              更多<i class=\"el-icon-arrow-down el-icon--right\" />\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-link v-if=\"row.status === '0' || row.status === '2'\" v-hasPermi=\"['order:list:update']\" :underline=\"false\" @click=\"handleUpdate(row)\">\n                <el-dropdown-item>编辑</el-dropdown-item>\n              </el-link>\n              <el-link v-if=\"row.status === '0' || row.status === '2'\" v-hasPermi=\"['order:list:update']\" :underline=\"false\" @click=\"handleApprovel(row.id)\">\n                <el-dropdown-item>提交审核</el-dropdown-item>\n              </el-link>\n              <el-link v-if=\"row.status === '0' || row.status === '2' || row.status === '4'\" v-hasPermi=\"['order:list:del']\" :underline=\"false\" @click=\"handleDelete(row.id)\">\n                <el-dropdown-item>删除</el-dropdown-item>\n              </el-link>\n              <el-link :underline=\"false\" @click=\"handleDownload(row)\">\n                <el-dropdown-item>下载</el-dropdown-item>\n              </el-link>\n              <el-link v-if=\"row.status > 1\" :underline=\"false\" @click=\"handleApproveDetail(row)\">\n                <el-dropdown-item>审核历史</el-dropdown-item>\n              </el-link>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n  <div style=\"float: right\">\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"searchForm.pageNumber\"\n      :limit.sync=\"searchForm.pageSize\"\n      @pagination=\"handleSearch\"\n    />\n  </div>\n\n  <el-dialog :title=\"titleMap[orderDialogStatus]\" :visible.sync=\"orderDialogVisible\" :before-close=\"handleDialogClose\" fullscreen center>\n    <el-form ref=\"orderForm\" :model=\"orderForm\" :rules=\"orderRules\">\n      <el-card shadow=\"never\">\n        <div slot=\"header\">\n          <span>项目基础信息<i class=\"el-input__icon\" /></span>\n        </div>\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item prop=\"offerInfoTdo.projectName\" label=\"项目名称:\" label-width=\"100px\">\n              <el-input v-model=\"orderForm.offerInfoTdo.projectName\" placeholder=\"项目名称\" maxlength=\"30\" show-word-limit />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item prop=\"offerInfoTdo.finishDate\" label-width=\"115px\">\n              <span slot=\"label\">\n                完成日期\n                <el-popover\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"300\"\n                  trigger=\"hover\"\n                  content=\"客户要求的项目完成时间\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>\n                :\n              </span>\n              <el-date-picker\n                v-model=\"orderForm.offerInfoTdo.finishDate\"\n                type=\"date\"\n                value-format=\"yyyy-MM-dd\"\n                style=\"width: 100%;\"\n                placeholder=\"完成日期\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item prop=\"offerInfoTdo.certificationType\" label=\"认证类型:\" label-width=\"100px\">\n              <el-select v-model=\"orderForm.offerInfoTdo.certificationType\" style=\"width: 100%;\" placeholder=\"检测类型\">\n                <el-option value=\"1\" label=\"CMA\" />\n                <el-option value=\"2\" label=\"CNAS\" />\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item prop=\"offerInfoTdo.consignorName\" label=\"委托单位:\" label-width=\"100px\">\n              <el-input v-model=\"orderForm.offerInfoTdo.consignorName\" placeholder=\"委托单位\" maxlength=\"25\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item prop=\"offerInfoTdo.consignorLinker\" label=\"委托人:\" label-width=\"110px\">\n              <el-input v-model=\"orderForm.offerInfoTdo.consignorLinker\" placeholder=\"委托人\" maxlength=\"10\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item prop=\"offerInfoTdo.consignorLinkerPhone\" label=\"联系电话:\" label-width=\"100px\">\n              <el-input v-model=\"orderForm.offerInfoTdo.consignorLinkerPhone\" placeholder=\"联系电话\" maxlength=\"15\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注:\" label-width=\"80px\">\n              <el-input v-model=\"orderForm.offerInfoTdo.remark\" type=\"textarea\" :rows=\"2\" show-word-limit placeholder=\"备注\" maxlength=\"50\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-card>\n      <el-card shadow=\"never\" style=\"margin-top:10px;padding-bottom: 10px\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>检测因子信息<i class=\"el-input__icon\" /></span>\n          <el-button style=\"float: right; margin:4px 2px;\" type=\"primary\" plain size=\"mini\" @click=\"choseGroup\">因子套餐</el-button>\n          <el-button style=\"float: right; margin:4px 2px;\" type=\"primary\" plain size=\"mini\" @click=\"addFactor\">添加因子</el-button>\n        </div>\n        <el-table\n          :data=\"orderForm.factorTdos\"\n          stripe\n          highlight-current-row\n          show-summary\n          :summary-method=\"getSummaries\"\n          :header-cell-style=\"{background:'#ECF3FC'}\"\n          max-height=\"400px\"\n        >\n          <template slot=\"empty\">\n            <div class=\"table_empty\">\n              <div class=\"empty_tips\">\n                <span>\n                  暂无因子\n                </span>\n              </div>\n            </div>\n          </template>\n          <el-table-column prop=\"factorPoint\" label=\"位置\" min-width=\"180\" align=\"center\">\n            <template slot-scope=\"{row}\">\n              <el-input v-model=\"row.factorPoint\" placeholder=\"请录入位置\" />\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"className\" label=\"对象\" sortable align=\"center\" />\n          <el-table-column prop=\"secdClassName\" label=\"类别\" min-width=\"100px\" align=\"center\">\n            <template slot-scope=\"{row}\">\n              <template v-if=\"row.meanName && row.meanName.length > 0\">\n                {{ row.secdClassName }}<span style=\"color:red\">{{ '('+row.meanName+')' }}</span>\n              </template>\n              <template v-else>\n                {{ row.secdClassName }}\n              </template>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"factorName\" label=\"因子\" align=\"center\" />\n          <el-table-column prop=\"dayCount\" label=\"天数\" width=\"100px\" align=\"center\">\n            <template slot-scope=\"{row}\">\n              <el-input-number v-model=\"row.dayCount\" size=\"small\" style=\"width: 100%;\" :disabled=\"row.secdClassId === '002001' || row.secdClassId === '002003'\" :min=\"1\" :step=\"1\" :precision=\"0\" controls-position=\"right\" />\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"frequency\" label=\"频次(次/天)\" width=\"100px\" align=\"center\">\n            <template slot-scope=\"{row}\">\n              <el-input-number v-model=\"row.frequency\" size=\"small\" style=\"width: 100%;\" :disabled=\"row.secdClassId === '002001' || row.secdClassId === '002003'\" :min=\"1\" :step=\"1\" :max=\"row.secdClassId === '004001'?2:10\" :precision=\"0\" controls-position=\"right\" />\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"totalNum\" label=\"次数\" width=\"100px\" align=\"center\" />\n          <el-table-column prop=\"price\" label=\"单次费用\" width=\"100px\" align=\"center\" />\n          <el-table-column prop=\"totalCost\" label=\"总计\" width=\"120px\" align=\"center\" />\n          <el-table-column align=\"center\">\n            <template slot-scope=\"{$index, row}\">\n              <el-popover\n                placement=\"left\"\n                width=\"280\"\n                trigger=\"click\"\n              >\n                <el-input v-model=\"row.remark\" placeholder=\"录入备注信息\" />\n                <el-button slot=\"reference\" type=\"text\">备注</el-button>\n              </el-popover>\n              <el-button style=\"margin-left: 10px;\" type=\"text\" @click=\"handleRowDel($index, row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <el-row style=\"margin-top: 15px\">\n          <el-col :span=\"8\">\n            <el-form-item prop=\"taskNum\" label-width=\"110px\">\n              <span slot=\"label\">\n                任务总数\n                <el-popover\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"400\"\n                  trigger=\"hover\"\n                  content=\"任务总数默认为“1”，表示该项目为单次任务；若是周期性项目，\n                  则需填写该项目的任务总数（例如，任务总数填写“12”，任务周期选择“年”，表示该任务要求一年内完成12次检测任务数，\n                  具体任务时间根据实际情况分配）注意：一份报价单中不可同时包含\n                  单次任务和周期任务，也不可包含不同周期的任务。\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>\n                :\n              </span>\n              <el-input-number v-model=\"orderForm.offerInfoTdo.checkTaskCount\" controls-position=\"right\" style=\"width: 75%;\" :step=\"1\" :precision=\"0\" :min=\"1\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col v-if=\"orderForm.offerInfoTdo.checkTaskCount>1\" :span=\"8\">\n            <el-form-item label-width=\"110px\">\n              <div slot=\"label\">任务周期:</div>\n              <el-select v-model=\"orderForm.offerInfoTdo.checkCircle\" style=\"width: 75%;\" placeholder=\"周期选择\">\n                <el-option value=\"1\" label=\"周\" />\n                <el-option value=\"2\" label=\"月\" />\n                <el-option value=\"3\" label=\"季\" />\n                <el-option value=\"4\" label=\"半年\" />\n                <el-option value=\"5\" label=\"年\" />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label-width=\"135px\">\n              <span slot=\"label\">\n                报告编制费(%)\n                <el-popover\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"300\"\n                  trigger=\"hover\"\n                  content=\"单次任务报告编制费所占总检测费的比例\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>\n                :\n              </span>\n              <el-input-number v-model=\"orderForm.offerCostTdo.reportAmountRate\" class=\"i-input\" controls-position=\"right\" :precision=\"0\" :min=\"0\" style=\"width: 75%;\" :max=\"100\" placeholder=\"报告编制费\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label-width=\"110px\">\n              <span slot=\"label\">\n                加急费(元)\n                <el-popover\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"300\"\n                  trigger=\"hover\"\n                  content=\"单次任务加急费\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>\n                :\n              </span>\n              <el-input-number v-model=\"orderForm.offerCostTdo.expediteAmount\" :min=\"0\" controls-position=\"right\" :precision=\"2\" style=\"width: 75%;\" placeholder=\"加急费\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"8\">\n            <el-form-item label-width=\"110px\">\n              <span slot=\"label\">采样费(元)\n                <el-popover\n                  slot=\"suffix\"\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"300\"\n                  trigger=\"hover\"\n                  content=\"单次任务费用\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>:</span>\n              <el-input-number v-model=\"orderForm.offerCostTdo.laborAmount\" :min=\"0\" controls-position=\"right\" :precision=\"2\" style=\"width: 75%;\" placeholder=\"采样费\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"8\">\n            <el-form-item label-width=\"135px\">\n              <span slot=\"label\">差旅费(元)\n                <el-popover\n                  slot=\"suffix\"\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"300\"\n                  trigger=\"hover\"\n                  content=\"单次任务费用\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>:</span>\n              <el-input-number v-model=\"orderForm.offerCostTdo.tripAmount\" :min=\"0\" controls-position=\"right\" :precision=\"2\" style=\"width: 75%;\" placeholder=\"差旅费\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"8\">\n            <el-form-item label-width=\"110px\">\n              <span slot=\"label\">\n                税率(%)\n                <el-popover\n                  placement=\"top-start\"\n                  title=\"\"\n                  width=\"300\"\n                  trigger=\"hover\"\n                  content=\"单次任务费用\"\n                >\n                  <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n                </el-popover>\n                :\n              </span>\n              <el-input-number v-model=\"orderForm.offerCostTdo.taxAmountRate\" class=\"i-input\" style=\"width: 75%;\" controls-position=\"right\" :precision=\"0\" :min=\"0\" :max=\"100\" placeholder=\"税率\" />\n            </el-form-item>\n          </el-col>\n\n          <el-col v-for=\"(item, index) in orderForm.selfCostTdos\" :key=\"index\" :span=\"8\">\n            <el-form-item label-width=\"110px\">\n              <div slot=\"label\">{{ item.selfName }}:</div>\n              <el-input v-model=\"item.amount\" type=\"number\" min=\"0\" style=\"width: 65%;margin-right:3px\" placeholder=\"金额信息\" />\n              <el-button type=\"text\" size=\"small\" @click.prevent=\"removeDomain(item)\">删除</el-button>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"8\">\n            <el-form-item label-width=\"110px\">\n              <el-button type=\"primary\" icon=\"el-icon-circle-plus-outline\" @click=\"showAddPrice\">新增费用</el-button>\n            </el-form-item>\n          </el-col>\n\n        </el-row>\n      </el-card>\n      <el-card shadow=\"never\" style=\"margin-top:10px;padding-bottom: 10px\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>费用统计</span>\n        </div>\n        <el-form label-width=\"130px\">\n          <el-row>\n            <el-col :span=\"6\">\n              <el-form-item label=\"检测费合计:\">\n                <span>{{ orderForm.offerCostTdo.checkAmount|MoneyFormat }}</span> 元\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"报告编制费:\">\n                <span>{{ orderForm.offerCostTdo.reportAmount|MoneyFormat }}</span> 元\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"报告加急费:\">\n                <span>{{ (orderForm.offerCostTdo.expediteAmount * orderForm.offerInfoTdo.checkTaskCount)|MoneyFormat }}</span> 元\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"采样费:\">\n                <span>{{ (orderForm.offerCostTdo.laborAmount * orderForm.offerInfoTdo.checkTaskCount)|MoneyFormat }}</span> 元\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col :span=\"6\">\n              <el-form-item label=\"差旅费:\">\n                <span>{{ (orderForm.offerCostTdo.tripAmount * orderForm.offerInfoTdo.checkTaskCount)|MoneyFormat }}</span> 元\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"税额:\">\n                <span>{{ orderForm.offerCostTdo.taxAmount|MoneyFormat }}</span> 元\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"额外费用:\">\n                <span>{{ otherPrice|MoneyFormat }}</span> 元\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </el-form>\n        <el-row>\n          <el-col :span=\"24\" style=\"text-align:right;line-heigh: 2em;\">\n            <div style=\"position: relative;display:inline-flex;line-height:2em;\">\n              <span style=\"margin-right:10px;\">费用总计:</span>\n              <div style=\"position: relative;width:100px;padding:0 15px;\">{{ orderForm.offerCostTdo.sysAmount|MoneyFormat }}</div> 元\n            </div>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\" style=\"text-align:right\">\n            <span style=\"margin-right:5px;\"><span style=\"color: red;padding-right: 4px;vertical-align: sub;\">*</span>优惠价:</span>\n            <el-input v-model=\"orderForm.offerCostTdo.draftAmount\" class=\"right-input\" style=\"width: 100px\" @input=\"validatoProInput\" /> 元\n          </el-col>\n        </el-row>\n      </el-card>\n    </el-form>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"orderDialogVisible=false\">取消</el-button>\n      <el-button type=\"primary\" @click=\"confirmDialog\">确认</el-button>\n    </div>\n\n    <el-dialog title=\"额外费用\" :visible.sync=\"innerPriceVisible\" append-to-body width=\"60%\" top=\"5vh\">\n      <div style=\"width: 450px;margin:0 auto;\">\n        <el-form :model=\"addPriceForm\" label-width=\"90px\">\n          <el-form-item label=\"费用名目:\">\n            <el-input v-model=\"addPriceForm.selfName\" placeholder=\"费用名目\" style=\"width:250px;\" />\n          </el-form-item>\n          <el-form-item label=\"金额(元):\">\n            <el-input v-model=\"addPriceForm.amount\" placeholder=\"金额\" style=\"width:250px;\" />\n          </el-form-item>\n        </el-form>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"innerPriceVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmPrice\">确认</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog title=\"因子选择\" :visible.sync=\"factorVisible\" append-to-body width=\"85%\" :close-on-click-modal=\"false\" top=\"5vh\">\n      <div>\n        <el-row :gutter=\"10\">\n          <el-col :span=\"6\">\n            <el-card class=\"card-left\" shadow=\"never\">\n              <div>\n                <el-tree\n                  ref=\"tree\"\n                  class=\"filter-tree\"\n                  :data=\"factorTreeData\"\n                  :props=\"defaultProps\"\n                  highlight-current\n                  default-expand-all\n                  :expand-on-click-node=\"true\"\n                  style=\"height: 100%;\"\n                  @node-click=\"handleTreeFactorSearch\"\n                />\n              </div>\n            </el-card>\n          </el-col>\n          <el-col :span=\"18\">\n            <el-container>\n              <el-header height=\"45px\">\n                <el-input v-model=\"factorForm.factorName\" style=\"width:200px\" placeholder=\"输入检测因子名称\" @change=\"handleFactorSearch\" />\n                <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"handleFactorSearch\">查询</el-button>\n              </el-header>\n              <el-main class=\"main-body\">\n                <el-table\n                  ref=\"multipleTable\"\n                  :data=\"showChoseData\"\n                  stripe\n                  border\n                  max-height=\"310px\"\n                  :header-cell-style=\"{background:'#ECF3FC'}\"\n                  @select=\"handleSelectChange\"\n                  @selection-change=\"handleSelectionChange\"\n                >\n                  <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n                  <el-table-column prop=\"className\" label=\"检测对象\" width=\"100px\" align=\"center\" />\n                  <el-table-column prop=\"factorName\" label=\"检测因子\" align=\"center\" />\n                  <el-table-column prop=\"standardName\" label=\"检测标准\" min-width=\"130px\" align=\"center\" />\n                  <el-table-column prop=\"MoneyFormat\" label=\"价格\" align=\"center\">\n                    <template slot-scope=\"{row}\">\n                      {{ row.price|MoneyFormat }} 元\n                    </template>\n                  </el-table-column>\n                </el-table>\n              </el-main>\n              <el-footer height=\"45px\">\n                <pagination\n                  v-show=\"factTotal>0\"\n                  :total=\"factTotal\"\n                  :page.sync=\"factorForm.pageNumber\"\n                  :limit.sync=\"factorForm.pageSize\"\n                  @pagination=\"handleFactorSearch\"\n                />\n              </el-footer>\n            </el-container>\n\n          </el-col>\n        </el-row>\n        <el-divider content-position=\"left\">已选因子</el-divider>\n        <el-row style=\"min-height:36px;line-height: 30px\">\n          <el-col :span=\"2\">\n            <span>已选中因子:</span>\n          </el-col>\n          <el-col :span=\"22\">\n            <template v-if=\"choseFatcors && choseFatcors.length > 0\">\n              <el-tag\n                v-for=\"item in choseFatcors\"\n                :key=\"item.id\"\n                closable\n                :disable-transitions=\"false\"\n                style=\"margin:2px 3px\"\n                @close=\"handleClose(item)\"\n              >\n                {{ item.factorName }}\n              </el-tag>\n            </template>\n            <template v-else>\n              无\n            </template>\n          </el-col>\n        </el-row>\n        <el-divider content-position=\"left\">因子配置</el-divider>\n        <el-form>\n          <el-row :gutter=\"10\">\n            <el-col :span=\"6\">\n              <el-form-item v-if=\"currentNodeId === '002001'\" label=\"均值类型:\" label-width=\"100px\">\n                <el-select v-model=\"meanType\" placeholder=\"请选择均值类型\" @change=\"changeMeanType\">\n                  <el-option value=\"0\" label=\"日均值\" />\n                  <el-option value=\"1\" label=\"时均值\" />\n                  <el-option value=\"2\" label=\"八小时均值\" />\n                </el-select>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"天数:\" label-width=\"100px\">\n                <el-input-number v-model=\"setDay\" controls-position=\"right\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"6\">\n              <el-form-item label=\"频次(次/天):\" label-width=\"110px\">\n                <el-input-number v-model=\"frequency\" controls-position=\"right\" :max=\"maxTotal\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"24\">\n              <el-form-item :label=\"addressArray && addressArray.length >0 ?'检测位置1:':'检测位置:'\" label-width=\"100px\">\n                <el-input v-model=\"lookPosition\" placeholder=\"检测位置\" style=\"width: 250px;margin-right:3px\" />\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row>\n            <el-col v-for=\"(item, index) in addressArray\" :key=\"item.key\" :span=\"24\">\n              <el-form-item :label=\"'检测位置'+(index+2)+':'\" label-width=\"100px\">\n                <el-input v-model=\"item.value\" placeholder=\"检测位置\" style=\"width: 250px;margin-right:3px\" />\n                <el-button v-if=\"currentNodeId !== '002001' && currentNodeId !== '002003'\" type=\"text\" size=\"small\" @click.prevent=\"removeAddDomain(item)\">删除</el-button>\n              </el-form-item>\n            </el-col>\n            <el-col v-if=\"currentNodeId !== '002003' && currentNodeId !== '002001'\" :span=\"24\" style=\"padding-left:20px\">\n              <el-form-item>\n                <el-button type=\"primary\" @click=\"addAddress\">添加位置</el-button>\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </el-form>\n      </div>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"factorVisible=false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmChoseFactor\">确认</el-button>\n      </div>\n    </el-dialog>\n  </el-dialog>\n\n  <el-dialog :title=\"'报价单(' +orderDetailForm.offerId+ ')'\" :visible.sync=\"detailVisible\" top=\"5vh\" width=\"70%\">\n    <el-form label-position=\"right\" label-width=\"135px\">\n      <el-row>\n        <el-col :span=\"8\">\n          <el-form-item label=\"客户名称:\">{{ orderDetailForm.offerBaseVo.consignorName || '' }}</el-form-item>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-form-item label=\"联系人:\">{{ orderDetailForm.offerBaseVo.consignorLinker || '' }}</el-form-item>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-form-item label=\"联系电话:\">{{ orderDetailForm.offerBaseVo.consignorLinkerPhone || '' }}</el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"8\">\n          <el-form-item label=\"客户要求完成时间:\">{{ orderDetailForm.offerBaseVo.finishDate|Time2Format }}</el-form-item>\n        </el-col>\n        <el-col :span=\"16\">\n          <el-form-item label=\"备注:\">{{ orderDetailForm.offerBaseVo.remark || '' }}</el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-divider>因子列表</el-divider>\n    <div class=\"table-responsive\">\n      <table class=\"table table-bordered table-hover\" cellspacing=\"1\" cellpadding=\"0  \">\n        <thead>\n          <tr>\n            <th rowspan=\"2\">序号</th>\n            <th rowspan=\"2\">检测类别</th>\n            <th colspan=\"3\">检测项目</th>\n            <th rowspan=\"2\">频次(次/天)</th>\n            <th rowspan=\"2\">天数</th>\n            <th rowspan=\"2\">次数</th>\n            <th rowspan=\"2\">检测费(元)</th>\n            <th rowspan=\"2\">总计(元)</th>\n          </tr>\n          <tr>\n            <th>序号</th>\n            <th>检测位置</th>\n            <th>因子</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          <tr v-for=\"(item, index) in orderDetailForm.factorTdos\" :key=\"index\">\n            <template v-if=\"item.dateType == 0\">\n              <template v-if=\"item.frIndex==0\">\n                <td :rowspan=\"item.detailLength\">{{ item.id }}</td>\n                <td :rowspan=\"item.detailLength\">{{ item.secName }}</td>\n              </template>\n              <td>{{ item.sid }}</td>\n              <td>{{ item.factorPoint }}</td>\n              <td>{{ item.factorName }}{{ item.meanName&&item.meanName.length > 0?'('+ item.meanName +')':'' }}</td>\n              <td>{{ item.frequency }}</td>\n              <td>{{ item.dayCount }}</td>\n              <td>{{ Number(item.frequency*item.dayCount).toFixed(0) }}</td>\n              <td>{{ item.price }}</td>\n              <td>{{ item.totalCost|MoneyFormat }}</td>\n            </template>\n            <template v-else>\n              <td colspan=\"7\">小计</td>\n              <td>{{ item.totalPrice }}</td>\n            </template>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr><td colspan=\"9\">{{ orderDetailForm.offerBaseVo.checkTaskCount > 1?'单次检测费合计':'检测费合计' }}</td><td>{{ orderDetailForm.oncePrice|MoneyFormat }}</td></tr>\n\n          <tr v-if=\"orderDetailForm.offerBaseVo.checkTaskCount > 1\">\n            <td colspan=\"3\">检测任务总数</td>\n            <td>{{ orderDetailForm.offerBaseVo.checkTaskCount }}</td>\n            <td colspan=\"3\">任务周期</td>\n            <td colspan=\"3\">{{ CHECK_STATUS[orderDetailForm.offerBaseVo.checkCircle] }}</td>\n          </tr>\n          <tr><td colspan=\"9\">检测费</td><td>{{ orderDetailForm.costVo.checkAmount|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"9\">报告编制费</td><td>{{ orderDetailForm.costVo.reportAmount|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"9\">报告加急费</td><td>{{ (orderDetailForm.costVo.expediteAmount)|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"9\">采样费</td><td>{{ (orderDetailForm.costVo.laborAmount)|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"9\">差旅费</td><td>{{ (orderDetailForm.costVo.tripAmount)|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"9\">税额</td><td>{{ orderDetailForm.costVo.taxAmount|MoneyFormat }}</td></tr>\n          <template v-if=\"orderDetailForm.selfCostVos\">\n            <tr v-for=\"(item, index) in orderDetailForm.selfCostVos\" :key=\"index\">\n              <td colspan=\"9\">{{ item.selfName }}</td>\n              <td>{{ item.amount|MoneyFormat }}</td>\n            </tr>\n          </template>\n          <tr><td colspan=\"9\">总计</td><td>{{ orderDetailForm.costVo.sysAmount|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"9\">优惠价</td><td>{{ orderDetailForm.costVo.draftAmount|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"2\">大写：</td><td colspan=\"8\">{{ orderDetailForm.costVo.draftAmount|Money2Chinese }}</td></tr>\n        </tfoot>\n      </table>\n    </div>\n  </el-dialog>\n\n  <el-dialog title=\"审核历史\" :visible.sync=\"approveVisible\" width=\"75%\">\n    <el-table :data=\"approveDetails\" border stripe>\n      <el-table-column type=\"index\" label=\"序号\" width=\"50\" align=\"center\" />\n      <el-table-column label=\"状态\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.isPass==='0'?'success':'danger'\">{{ row.isPass==='0'?'审核通过':'审核不通过' }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"审核说明\" align=\"center\" />\n      <el-table-column prop=\"approvalUserName\" label=\"审批用户\" align=\"center\" />\n      <el-table-column prop=\"createTime\" label=\"审批时间\" align=\"center\" />\n    </el-table>\n  </el-dialog>\n\n  <!-- <el-dialog title=\"因子套餐\" :visible.sync=\"factorGroupVisible\" width=\"75%\">\n    <el-row>\n      <el-col :span=\"24\">\n        <el-table\n          ref=\"groupMultipleTable\"\n          :data=\"factorGroupData\"\n          max-height=\"400\"\n          stripe\n          border\n          :header-cell-style=\"{background:'#ECF3FC'}\"\n          @selection-change=\"handleGroupSelectionChange\"\n          @select=\"groupSelect\"\n          @select-all=\"groupSelectAll\"\n        >\n          <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n          <el-table-column prop=\"groupName\" label=\"因子套餐名称\" align=\"center\" />\n          <el-table-column prop=\"groupDesc\" label=\"套餐说明\" align=\"center\" />\n          <el-table-column prop=\"remark\" label=\"因子详情\" align=\"center\" />\n        </el-table>\n      </el-col>\n    </el-row>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"factorGroupVisible=false\">取消</el-button>\n      <el-button type=\"primary\" @click=\"confirmAddGroup\">确认</el-button>\n    </div>\n  </el-dialog> -->\n\n  <el-dialog title=\"因子套餐\" :visible.sync=\"factorGroupVisible\" append-to-body :close-on-click-modal=\"false\" width=\"85%\">\n    <el-row :gutter=\"20\">\n      <el-col :span=\"4\">\n        <el-card shadow=\"never\" style=\"height: 400px;overflow-y: auto;\">\n          <div v-for=\"(item, index) in factorGroupData\" :key=\"index\" class=\"text dialog-item\" @click=\"choseItem(item)\">\n            {{ item.groupName }}\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"4\">\n        <el-card shadow=\"never\" style=\"height: 400px;\">\n          <el-tree\n            ref=\"tree\"\n            :data=\"treeData\"\n            default-expand-all\n            node-key=\"id\"\n            highlight-current\n            :props=\"defaultProps\"\n            @node-click=\"changeTreeItem\"\n          />\n        </el-card>\n      </el-col>\n      <el-col :span=\"16\">\n        <el-table\n          ref=\"groupMultipleTable\"\n          :data=\"factorList\"\n          border\n          height=\"400px\"\n          :header-cell-style=\"{background:'#ECF3FC'}\"\n          @selection-change=\"handleGroupSelectionChange\"\n          @select=\"groupSelect\"\n        >\n          <el-table-column type=\"selection\" align=\"center\" width=\"50\" />\n          <el-table-column prop=\"secdClassName\" label=\"检测对象\" align=\"center\" />\n          <el-table-column prop=\"factorName\" label=\"检测因子\" align=\"center\" />\n          <el-table-column prop=\"standardName\" label=\"检测标准\" align=\"center\" />\n          <el-table-column prop=\"price\" label=\"价格\" align=\"center\">\n            <template slot-scope=\"{row}\">\n              {{ row.price|MoneyFormat }} 元\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-col>\n    </el-row>\n    <el-divider content-position=\"left\">已选因子</el-divider>\n    <el-row style=\"min-height:36px;line-height: 30px\">\n      <el-col :span=\"2\">\n        <span>已选中因子:</span>\n      </el-col>\n      <el-col :span=\"22\">\n        <template v-if=\"choseGroupFatcors && choseGroupFatcors.length > 0\">\n          <el-tag\n            v-for=\"item in choseGroupFatcors\"\n            :key=\"item.id\"\n            closable\n            :disable-transitions=\"false\"\n            style=\"margin:2px 3px\"\n            @close=\"handleGroupClose(item)\"\n          >\n            {{ item.factorName }}\n          </el-tag>\n        </template>\n        <template v-else>\n          无\n        </template>\n      </el-col>\n    </el-row>\n\n    <el-divider content-position=\"left\">因子配置</el-divider>\n    <el-form>\n      <el-row :gutter=\"10\">\n        <el-col :span=\"6\">\n          <el-form-item v-if=\"currentNodeId === '002001'\" label=\"均值类型:\" label-width=\"100px\">\n            <el-select v-model=\"meanType\" placeholder=\"请选择均值类型\" @change=\"changeMeanType\">\n              <el-option value=\"0\" label=\"日均值\" />\n              <el-option value=\"1\" label=\"时均值\" />\n              <el-option value=\"2\" label=\"八小时均值\" />\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"天数:\" label-width=\"100px\">\n            <el-input-number v-model=\"setDay\" controls-position=\"right\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"频次(次/天):\" label-width=\"110px\">\n            <el-input-number v-model=\"frequency\" controls-position=\"right\" :max=\"maxTotal\" :min=\"1\" :step=\"1\" :precision=\"0\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item :label=\"addressArray && addressArray.length >0 ?'检测位置1:':'检测位置:'\" label-width=\"100px\">\n            <el-input v-model=\"lookPosition\" placeholder=\"检测位置\" style=\"width: 250px;margin-right:3px\" />\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col v-for=\"(item, index) in addressArray\" :key=\"item.key\" :span=\"24\">\n          <el-form-item :label=\"'检测位置'+(index+2)+':'\" label-width=\"100px\">\n            <el-input v-model=\"item.value\" placeholder=\"检测位置\" style=\"width: 250px;margin-right:3px\" />\n            <el-button v-if=\"currentNodeId !== '002001' && currentNodeId !== '002003'\" type=\"text\" size=\"small\" @click.prevent=\"removeAddDomain(item)\">删除</el-button>\n          </el-form-item>\n        </el-col>\n        <el-col v-if=\"currentNodeId !== '002003' && currentNodeId !== '002001'\" :span=\"24\" style=\"padding-left:20px\">\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"addAddress\">添加位置</el-button>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"factorGroupVisible=false\">取消</el-button>\n      <el-button type=\"primary\" @click=\"confirmGroupChoseFactor\">确认</el-button>\n    </div>\n\n  </el-dialog>\n</div>\n",null]}