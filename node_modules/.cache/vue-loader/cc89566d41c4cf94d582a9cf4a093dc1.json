{"remainingRequest":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjects\\vue-hj-platform\\src\\views\\sampleTask\\components\\sampleTaskList.vue?vue&type=template&id=bdb44800&scoped=true&","dependencies":[{"path":"F:\\webstormProjects\\vue-hj-platform\\src\\views\\sampleTask\\components\\sampleTaskList.vue","mtime":1653036797000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"tab-container\">\n  <el-form :model=\"searchForm\" :inline=\"true\">\n    <el-row>\n      <el-col :span=\"20\">\n        <el-form-item label=\"任务单号:\">\n          <el-input v-model=\"searchForm.jobId\" style=\"width:165px\" placeholder=\"报价单号\" />\n        </el-form-item>\n        <el-form-item label=\"项目名称:\">\n          <el-input v-model=\"searchForm.projectName\" style=\"width:165px\" placeholder=\"项目名称\" />\n        </el-form-item>\n        <el-form-item label=\"任务状态:\">\n          <el-select v-model=\"searchForm.sampTaskStatus\" clearable filterable style=\"width:165px\" placeholder=\"请选择状态\">\n            <el-option\n              v-for=\"item in Object.keys(SAMPLE_STATUS)\"\n              :key=\"item\"\n              :label=\"SAMPLE_STATUS[item]\"\n              :value=\"item\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"4\" class=\"search-right\">\n        <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n      </el-col>\n    </el-row>\n  </el-form>\n  <div>\n    <el-table\n      stripe\n      border\n      :data=\"sampleData\"\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n      style=\"width: 100%\"\n    >\n      <template slot=\"empty\">\n        <div class=\"table_empty\">\n          <div class=\"empty_tips\">\n            <span>\n              暂无信息\n            </span>\n          </div>\n        </div>\n      </template>\n      <el-table-column type=\"index\" width=\"50\" label=\"序号\" fixed=\"left\" align=\"center\" />\n      <el-table-column prop=\"jobId\" label=\"任务单号\" fixed=\"left\" width=\"130px\" align=\"center\" />\n      <el-table-column prop=\"projectName\" label=\"项目名称\" width=\"150px\" align=\"center\" />\n      <el-table-column prop=\"inspectionName\" label=\"受检单位\" align=\"center\" />\n      <el-table-column label=\"任务时间\" align=\"center\" width=\"190px\">\n        <template slot-scope=\"{row}\">\n          {{ row.startDate }}~{{ row.endDate }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160\" align=\"center\" />\n      <el-table-column prop=\"sampTaskStatus\" label=\"状态\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag effect=\"dark\" :type=\"row.sampTaskStatus | statusQualityFilter\">\n            {{ SAMPLE_STATUS[row.sampTaskStatus] }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" />\n\n      <el-table-column fixed=\"right\" align=\"center\" label=\"操作\" width=\"140px\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" @click=\"handleDetail(scope.row)\"> 查看</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-button v-if=\"scope.row.sampTaskStatus > 1\" type=\"text\" @click=\"handlePrint(scope.row)\"> 标签打印</el-button>\n          <el-button v-if=\"scope.row.sampTaskStatus <2\" type=\"text\" @click=\"handleSchedTask(scope.row)\"> 合样</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n  <div style=\"float: right\">\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"searchForm.pageNumber\"\n      :limit.sync=\"searchForm.pageSize\"\n      @pagination=\"handleSearch\"\n    />\n  </div>\n\n  <el-dialog :title=\"taskTitle + ' 任务详情'\" :visible.sync=\"taskVisible\" center width=\"70%\" top=\"5vh\">\n    <el-row>\n      <el-col :span=\"12\">\n        <span>合同编号: {{ taskForm.contCode }}</span>\n      </el-col>\n      <el-col :span=\"12\">\n        <span>报价单号: {{ taskForm.offerId }}</span>\n      </el-col>\n    </el-row>\n    <table class=\"info-table-new\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n      <tr>\n        <td style=\"background: #f5f5f5;\">项目名称:</td>\n        <td>{{ taskForm.projectName }}</td>\n        <td style=\"background: #f5f5f5;\">委托单位:</td>\n        <td>{{ taskForm.consignorName }}</td>\n      </tr>\n      <tr>\n        <td style=\"background: #f5f5f5;\">委托联系人:</td>\n        <td>{{ taskForm.consignorLinker }} </td>\n        <td style=\"background: #f5f5f5;\">委托联系人方式:</td>\n        <td>{{ taskForm.consignorLinkerPhone }}</td>\n      </tr>\n      <tr>\n        <td colspan=\"4\" style=\"text-align: left;padding-left:15px;\">\n          工作要求:\n        </td>\n      </tr>\n      <tr>\n        <td colspan=\"4\" style=\"text-align: left;padding-left:15px;\">\n          <el-row v-for=\"(item, index) in factorData\" :key=\"index\">\n            <el-col :span=\"24\" style=\"font-weight: bolder\">{{ item.secdClassName }}:</el-col>\n            <el-col v-for=\"el in item.factList\" :key=\"el.id\" :span=\"24\">\n              {{ el.factorPoint + '（'+ el.dayCount +'*'+ el.frequency+'）: ' }}{{ el.showFactName }} <span v-if=\"el.fbFlag==='1'\" style=\"color: red;\">(分包)</span>\n            </el-col>\n          </el-row>\n        </td>\n      </tr>\n    </table>\n\n  </el-dialog>\n\n  <el-dialog title=\"合样\" :visible.sync=\"sampleTaskVisible\" width=\"80%\" :close-on-click-modal=\"false\" top=\"1vh\">\n    <el-form>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"任务单号:\">\n            {{ currentRow.jobId }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"受检单位:\">\n            {{ currentRow.inspectionName }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"联系电话:\">\n            {{ currentRow.inspectionLinkerPhone }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"要求完成时间:\">\n            {{ currentRow.startDate }}~{{ currentRow.endDate }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <el-card shadow=\"never\" style=\"margin-top:10px;padding-bottom: 10px\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span slot=\"label\">\n          采样位置分配 <i class=\"el-input__icon \" />\n          <el-popover\n            placement=\"top-start\"\n            title=\"\"\n            width=\"300\"\n            trigger=\"hover\"\n            content=\"该采样任务分配信息仅作为给采样组长的提示信息，不与后续流程强关联，采样负责人也可以不分配。建议该位置分配给哪个组长就由该组长进行合样操作。\"\n          >\n            <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n          </el-popover>\n        </span>\n        <el-button v-if=\"roles.indexOf('Pm') > -1\" slot=\"small\" style=\"float: right; margin:4px 2px;\" type=\"primary\" :disabled=\"multipleLeaderSelection.length==0\" plain @click=\"choseLeader\">确认</el-button>\n        <el-select\n          v-if=\"roles.indexOf('Pm') > -1\"\n          slot=\"small\"\n          v-model=\"leaderfactorPoint\"\n          style=\"float: right; margin:4px 2px; width: 250px;\"\n          filterable\n          multiple\n          placeholder=\"请选择采样组长\"\n        >\n          <el-option\n            v-for=\"item in perGroups\"\n            :key=\"item.userId\"\n            :label=\"item.empName\"\n            :value=\"item.userId\"\n          />\n        </el-select>\n      </div>\n      <el-table\n        ref=\"pointAddressInfo\"\n        :data=\"pointAddress\"\n        border\n        stripe\n        max-height=\"300\"\n        @selection-change=\"handleLeaderSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\n        <el-table-column type=\"index\" width=\"50\" label=\"序号\" align=\"center\" />\n        <el-table-column prop=\"factorPoint\" label=\"检测位置\" align=\"center\" />\n        <el-table-column prop=\"sampleUsers\" label=\"采样组长\" align=\"center\" />\n      </el-table>\n    </el-card>\n    <el-card shadow=\"never\" style=\"margin-top:10px;padding-bottom: 10px\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span slot=\"label\">\n          合样操作备忘录<i class=\"el-input__icon \" />\n          <el-popover\n            placement=\"top-start\"\n            title=\"\"\n            width=\"300\"\n            trigger=\"hover\"\n            content=\"您可以录入任意备忘录信息以协同合样操作，采样负责人和采样组长都可以在文本框中增添信息并查看\"\n          >\n            <svg-icon slot=\"reference\" icon-class=\"help\" style=\"font-size:16px\" />\n          </el-popover>\n        </span>\n      </div>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-input v-model=\"combinedRemark\" type=\"textarea\" :rows=\"3\" placeholder=\"请输入备注信息\" />\n        </el-col>\n      </el-row>\n    </el-card>\n    <el-tabs type=\"border-card\">\n      <el-tab-pane label=\"自检因子\">\n        <el-card shadow=\"never\">\n          <div slot=\"header\" class=\"clearfix\">\n            <el-row>\n              <el-col :span=\"4\">\n                <span>自检因子信息<i class=\"el-input__icon \" /></span>\n              </el-col>\n              <el-col :span=\"15\" style=\"padding:10px; text-align:left;\">\n                <span style=\"color:red;width: 100%;\">注意：选择需要合样的因子进行“合样”操作，其他不需要合样的因子可以在合样完成后，点击“全选”按钮，进行“自成样品”操作。</span>\n              </el-col>\n              <el-col :span=\"5\" style=\"padding: 5px;text-align:right\">\n                <el-button type=\"primary\" plain size=\"mini\" @click=\"moveFactors\">自成样品</el-button>\n                <el-button type=\"primary\" plain size=\"mini\" @click=\"mergeFactors\">合样</el-button>\n              </el-col>\n            </el-row>\n          </div>\n          <el-row>\n            <el-col :span=\"4\">\n              &nbsp;\n              <el-button type=\"text\" @click=\"toggleZjSelection(0)\">全选</el-button>\n              <el-button type=\"text\" @click=\"toggleZjSelection(1)\">取消</el-button>\n            </el-col>\n            <el-col :span=\"20\" style=\"text-align: right;\">\n              <el-input v-model=\"showFactorName\" placeholder=\"请录入因子名称\" style=\"width: 250px;padding-bottom: 5px;\" />\n            </el-col>\n          </el-row>\n          <el-table\n            ref=\"choseTable\"\n            stripe\n            border\n            size=\"small\"\n            :data=\"filterData\"\n            highlight-current-row\n            :header-cell-style=\"{background:'#ECF3FC'}\"\n            style=\"width: 100%;\"\n            max-height=\"400px\"\n            @selection-change=\"handleSelectionChange\"\n            @select=\"handleSelect\"\n          >\n            <el-table-column type=\"selection\" width=\"50\" :selectable=\"checkSelectable\" align=\"center\" />\n            <el-table-column prop=\"secdClassName\" label=\"检测类别\" :filters=\"zjClassNames\" :filter-method=\"filterZJClass\" :column-key=\"'secdClassName'\" align=\"center\" />\n            <el-table-column prop=\"factorName\" label=\"检测因子\" min-width=\"200px\" align=\"center\" />\n            <el-table-column prop=\"factorPoint\" label=\"检测位置\" :filters=\"zjFactorNames\" :filter-method=\"filterZjTable\" :column-key=\"'factorPoint'\" align=\"center\" />\n            <el-table-column prop=\"frequency\" label=\"频次(次/天)\" align=\"center\" />\n            <el-table-column prop=\"dayCount\" label=\"天数\" align=\"center\" />\n            <el-table-column label=\"次数\" align=\"center\">\n              <template slot-scope=\"{row}\">\n                {{ Number(row.frequency*row.dayCount).toFixed(0) }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"状态\" align=\"center\">\n              <template>\n                <el-tag type=\"\">自检</el-tag>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n        <el-card shadow=\"never\" style=\"margin-top: 10px;\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>合样列表<i class=\"el-input__icon \" /></span>\n            <!-- <el-button type=\"primary\" plain size=\"mini\" @click=\"sortData\">位置排序</el-button> -->\n            <!-- <el-button type=\"primary\" plain size=\"mini\" style=\"float: right; margin:4px 2px;\" @click=\"delMergeData\">移除合样</el-button> -->\n            <!-- <el-button v-if=\"roles.indexOf('Pm') > -1\" slot=\"small\" style=\"float: right; margin:4px 2px;\" type=\"primary\" :disabled=\"multipleSampleSelection.length==0\" plain @click=\"choseSampleLeader\">确认</el-button> -->\n            <el-select\n              v-if=\"roles.indexOf('Pm') > -1\"\n              slot=\"small\"\n              v-model=\"mergeOnline\"\n              style=\"float: right; margin:4px 2px; width: 250px;\"\n              filterable\n              clearable\n              placeholder=\"请选择采样组长\"\n              @change=\"handleOnlineChangeRow()\"\n            >\n              <el-option\n                v-for=\"item in perGroups\"\n                :key=\"item.userId\"\n                :label=\"item.empName\"\n                :value=\"item.userId\"\n              />\n            </el-select>\n          </div>\n          <el-table\n            ref=\"mergerInfo\"\n            border\n            :data=\"mergeData\"\n            size=\"small\"\n            highlight-current-row\n            :header-cell-style=\"{background:'#ECF3FC'}\"\n            max-height=\"400px\"\n            style=\"width: 100%\"\n            @selection-change=\"handleMergeChange\"\n          >\n            <el-table-column v-if=\"roles.indexOf('Pm') > -1\" align=\"center\" type=\"selection\" width=\"50\" />\n            <el-table-column type=\"index\" width=\"50\" align=\"center\" label=\"序号\" />\n            <el-table-column prop=\"secdClassName\" label=\"检测类别\" align=\"center\" />\n            <el-table-column prop=\"factorName\" label=\"检测因子\" min-width=\"200px\" align=\"center\" />\n            <el-table-column prop=\"factorPoint\" label=\"检测位置\" align=\"center\" />\n            <el-table-column prop=\"frequency\" label=\"频次(次/天)\" align=\"center\" />\n            <el-table-column prop=\"dayCount\" label=\"天数\" align=\"center\" />\n            <el-table-column label=\"样品数\" align=\"center\">\n              <template slot-scope=\"{row}\">\n                {{ Number(row.frequency*row.dayCount).toFixed(0) }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"sampleUser\" label=\"采样组长\" align=\"center\" width=\"135\" />\n            <el-table-column label=\"操作\" align=\"center\">\n              <template slot-scope=\"{row, $index}\">\n                <el-button v-if=\"roles.indexOf('Pm') > -1 || userInfo.userId === row.sampleUserId\" type=\"text\" @click=\"delGroupRow(row, $index)\">删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n\n      </el-tab-pane>\n      <el-tab-pane label=\"分包因子\">\n        <el-card shadow=\"never\">\n          <div slot=\"header\" class=\"clearfix\">\n            <el-row>\n              <el-col :span=\"4\">\n                <span>分包因子信息<i class=\"el-input__icon \" /></span>\n              </el-col>\n              <el-col :span=\"15\" style=\"padding:10px; text-align:right;\">\n                <span style=\"color:red;width: 100%;\">注意：选择需要合样的因子进行“合样”操作，其他不需要合样的因子可以在合样完成后，点击“全选”按钮，进行“自成样品”操作。</span>\n              </el-col>\n              <el-col :span=\"5\" style=\"padding: 5px;text-align:right\">\n                <el-button type=\"primary\" plain size=\"mini\" @click=\"moveOutFactors\">自成样品</el-button>\n                <el-button type=\"primary\" plain size=\"mini\" @click=\"mergeOutFactors\">合样</el-button>\n              </el-col>\n            </el-row>\n          </div>\n          <el-row>\n            <el-col :span=\"4\">\n              &nbsp;\n              <el-button type=\"text\" @click=\"toggleFbSelection(0)\">全选</el-button>\n              <el-button type=\"text\" @click=\"toggleFbSelection(1)\">取消</el-button>\n            </el-col>\n            <el-col :span=\"20\" style=\"text-align: right;\">\n              <el-input v-model=\"showOutFactorName\" placeholder=\"请录入因子名称\" style=\"width: 250px;padding-bottom: 5px\" />\n            </el-col>\n          </el-row>\n          <el-table\n            ref=\"choseOutTable\"\n            stripe\n            border\n            size=\"small\"\n            :data=\"outFilterData\"\n            highlight-current-row\n            :header-cell-style=\"{background:'#ECF3FC'}\"\n            style=\"width: 100%;marggin-top: 10px\"\n            max-height=\"300px\"\n            @selection-change=\"handleOutSelectionChange\"\n            @select=\"handleOutSelect\"\n          >\n            <el-table-column type=\"selection\" width=\"45\" :selectable=\"checkOutSelectable\" align=\"center\" />\n            <el-table-column prop=\"secdClassName\" label=\"检测类别\" :filters=\"wbClassNames\" :filter-method=\"filterFbClass\" :column-key=\"'secdClassName'\" align=\"center\" />\n            <el-table-column prop=\"factorName\" label=\"检测因子\" min-width=\"200px\" align=\"center\" />\n            <el-table-column prop=\"factorPoint\" label=\"检测位置\" :filters=\"wbFactorNames\" :filter-method=\"filterFbTable\" :column-key=\"'factorPoint'\" align=\"center\" />\n            <el-table-column prop=\"frequency\" label=\"频次(次/天)\" align=\"center\" />\n            <el-table-column prop=\"dayCount\" label=\"天数\" align=\"center\" />\n            <el-table-column label=\"次数\" align=\"center\">\n              <template slot-scope=\"{row}\">\n                {{ Number(row.frequency*row.dayCount).toFixed(0) }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"状态\" align=\"center\">\n              <template>\n                <el-tag type=\"danger\">分包</el-tag>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n        <el-card shadow=\"never\" style=\"margin-top: 10px;\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>分包合样列表<i class=\"el-input__icon \" /></span>\n            <el-select\n              v-if=\"roles.indexOf('Pm') > -1\"\n              slot=\"small\"\n              v-model=\"mergeOutOnline\"\n              style=\"float: right; margin:4px 2px; width: 250px;\"\n              filterable\n              placeholder=\"请选择采样组长\"\n              @change=\"handleOutOnlineChangeRow()\"\n            >\n              <el-option\n                v-for=\"item in perGroups\"\n                :key=\"item.userId\"\n                :label=\"item.empName\"\n                :value=\"item.userId\"\n              />\n            </el-select>\n            <!-- <el-button type=\"primary\" plain size=\"mini\" @click=\"delMergeOutData\">移除合样</el-button> -->\n          </div>\n          <el-table\n            ref=\"mergeOutRef\"\n            border\n            :data=\"mergeOutData\"\n            size=\"small\"\n            highlight-current-row\n            :header-cell-style=\"{background:'#ECF3FC'}\"\n            max-height=\"400px\"\n            style=\"width: 100%\"\n            @selection-change=\"handleMergeOutChange\"\n          >\n            <el-table-column v-if=\"roles.indexOf('Pm') > -1\" type=\"selection\" align=\"center\" width=\"50\" />\n            <el-table-column type=\"index\" width=\"50\" align=\"center\" label=\"序号\" />\n            <el-table-column prop=\"secdClassName\" label=\"检测类别\" align=\"center\" />\n            <el-table-column prop=\"factorName\" label=\"检测因子\" min-width=\"200px\" align=\"center\" />\n            <el-table-column prop=\"factorPoint\" label=\"检测位置\" align=\"center\" />\n            <el-table-column prop=\"frequency\" label=\"频次(次/天)\" align=\"center\" />\n            <el-table-column prop=\"dayCount\" label=\"天数\" align=\"center\" />\n            <el-table-column label=\"样品数\" align=\"center\">\n              <template slot-scope=\"{row}\">\n                {{ Number(row.frequency*row.dayCount).toFixed(0) }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"sampleUser\" label=\"采样组长\" align=\"center\" width=\"135\" />\n            <el-table-column label=\"操作\" align=\"center\">\n              <template slot-scope=\"{row, $index}\">\n                <el-button v-if=\"roles.indexOf('Pm') > -1 || userInfo.userId === row.sampleUserId\" type=\"text\" @click=\"delOutGroupRow(row, $index)\">删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n\n      </el-tab-pane>\n    </el-tabs>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"sampleTaskVisible=false\">取消</el-button>\n      <el-button :disabled=\"saveDisable\" type=\"primary\" @click=\"saveDialog\">保存</el-button>\n      <el-button v-if=\"roles.indexOf('Pm')>-1\" type=\"primary\" :disabled=\"currentRow.sampTaskStatus!=='1'\" @click=\"confirmDialog\">确认</el-button>\n    </div>\n  </el-dialog>\n\n</div>\n",null]}