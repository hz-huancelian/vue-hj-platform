{"remainingRequest":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjects\\vue-hj-platform\\src\\views\\order\\components\\hisOrderList.vue?vue&type=template&id=3edd4388&scoped=true&","dependencies":[{"path":"F:\\webstormProjects\\vue-hj-platform\\src\\views\\order\\components\\hisOrderList.vue","mtime":1652149822000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\vue-hj-platform\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div>\n  <el-form :model=\"searchForm\" :inline=\"true\">\n    <el-row>\n      <el-col :span=\"20\">\n        <el-form-item label=\"项目名称:\">\n          <el-input v-model=\"searchForm.projectName\" style=\"width:165px\" placeholder=\"项目名称\" />\n        </el-form-item>\n        <el-form-item label=\"报价单号:\">\n          <el-input v-model=\"searchForm.id\" style=\"width:165px\" placeholder=\"报价单号\" />\n        </el-form-item>\n        <el-form-item label=\"报价单状态:\">\n          <el-select v-model=\"searchForm.status\" clearable style=\"width:160px\" filterable placeholder=\"报价单状态\">\n            <el-option\n              v-for=\"item in Object.keys(ACCOUNT_STATUS)\"\n              :key=\"item\"\n              :label=\"ACCOUNT_STATUS[item]\"\n              :value=\"item\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" class=\"iconfont icon-chaxun1\" @click=\"handleSearch\"> 查询</el-button>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"4\" class=\"search-right\">\n        <el-button type=\"text\" icon=\"el-icon-refresh\" @click=\"handleSearch\">刷新</el-button>\n      </el-col>\n    </el-row>\n  </el-form>\n  <div>\n    <el-table\n      stripe\n      border\n      :data=\"orderData\"\n      highlight-current-row\n      :header-cell-style=\"{background:'#ECF3FC'}\"\n      style=\"width: 100%\"\n    >\n      <template slot=\"empty\">\n        <div class=\"table_empty\">\n          <div class=\"empty_tips\">\n            <span>\n              暂无历史报价单\n            </span>\n          </div>\n        </div>\n      </template>\n      <el-table-column type=\"index\" width=\"55\" label=\"序号\" fixed=\"left\" align=\"center\" />\n      <el-table-column prop=\"projectName\" label=\"项目名称\" fixed=\"left\" min-width=\"120px\" align=\"center\" />\n      <el-table-column prop=\"id\" label=\"报价单号\" sortable min-width=\"170px\" align=\"center\" />\n      <el-table-column prop=\"checkType\" label=\"检测类型\" width=\"90px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          {{ row.checkType === '0'?\"委托检测\":\"样品送检\" }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"certificationType\" label=\"认证类型\" width=\"90px\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          {{ row.certificationType === '1'?\"CMA\":\"CNAS\" }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"consignorName\" label=\"客户名称\" min-width=\"120px\" align=\"center\" />\n      <el-table-column prop=\"finishDate\" label=\"客户要求完成时间\" width=\"140\" align=\"center\" />\n      <el-table-column prop=\"createUserId\" label=\"报价人\" align=\"center\" />\n      <el-table-column prop=\"draftAmount\" label=\"费用总计(元)\" align=\"center\" />\n      <el-table-column prop=\"status\" label=\"状态\" width=\"100\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag effect=\"dark\" :type=\"row.status | statusQualityFilter\">\n            {{ ACCOUNT_STATUS[row.status] }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160\" align=\"center\" />\n\n      <el-table-column fixed=\"right\" align=\"center\" label=\"操作\" width=\"270\">\n        <template slot-scope=\"{row}\">\n          <el-button type=\"text\" @click=\"handleDetail(row)\"> 查看</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-button type=\"text\" @click=\"handleCopy(row)\"> 复制</el-button>\n          <div class=\"erc-divider-vertical\" />\n          <el-button type=\"text\" @click=\"handleHisApproveDetail(row)\"> 审核历史</el-button>\n          <el-dropdown size=\"medium\">\n            <span class=\"el-dropdown-link\">\n              下载<i class=\"el-icon-arrow-down el-icon--right\" />\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-link :underline=\"false\" @click=\"handleDownload(row)\">\n                <el-dropdown-item>WORD下载</el-dropdown-item>\n              </el-link>\n              <el-link :underline=\"false\" @click=\"handleExcelDownload(row)\">\n                <el-dropdown-item>EXCEL下载</el-dropdown-item>\n              </el-link>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n  <div style=\"float: right\">\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"searchForm.pageNumber\"\n      :limit.sync=\"searchForm.pageSize\"\n      @pagination=\"handleSearch\"\n    />\n  </div>\n\n  <el-dialog :title=\"'报价单(' +orderDetailForm.offerId+ ')'\" :visible.sync=\"detailVisible\" top=\"5vh\" width=\"70%\">\n    <el-form label-position=\"right\" label-width=\"135px\">\n      <el-row>\n        <el-col :span=\"8\">\n          <el-form-item label=\"客户名称:\">{{ orderDetailForm.offerBaseVo.consignorName || '' }}</el-form-item>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-form-item label=\"联系人:\">{{ orderDetailForm.offerBaseVo.consignorLinker || '' }}</el-form-item>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-form-item label=\"联系电话:\">{{ orderDetailForm.offerBaseVo.consignorLinkerPhone || '' }}</el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"8\">\n          <el-form-item label=\"客户要求完成时间:\">{{ orderDetailForm.offerBaseVo.finishDate|Time2Format }}</el-form-item>\n        </el-col>\n        <el-col :span=\"16\">\n          <el-form-item label=\"备注:\">{{ orderDetailForm.offerBaseVo.remark || '' }}</el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div v-for=\"(item, index) in orderDetailPlans\" :key=\"index\">\n      <el-divider>{{ item.planName }}-计划因子列表</el-divider>\n      <div class=\"table-responsive\">\n        <table class=\"table table-bordered table-hover\" cellspacing=\"1\" cellpadding=\"0\">\n          <thead>\n            <tr>\n              <th rowspan=\"2\">序号</th>\n              <th rowspan=\"2\">检测类别</th>\n              <th colspan=\"3\">检测项目</th>\n              <th rowspan=\"2\">频次(次/天)</th>\n              <th rowspan=\"2\">天数</th>\n              <th rowspan=\"2\">监测频次</th>\n              <th rowspan=\"2\">执行次数</th>\n              <th rowspan=\"2\">总数</th>\n              <th rowspan=\"2\">检测单价(元)</th>\n              <th rowspan=\"2\">检测费(元)</th>\n            </tr>\n            <tr>\n              <th>序号</th>\n              <th>检测位置</th>\n              <th>因子</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(sitem, sindex) in item.factorTdos\" :key=\"sindex\">\n              <template v-if=\"sitem.frIndex==0\">\n                <td :rowspan=\"sitem.detailLength\">{{ sitem.id }}</td>\n                <td :rowspan=\"sitem.detailLength\">{{ sitem.secName }}</td>\n              </template>\n              <td>{{ sitem.sid }}</td>\n              <td>{{ sitem.factorPoint }}</td>\n              <td>{{ sitem.factorName }}{{ sitem.meanName&&sitem.meanName.length > 0?'('+ sitem.meanName +')':'' }}</td>\n              <td>{{ sitem.frequency }}</td>\n              <td>{{ sitem.dayCount }}</td>\n              <template v-if=\"sindex==0\">\n                <td :rowspan=\"item.oldPlanFactors.length\">{{ item.checkFreq }}</td>\n                <td :rowspan=\"item.oldPlanFactors.length\">{{ item.execTimes }}</td>\n              </template>\n              <td>{{ Number(sitem.frequency * sitem.dayCount * item.execTimes ).toFixed(0) }}</td>\n              <td>{{ sitem.costPerTime }}</td>\n              <td>{{ parseFloat(sitem.costPerTime*sitem.frequency * sitem.dayCount * item.execTimes).toFixed(2) }}</td>\n\n            </tr>\n            <tr>\n              <td colspan=\"11\">检测费合计</td>\n              <td>{{ parseFloat(item.checkFee*item.execTimes).toFixed(2) }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class=\"table-responsive\">\n      <table class=\"table table-bordered table-hover\" cellspacing=\"1\" cellpadding=\"0  \">\n        <tbody>\n          <tr><td colspan=\"2\" style=\"width: 80%\">检测费合计</td><td>{{ orderDetailForm.costVo.checkAmount|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"2\" style=\"width: 80%\">报告编制费</td><td>{{ orderDetailForm.costVo.reportAmount|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"2\" style=\"width: 80%\">报告加急费</td><td>{{ (orderDetailForm.costVo.expediteAmount)|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"2\" style=\"width: 80%\">采样费</td><td>{{ (orderDetailForm.costVo.laborAmount)|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"2\" style=\"width: 80%\">差旅费</td><td>{{ (orderDetailForm.costVo.tripAmount)|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"2\" style=\"width: 80%\">税额</td><td>{{ orderDetailForm.costVo.taxAmount|MoneyFormat }}</td></tr>\n          <template v-if=\"orderDetailForm.selfCostVos\">\n            <tr v-for=\"(item, index) in orderDetailForm.selfCostVos\" :key=\"index\">\n              <td colspan=\"2\" style=\"width: 80%\">{{ item.selfName }}</td>\n              <td>{{ item.amount|MoneyFormat }}</td>\n            </tr>\n          </template>\n          <tr><td colspan=\"2\" style=\"width: 80%\">总计</td><td>{{ orderDetailForm.costVo.sysAmount|MoneyFormat }}</td></tr>\n          <tr><td colspan=\"2\" style=\"width: 80%\">优惠价</td><td>{{ orderDetailForm.costVo.draftAmount|MoneyFormat }}</td></tr>\n          <tr><td style=\"width: 20%\">大写：</td><td colspan=\"2\" style=\"width: 80%\">{{ orderDetailForm.costVo.draftAmount|Money2Chinese }}</td></tr>\n        </tbody>\n      </table>\n    </div>\n  </el-dialog>\n\n  <el-dialog title=\"审核历史\" :visible.sync=\"hisApproveVisible\" width=\"75%\">\n    <el-table :data=\"approveDetails\" border stripe>\n      <el-table-column type=\"index\" label=\"序号\" width=\"50\" align=\"center\" />\n      <el-table-column label=\"状态\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.isPass==0?'success':'danger'\">{{ row.isPass==0?'审核通过':'审核不通过' }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"审核说明\" align=\"center\" />\n      <el-table-column prop=\"approvalUserName\" label=\"审批用户\" align=\"center\" />\n      <el-table-column prop=\"createTime\" label=\"审批时间\" align=\"center\" />\n    </el-table>\n  </el-dialog>\n</div>\n",null]}